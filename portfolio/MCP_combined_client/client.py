"""
Cliente MCP Multi-Turn Combinado (Elicitaci√≥n + Sampling)
=========================================================

Cliente que demuestra el uso combinado de elicitaci√≥n y sampling
en un agente de reserva de viajes inteligente.

Demuestra:
1. Elicitaci√≥n para decisiones cr√≠ticas del usuario
2. Sampling para generar recomendaciones personalizadas con AI
3. Flujo completo de reserva con confirmaciones
4. Manejo de respuestas complejas (aceptar/rechazar/modificar)
5. Integraci√≥n fluida entre inputs humanos y AI completions

Uso:
    python client.py
"""

import asyncio
import json
from typing import Any, Dict, List, Optional

from fastmcp import Client
from fastmcp.client.transports import StdioTransport
from fastmcp.client.elicitation import ElicitResult
from fastmcp.client.sampling import SamplingParams, RequestContext as SamplingRequestContext


class CombinedTravelClient:
    """Cliente que demuestra patrones combinados de elicitaci√≥n + sampling."""
    
    def __init__(self, server_command: List[str]):
        """
        Inicializa el cliente combinado.
        
        Args:
            server_command: Comando para ejecutar el servidor MCP
        """
        self.server_command = server_command
        self.user_scenario = None  # None = modo interactivo real, o especificar escenario para simular
    
    def set_user_scenario(self, scenario: str):
        """
        Configura el escenario de usuario a simular.
        
        Args:
            scenario: 'business', 'family', 'budget', 'luxury', 'interactive' o None para modo interactivo real
        """
        self.user_scenario = scenario
    
    def set_interactive_mode(self):
        """Habilita el modo interactivo real donde el usuario debe introducir respuestas."""
        self.user_scenario = None
    
    async def connect(self) -> Client:
        """Crea y conecta el cliente al servidor."""
        transport = StdioTransport(
            command=self.server_command[0],
            args=self.server_command[1:]
        )
        
        # Configurar el manejador de elicitaci√≥n
        async def elicitation_handler(message: str, response_type, params, ctx) -> ElicitResult:
            """
            Maneja las solicitudes de elicitaci√≥n del servidor.
            Si user_scenario es None, pide input real al usuario.
            Si tiene un escenario configurado, simula respuestas autom√°ticas.
            """
            print(f"\nü§ñ Agente solicita: {message}")
            
            # Si no hay escenario configurado, pedir input real del usuario
            if self.user_scenario is None or self.user_scenario == "interactive":
                # Mostrar opciones si response_type es una lista
                if isinstance(response_type, list):
                    print("Opciones disponibles:")
                    for i, option in enumerate(response_type, 1):
                        print(f"  {i}. {option}")
                    while True:
                        try:
                            choice = input(f"üë§ Tu respuesta (1-{len(response_type)}): ").strip()
                            choice_idx = int(choice) - 1
                            if 0 <= choice_idx < len(response_type):
                                response = response_type[choice_idx]
                                break
                            else:
                                print(f"‚ùå Por favor selecciona un n√∫mero del 1 al {len(response_type)}")
                        except ValueError:
                            print("‚ùå Por favor ingresa un n√∫mero v√°lido")
                else:
                    # Para otros tipos, pedir input directo
                    response_hint = ""
                    if response_type == int:
                        response_hint = " (n√∫mero entero)"
                    elif response_type == str:
                        response_hint = " (texto)"
                    
                    response = input(f"üë§ Tu respuesta{response_hint}: ").strip()
                    
                    # Convertir al tipo correcto si es necesario
                    if response_type == int:
                        try:
                            response = int(response)
                        except ValueError:
                            print("‚ö†Ô∏è Usando valor por defecto: 1")
                            response = 1
            else:
                # Modo simulaci√≥n autom√°tica
                if "RESUMEN DE TU VIAJE" in message:
                    print(f"üîç DEBUG: Detectada solicitud de confirmaci√≥n - Escenario: {self.user_scenario}")
                
                # Respuestas seg√∫n escenario de usuario
                if self.user_scenario == "business":
                    response = self._get_business_response(message, response_type)
                elif self.user_scenario == "family":
                    response = self._get_family_response(message, response_type)
                elif self.user_scenario == "budget":
                    response = self._get_budget_response(message, response_type)
                elif self.user_scenario == "luxury":
                    response = self._get_luxury_response(message, response_type)
                else:
                    response = self._get_default_response(message, response_type)
                
                print(f"üë§ Usuario ({self.user_scenario}) responde: {response}")
            
            # FastMCP espera un objeto JSON (dict), no string directo
            if isinstance(response, str):
                return ElicitResult(action="accept", content={"value": response})
            elif isinstance(response, (int, float)):
                return ElicitResult(action="accept", content={"value": response})
            else:
                return ElicitResult(action="accept", content=response)
        
        # Configurar el manejador de sampling
        async def sampling_handler(messages, params: SamplingParams, ctx: SamplingRequestContext):
            """
            Maneja las solicitudes de sampling (AI completions).
            Simula respuestas de diferentes modelos de AI seg√∫n el contexto.
            """
            print(f"\nüß† Solicitud AI para {self._detect_ai_task(messages, params)}:")
            print(f"   üìù Sistema: {params.system_prompt[:80]}..." if params.system_prompt else "   üìù Sistema: No especificado")
            print(f"   üí¨ Usuario: {messages[0].content.text[:80]}..." if messages else "   üí¨ Usuario: Vac√≠o")
            
            # Generar respuesta simulada seg√∫n el tipo de tarea
            task_type = self._detect_ai_task(messages, params)
            simulated_response = self._generate_ai_response(task_type, messages, params)
            
            print(f"ü§ñ AI responde: {simulated_response[:100]}...")
            
            from mcp.types import TextContent
            return TextContent(text=simulated_response, type="text")
        
        client = Client(
            transport, 
            elicitation_handler=elicitation_handler,
            sampling_handler=sampling_handler
        )
        return client
    
    def _detect_ai_task(self, messages, params: SamplingParams) -> str:
        """Detecta el tipo de tarea AI basado en el contexto."""
        if not messages:
            return "unknown"
        
        message_text = messages[0].content.text.lower()
        system_prompt = (params.system_prompt or "").lower()
        
        if "destino" in message_text and "analiza" in message_text:
            return "destination_analysis"
        elif "itinerario" in message_text or "itinerario" in system_prompt:
            return "itinerary_generation"
        elif "confirmaci√≥n" in message_text or "confirmaci√≥n" in system_prompt:
            return "confirmation_message"
        else:
            return "general_travel_ai"
    
    def _generate_ai_response(self, task_type: str, messages, params: SamplingParams) -> str:
        """Genera respuesta AI simulada seg√∫n el tipo de tarea."""
        responses = {
            "destination_analysis": self._generate_destination_analysis(),
            "itinerary_generation": self._generate_itinerary(),
            "confirmation_message": self._generate_confirmation(),
            "general_travel_ai": self._generate_general_travel_response()
        }
        
        return responses.get(task_type, "Respuesta AI simulada para tarea no reconocida.")
    
    def _generate_destination_analysis(self) -> str:
        """Simula an√°lisis de destino por AI."""
        return """{"name": "Roma, Italia", "base_price": 750, "highlights": ["Coliseo", "Vaticano", "Fontana di Trevi", "Gastronom√≠a aut√©ntica"], "best_season": "Primavera/Oto√±o (Abril-Junio, Septiembre-Octubre)", "travel_time": "8-10 horas desde Am√©rica del Norte"}"""
    
    def _generate_itinerary(self) -> str:
        """Simula generaci√≥n de itinerario personalizado."""
        if self.user_scenario == "business":
            return """üè¢ ITINERARIO EJECUTIVO - ROMA (4 d√≠as)

D√çA 1: Llegada y orientaci√≥n
- Ma√±ana: Check-in hotel business (zona EUR)
- Tarde: Centro hist√≥rico - Pantheon, Piazza Navona
- Noche: Cena ejecutiva en Il Pagliaccio (Michelin ‚≠ê)

D√çA 2: Roma Cl√°sica Eficiente
- 08:00: Tour privado Coliseo y Foro Romano (2h)
- 11:00: Break reuni√≥n virtual (WiFi hotel)
- 14:00: Almuerzo r√°pido Checchino dal 1887
- 16:00: Museos Vaticanos + Capilla Sixtina (entrada prioritaria)

D√çA 3: Networking y Cultura
- Ma√±ana: Disponible para meetings/calls
- 14:00: Villa Borghese y Galleria
- 18:00: Aperitivo networking - Hotel de Russie
- 20:30: Cena en Piperno (especialidad carciofi)

D√çA 4: √öltimo d√≠a
- 10:00: Fontana di Trevi y shopping Via del Corso
- 13:00: Almuerzo ligero antes del vuelo
- Transfer aeropuerto

üí∞ COSTOS ADICIONALES ESTIMADOS:
- Comidas: $400-600 USD
- Tours privados: $300 USD  
- Transport local: $100 USD
- Compras/souvenirs: $200 USD

‚úàÔ∏è CONSEJOS EJECUTIVOS:
- Hotel con centro business 24/7
- SIM card local para datos ilimitados
- Apps: Citymapper, Google Translate offline
- Vestuario: Business casual, zapatos c√≥modos para caminar"""
        
        elif self.user_scenario == "family":
            return """üë®‚Äçüë©‚Äçüëß‚Äçüë¶ ITINERARIO FAMILIAR - ROMA (5 d√≠as)

D√çA 1: Llegada suave
- Ma√±ana: Llegada, check-in apartamento familiar
- Tarde: Exploraci√≥n barrio Trastevere (kid-friendly)
- Noche: Pizza en Da Enzo al 29 (aut√©ntica, ambiente casual)

D√çA 2: Roma Antigua para ni√±os
- 09:00: Coliseo con audio-gu√≠a para ni√±os
- 11:30: Foro Romano - juego "busca el tesoro hist√≥rico"
- 14:00: Pausa pranzo en parque Villa Celimontana
- 16:00: Gelato en Giolitti (desde 1900!)

D√çA 3: Vaticano Familiar
- 08:00: Desayuno tranquilo
- 10:00: Museos Vaticanos (tour familia 2.5h max)
- 14:00: Picnic en Jardines Vaticanos
- 16:00: Subida a C√∫pula San Pedro (si ni√±os >8 a√±os)
- 18:00: Paseo Castel Sant'Angelo

D√çA 4: Diversi√≥n y Descubrimiento
- 09:00: Villa Borghese - alquiler bicicletas familiares
- 11:00: Zoo de Roma (Bioparco)
- 15:00: Fontana di Trevi - lanzar monedas (tradici√≥n!)
- 17:00: Escalinata Espa√±ola y shopping souvenirs

D√çA 5: √öltimo d√≠a relajado
- 10:00: Mercado Campo de' Fiori con ni√±os
- 12:00: √öltima pasta en Roma - Checchino dal 1887
- 14:00: Preparar maletas, descanso
- 16:00: Transfer al aeropuerto

üí∞ COSTOS FAMILIA (4 personas):
- Alimentos: $600-800 USD (incluye mucho gelato!)
- Actividades: $400 USD
- Transporte: $150 USD
- Souvenirs: $300 USD

üë®‚Äçüë©‚Äçüëß‚Äçüë¶ CONSEJOS FAMILIARES:
- Apartamento > hotel (cocina, lavander√≠a)
- Llevar snacks y agua siempre
- Apps: Rome for Kids, iDiscover Rome
- Horarios: salidas temprano, siesta tarde"""
        
        else:  # Default business-focused
            return """üéØ ITINERARIO PERSONALIZADO - DESTINO PRINCIPAL

Basado en tus preferencias, he creado un plan equilibrado que combina los imperdibles con experiencias aut√©nticas locales.

üìÖ PLANIFICACI√ìN POR D√çAS:
D√çA 1: Orientaci√≥n y primeras impresiones
D√çA 2-3: Atracciones principales y cultura local  
D√çA 4: Experiencias √∫nicas y gastronom√≠a
D√çA 5: Compras y preparaci√≥n de regreso

üçΩÔ∏è RECOMENDACIONES GASTRON√ìMICAS:
- Restaurantes locales aut√©nticos
- Especialidades regionales imperdibles
- Opciones para diferentes presupuestos

üí° CONSEJOS PR√ÅCTICOS:
- Mejor √©poca para visitar
- Qu√© llevar en la maleta
- Apps √∫tiles para el destino
- Precauciones de seguridad

Los costos adicionales estimados var√≠an seg√∫n tu presupuesto seleccionado."""
    
    def _generate_confirmation(self) -> str:
        """Simula mensaje de confirmaci√≥n personalizado."""
        return """üéâ ¬°Felicitaciones! Tu aventura est√° oficialmente confirmada.

Has tomado una excelente decisi√≥n eligiendo este destino. Nuestro equipo est√° emocionado de ser parte de tu pr√≥ximo viaje y ya estamos trabajando para asegurar que cada detalle sea perfecto.

‚úÖ QU√â VIENE AHORA:
- Recibir√°s documentaci√≥n completa por email en 24h
- Te contactaremos 48h antes del viaje con detalles finales
- Tienes soporte 24/7 durante todo tu viaje
- Acceso a nuestra app m√≥vil con itinerario interactivo

üéÅ BONOS INCLUIDOS:
- Gu√≠a digital personalizada del destino
- Lista de frases √∫tiles en el idioma local
- Mapa offline con puntos de inter√©s marcados
- Contactos de emergencia locales

Tu inversi√≥n en experiencias vale cada centavo. ¬°Prep√°rate para crear recuerdos inolvidables!"""
    
    def _generate_general_travel_response(self) -> str:
        """Respuesta AI general para viajes."""
        return "Basado en las preferencias indicadas, puedo ofrecerte recomendaciones personalizadas que optimicen tu experiencia de viaje, considerando factores como presupuesto, tiempo disponible, y tipo de actividades preferidas."
    
    def _get_business_response(self, message: str, response_type) -> str:
        """Respuestas para viajero de negocios."""
        # Priorizar confirmaci√≥n antes que otras respuestas
        if "confirmas" in message.lower() or "RESUMEN DE TU VIAJE" in message:
            return "confirmar"
        elif "tipo de viaje" in message.lower():
            return "negocios"
        elif "destino" in message.lower() and "RESUMEN" not in message:
            return "Nueva York"
        elif "cu√°ndo" in message.lower():
            return "2024-03-15"
        elif "cu√°ntas personas" in message.lower():
            return 1
        elif "presupuesto" in message.lower():
            return "lujo"
        elif isinstance(response_type, list):
            return response_type[0]
        else:
            return "S√≠"
    
    def _get_family_response(self, message: str, response_type) -> str:
        """Respuestas para viaje familiar."""
        # Priorizar confirmaci√≥n antes que otras respuestas
        if "confirmas" in message.lower() or "RESUMEN DE TU VIAJE" in message:
            return "confirmar"
        elif "tipo de viaje" in message.lower():
            return "familiar"
        elif "destino" in message.lower() and "RESUMEN" not in message:
            return "Par√≠s"
        elif "cu√°ndo" in message.lower():
            return "vacaciones de verano"
        elif "cu√°ntas personas" in message.lower():
            return 4
        elif "presupuesto" in message.lower():
            return "medio"
        elif isinstance(response_type, list):
            return response_type[0]
        else:
            return "S√≠"
    
    def _get_budget_response(self, message: str, response_type) -> str:
        """Respuestas para viajero con presupuesto ajustado."""
        # Priorizar confirmaci√≥n antes que otras respuestas
        if "confirmas" in message.lower() or "RESUMEN DE TU VIAJE" in message:
            return "ver opciones m√°s baratas"
        elif "aceptas" in message.lower():
            return "aceptar"
        elif "tipo de viaje" in message.lower():
            return "placer"
        elif "destino" in message.lower() and "RESUMEN" not in message:
            return "Bali"
        elif "cu√°ndo" in message.lower():
            return "temporada baja"
        elif "cu√°ntas personas" in message.lower():
            return 2
        elif "presupuesto" in message.lower():
            return "econ√≥mico"
        elif isinstance(response_type, list):
            return response_type[0]
        else:
            return "S√≠"
    
    def _get_luxury_response(self, message: str, response_type) -> str:
        """Respuestas para viajero de lujo."""
        # Priorizar confirmaci√≥n antes que otras respuestas
        if "confirmas" in message.lower() or "RESUMEN DE TU VIAJE" in message:
            return "confirmar"
        elif "tipo de viaje" in message.lower():
            return "placer"
        elif "destino" in message.lower() and "RESUMEN" not in message:
            return "Tokio"
        elif "cu√°ndo" in message.lower():
            return "primavera 2024"
        elif "cu√°ntas personas" in message.lower():
            return 2
        elif "presupuesto" in message.lower():
            return "lujo"
        elif isinstance(response_type, list):
            return response_type[0]
        else:
            return "Excelente"
    
    def _get_default_response(self, message: str, response_type) -> str:
        """Respuestas por defecto."""
        if isinstance(response_type, list):
            return response_type[0]
        elif response_type == int:
            return 2
        else:
            return "S√≠"
    
    async def demo_business_traveler(self, client: Client) -> None:
        """Demuestra reserva para viajero de negocios."""
        print("\n" + "üíº" * 50)
        print("Demo: Viajero de Negocios - Nueva York")
        print("üíº" * 50)
        
        self.set_user_scenario("business")
        
        try:
            result = await client.call_tool("intelligent_travel_booking_agent", {})
            print(f"\n‚ú® Resultado de reserva ejecutiva:")
            print(result.content[0].text)
        except Exception as e:
            print(f"‚ùå Error en reserva de negocios: {str(e)}")
    
    async def demo_family_traveler(self, client: Client) -> None:
        """Demuestra reserva para familia."""
        print("\n" + "üë®‚Äçüë©‚Äçüëß‚Äçüë¶" * 50)
        print("Demo: Viaje Familiar - Par√≠s")
        print("üë®‚Äçüë©‚Äçüëß‚Äçüë¶" * 50)
        
        self.set_user_scenario("family")
        
        try:
            result = await client.call_tool("intelligent_travel_booking_agent", {})
            print(f"\n‚ú® Resultado de reserva familiar:")
            print(result.content[0].text)
        except Exception as e:
            print(f"‚ùå Error en reserva familiar: {str(e)}")
    
    async def demo_budget_traveler(self, client: Client) -> None:
        """Demuestra reserva con presupuesto ajustado."""
        print("\n" + "üí∞" * 50)
        print("Demo: Viajero Econ√≥mico - Bali")
        print("üí∞" * 50)
        
        self.set_user_scenario("budget")
        
        try:
            result = await client.call_tool("intelligent_travel_booking_agent", {})
            print(f"\n‚ú® Resultado de reserva econ√≥mica:")
            print(result.content[0].text)
        except Exception as e:
            print(f"‚ùå Error en reserva econ√≥mica: {str(e)}")
    
    async def demo_luxury_traveler(self, client: Client) -> None:
        """Demuestra reserva de lujo."""
        print("\n" + "‚ú®" * 50)
        print("Demo: Viajero de Lujo - Tokio")
        print("‚ú®" * 50)
        
        self.set_user_scenario("luxury")
        
        try:
            result = await client.call_tool("intelligent_travel_booking_agent", {})
            print(f"\n‚ú® Resultado de reserva de lujo:")
            print(result.content[0].text)
        except Exception as e:
            print(f"‚ùå Error en reserva de lujo: {str(e)}")
    
    async def demo_booking_management(self, client: Client) -> None:
        """Demuestra gesti√≥n de reservas."""
        print("\n" + "üìã" * 50)
        print("Demo: Gesti√≥n de Reservas")
        print("üìã" * 50)
        
        try:
            # Listar todas las reservas
            result = await client.call_tool("list_all_bookings", {})
            print(f"\nüìã Lista de reservas:")
            print(result.content[0].text)
        except Exception as e:
            print(f"‚ùå Error en gesti√≥n de reservas: {str(e)}")
    
    async def demo_interactive_booking(self, client: Client) -> None:
        """Demostraci√≥n interactiva real - el usuario introduce sus propias respuestas."""
        print("\n" + "üéÆ" * 50)
        print("Demo: Reserva Interactiva Real")
        print("üéÆ" * 50)
        print("\nüéØ En este modo T√ö introduces las respuestas")
        print("üí° El agente te preguntar√° y esperar√° tu input real")
        
        self.set_interactive_mode()  # Activar modo interactivo
        
        try:
            result = await client.call_tool("intelligent_travel_booking_agent", {})
            print(f"\n‚ú® Resultado de tu reserva interactiva:")
            print(result.content[0].text)
        except Exception as e:
            print(f"‚ùå Error en reserva interactiva: {str(e)}")


async def run_comprehensive_demo():
    """Ejecuta demo completo de todos los tipos de viajero."""
    print("üåü Demo Completo: Agente de Viajes Inteligente (Elicitaci√≥n + AI)")
    print("=" * 70)
    
    server_command = [
        "python", 
        "/Users/macm1/Documents/web/portafolio/portfolio/MCP_combined_server/server.py"
    ]
    
    client_manager = CombinedTravelClient(server_command)
    
    async with await client_manager.connect() as client:
        print("üîó Conectado al agente de viajes inteligente")
        
        # Ejecutar demos de diferentes tipos de viajero
        demos = [
            ("Viajero de Negocios", client_manager.demo_business_traveler),
            ("Familia Vacacionando", client_manager.demo_family_traveler),
            ("Viajero Econ√≥mico", client_manager.demo_budget_traveler),
            ("Viajero de Lujo", client_manager.demo_luxury_traveler),
            ("Gesti√≥n de Reservas", client_manager.demo_booking_management)
        ]
        
        for demo_name, demo_func in demos:
            try:
                print(f"\nüé¨ Ejecutando: {demo_name}")
                await demo_func(client)
                await asyncio.sleep(2)
            except Exception as e:
                print(f"‚ùå Error en {demo_name}: {str(e)}")
        
        print("\n" + "üéâ" * 50)
        print("¬°Demo completo del agente inteligente terminado!")
        print("Casos demostrados: Elicitaci√≥n + AI Sampling")
        print("üéâ" * 50)


async def interactive_demo():
    """Demo interactivo donde el usuario elige el tipo de viajero."""
    print("üöÄ Demo Interactivo: Agente de Viajes Inteligente")
    print("=" * 55)
    
    server_command = [
        "python", 
        "/Users/macm1/Documents/web/portafolio/portfolio/MCP_combined_server/server.py"
    ]
    
    client_manager = CombinedTravelClient(server_command)
    
    async with await client_manager.connect() as client:
        print("üîó Conectado al agente de viajes inteligente")
        
        while True:
            print("\n" + "=" * 50)
            print("Opciones disponibles:")
            print("1. üéÆ RESERVA INTERACTIVA REAL (t√∫ introduces respuestas)")
            print("2. üíº Demo autom√°tico: Viajero de negocios (Nueva York)")
            print("3. üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Demo autom√°tico: Familia vacacionando (Par√≠s)")
            print("4. üí∞ Demo autom√°tico: Viajero econ√≥mico (Bali)")
            print("5. ‚ú® Demo autom√°tico: Viajero de lujo (Tokio)")
            print("6. üìã Gestionar reservas existentes")
            print("7. üé¨ Ejecutar demo completo autom√°tico")
            print("8. üö™ Salir")
            
            try:
                choice = input("\nüëâ Selecciona una opci√≥n (1-8): ").strip()
                
                if choice == "1":
                    await client_manager.demo_interactive_booking(client)
                elif choice == "2":
                    await client_manager.demo_business_traveler(client)
                elif choice == "3":
                    await client_manager.demo_family_traveler(client)
                elif choice == "4":
                    await client_manager.demo_budget_traveler(client)
                elif choice == "5":
                    await client_manager.demo_luxury_traveler(client)
                elif choice == "6":
                    await client_manager.demo_booking_management(client)
                elif choice == "7":
                    # Demo completo autom√°tico
                    demos = [
                        client_manager.demo_business_traveler,
                        client_manager.demo_family_traveler,
                        client_manager.demo_budget_traveler,
                        client_manager.demo_luxury_traveler,
                        client_manager.demo_booking_management
                    ]
                    
                    for demo_func in demos:
                        await demo_func(client)
                        await asyncio.sleep(1)
                    
                    print("\nüéâ Demo completo terminado!")
                    
                elif choice == "8":
                    print("üëã ¬°Hasta luego!")
                    break
                else:
                    print("‚ùå Opci√≥n inv√°lida. Por favor selecciona 1-8.")
                    
            except KeyboardInterrupt:
                print("\nüëã Demo interrumpido. ¬°Hasta luego!")
                break
            except Exception as e:
                print(f"‚ùå Error: {str(e)}")


if __name__ == "__main__":
    print("üåü Agente de Viajes Inteligente con Multi-Turn Interactions")
    print("=" * 60)
    print("Selecciona el modo de demostraci√≥n:")
    print()
    print("1. üé¨ Demo autom√°tico completo (simula todos los tipos de viajero)")
    print("2. üéÆ Men√∫ interactivo (incluye opci√≥n de RESERVA REAL)")
    print()
    print("üí° Para experimentar la verdadera elicitaci√≥n, elige opci√≥n 2 ‚Üí 1")
    
    try:
        choice = input("\nüëâ Selecciona (1-2): ").strip()
        
        if choice == "1":
            asyncio.run(run_comprehensive_demo())
        elif choice == "2":
            asyncio.run(interactive_demo())
        else:
            print("‚ùå Opci√≥n inv√°lida")
            
    except KeyboardInterrupt:
        print("\nüëã ¬°Hasta luego!")
    except Exception as e:
        print(f"‚ùå Error: {str(e)}")