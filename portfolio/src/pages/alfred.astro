---
import Layout from '@layouts/Layout.astro';
import CodeBlockInputCell from '@components/CodeBlockInputCell.astro';

const { social_links } = await import('@portfolio/consts.json');
const { metadata_page } = await import('@portfolio/consts.json');
const { colors } = await import('@portfolio/consts.json');
const { color_palette } = await import('@portfolio/consts.json');
const { sticky_top_positions } = await import('@portfolio/consts.json');

const page_title = metadata_page.title + " - Alfred";
const url = social_links.portfolio_link_external + "/alfred"
const description = "Asistente personal para la terminal, para todos los sistemas operativos y lenguajes";
const keywords = "Personal, terminal, asistente";

const images_width = 1920*2/3;
const images_height =1080*2/3;
const buyMeACoffee_width = 305;
const buyMeACoffee_height = 28;

const url_deb = "https://github.com/maximofn/alfred/blob/v1.3/alfredv1_3.deb";

const inline_code_background_color = color_palette.color_950;

const sticky_top_default=sticky_top_positions.sticky_top_default;
const sticky_top_649px=sticky_top_positions.sticky_top_649px;
const sticky_top_418px=sticky_top_positions.sticky_top_418px;
const sticky_top_334px=sticky_top_positions.sticky_top_334px;
const sticky_top_315px=sticky_top_positions.sticky_top_315px;
const sticky_top_229px=sticky_top_positions.sticky_top_229px;
const sticky_top_h3_increment = "50px"
---

<Layout 
	title={page_title}
	languaje={metadata_page.languaje_es}
	description={description}
	keywords={keywords}
	author={metadata_page.author}
	theme_color={colors.background_color}
	url={url}
	icon={metadata_page.icon}
>
	<h1>Alfred</h1>
	<h4>Asistente personal para la terminal, para todos los sistemas operativos y lenguajes</h4>
	<figure class="video-container">
		<video 
			preload="auto"
			autoplay
			muted
			loop
			width={images_width}
			height={images_height}
		>
			<source src="videos/Alfred-bucle.webm" type="video/webm"/>
			<source src="videos/Alfred-bucle.mp4" type="video/mp4"/>
		</video>
	</figure>

	<section>
		<h2>Instalación</h2>
		<p>Requerimientos del sistema para la instalación</p>
		<CodeBlockInputCell
			text={[
				'sudo apt update',
				'sudo apt install -y python3 python3-pip git',
			]}
			languaje='bash'
		></CodeBlockInputCell>

		<section>
			<h3>Instalar con el instalador</h3>
			<p>A partir de aquí, si tienes un sistema basado en Debian, puedes utilizar el instalador <a href={url_deb} target="_blank" rel="nofollow noreferrer">alfred.deb</a></p>
		</section>

		<section>
				<h3>Instalar desde la fuente</h3>
				<p>Requerimientos de python</p>
				<CodeBlockInputCell text={["pip install halo", "pip install --upgrade openai"]} languaje='bash'></CodeBlockInputCell>
				<p>Crea una carpeta de código</p>
				<CodeBlockInputCell 
					text={[
						"sudo rm -r /usr/src/alfred",
						"cd /usr/src",
						"git clone -b branch_v1.3 https://github.com/maximofn/alfred.git",
						"cd /usr/src/alfred",
						"sudo find . -depth -not -name '*.py' -delete",
					]} 
					languaje='bash'
				></CodeBlockInputCell>
				<p>Crea un enlace simbólico a <span class="inline-code">/usr/bin/alfred</span></p>
				<CodeBlockInputCell text={["echo 'alias alfred=\"/usr/src/alfred/alfred.py\"' >> ~/.bashrc"]} languaje='bash'></CodeBlockInputCell>
				<p>Restaura la terminal</p>
				<CodeBlockInputCell text={["source ~/.bashrc"]} languaje='bash'></CodeBlockInputCell>
			</section>
	</section>

	<section>
		<h2>API KEY de OpenAI</h2>
		<p>Logueate en <a href="https://platform.openai.com/overview" target="_blank" rel="nofollow noreferrer">OpenAI</a> y obten tu api key</p>
		<figure>
			<img decoding="async" 
				src="images/openaix2.gif" 
				alt="open ai api key"
				width={images_width}
				height={images_height}
				loading="lazy"
			></img>
		</figure>
	</section>

	<section>
		<h2>Modo de uso</h2>
		<p>Puedes preguntar a alfred cualquier cosa escribiendo <span class="inline-code">alfred</span> seguido de la pregunta</p>
		<figure class="video-container">
			<video 
				preload="auto"
				autoplay
				muted
				loop
				width={images_width}
				height={images_height}
				<source src="videos/Alfred-command.webm" type="video/webm"/>
				<source src="videos/Alfred-command.mp4" type="video/mp4"/>
			></video>
		</figure>
		<p>O escribiendo <span class="inline-code">alfred</span>, dándole a intro Y quedarte haciéndole preguntas. Para salir escribe <span class="inline-code">exit</span></p>
		<figure class="video-container">
			<video 
				preload="auto"
				autoplay
				muted
				loop
				width={images_width}
				height={images_height}
				<source src="videos/Alfred-bucle.webm" type="video/webm"/>
				<source src="videos/Alfred-bucle.mp4" type="video/mp4"/>
			></video>
		</figure>
	</section>

	<section>
		<h2>Soporte</h2>
		<p>Si te ha gustado considera darle una estrella ⭐ al repositorio, pero si realmente te ha gustado considera invitarme a un café ☕.</p>
		<a href="https://www.buymeacoffee.com/maximofn" target="_blank" rel="nofollow noreferrer">
			<figure>
				<img decoding="async" 
					src="https://img.shields.io/badge/Invítame_a_un_café-Apoya_mi_trabajo-FFDD00?style=for-the-badge&logo=buy-me-a-coffee&logoColor=white&labelColor=101010" 
					alt="BuyMeACoffee"
					width={buyMeACoffee_width}
					height={buyMeACoffee_height}
					loading="lazy"
				></img>
			</figure>		
		</a>
	</section>

</Layout>

<style define:vars={{
	inline_code_background_color,
	sticky_top_default,
	sticky_top_649px,
	sticky_top_418px,
	sticky_top_334px,
	sticky_top_315px,
	sticky_top_229px,
	sticky_top_h3_increment,
}}>
	.inline-code {
		background-color: var(--inline_code_background_color);
		border-radius: 7px;
		padding: 0.2em 0.4em;
		font-style: oblique;
		font-family: 'Courier New', Courier, monospace;
	}

	section {
		position: relative;
	}

	h1 {
		margin-bottom: 0px;
	}

	h4 {
		padding-left: 0px;
	}
</style>
