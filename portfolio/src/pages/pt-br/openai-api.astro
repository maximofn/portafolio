---
import PostLayout from '@layouts/PostLayout.astro';
import CodeBlockInputCell from '@components/CodeBlockInputCell.astro';
import CodeBlockOutputCell from '@components/CodeBlockOutputCell.astro';

const { metadata_page } = await import('@portfolio/consts.json');
const { colors } = await import('@portfolio/consts.json');
const { svg_paths } = await import('@portfolio/consts.json');

const page_title = 'OpenAI API';
const end_url = 'openai-api';
const description = 'üöÄ Descubra o poder da API OpenAI neste post! üåü Aprenda como instalar a biblioteca OpenAI ‚ú® e eu vou gui√°-lo pelos primeiros passos para se tornar um guru da intelig√™ncia artificial. ü§ñ N√£o importa se voc√™ √© um iniciante curioso ou um especialista em codifica√ß√£o em busca de novas aventuras, este post tem tudo o que voc√™ precisa para come√ßar. Prepare-se para explorar o universo do GPT para gera√ß√£o de texto e DALL-E, an√°lise de imagens, tudo com um toque de divers√£o e muita inova√ß√£o! üéâüë©‚Äçüíª Mergulhe no emocionante mundo da IA e comece sua jornada para a criatividade ilimitada! üåàüíª';
const keywords = 'open ai api, open ai, openai, gpt api, gpt3 api, gpt4 api, gpt4o api, gpt, gpt3, gpt4, gpt4o';
const languaje = 'PT';
const image_path = 'https://pub-fb664c455eca46a2ba762a065ac900f7.r2.dev/openai.webp';
const opening_brace = '{';
const closing_brace = '}';
---

<PostLayout 
    title={page_title}
    languaje={languaje}
    description={description}
    keywords={keywords}
    author={metadata_page.author}
    theme_color={colors.background_color}
    end_url={end_url}
    image_path={image_path}
    image_width=4800
    image_height=3840
    image_extension=webp
    article_date=2023-12-06+T00:00:00Z
>

  <section class="post-body">


    <aside class="post-index">
      <a class="anchor-link" href="#Instale-a-biblioteca-OpenAI"><h2>Instale a biblioteca OpenAI</h2></a>
      <a class="anchor-link" href="#Importar-a-biblioteca-OpenAI"><h2>Importar a biblioteca OpenAI</h2></a>
      <a class="anchor-link" href="#Obter-uma-chave-de-API"><h2>Obter uma chave de API</h2></a>
      <a class="anchor-link" href="#Criamos-nosso-primeiro-chatbot"><h2>Criamos nosso primeiro chatbot</h2></a>
      <a class="anchor-link" href="#Par%C3%A2metros"><h3>Par√¢metros</h3></a>
      <a class="anchor-link" href="#Mensagens"><h4>Mensagens</h4></a>
      <a class="anchor-link" href="#Hist%C3%B3rico-de-conversas"><h5>Hist√≥rico de conversas</h5></a>
      <a class="anchor-link" href="#Condicionamento-por-exemplo"><h5>Condicionamento por exemplo</h5></a>
      <a class="anchor-link" href="#Condicionamento-com-mensagem-do-sistema"><h5>Condicionamento com mensagem do sistema</h5></a>
      <a class="anchor-link" href="#N%C3%BAmero-m%C3%A1ximo-de-tokens-de-resposta"><h4>N√∫mero m√°ximo de tokens de resposta</h4></a>
      <a class="anchor-link" href="#Criatividade-do-modelo-por-meio-da-temperatura"><h4>Criatividade do modelo por meio da temperatura</h4></a>
      <a class="anchor-link" href="#Criatividade-do-modelo-por-meio-do-top_p"><h4>Criatividade do modelo por meio do top_p</h4></a>
      <a class="anchor-link" href="#N%C3%BAmero-de-respostas"><h4>N√∫mero de respostas</h4></a>
      <a class="anchor-link" href="#Treinar-novamente-o-modelo-OpenAI"><h2>Treinar novamente o modelo OpenAI</h2></a>
      <a class="anchor-link" href="#Prepara%C3%A7%C3%A3o-de-dados"><h3>Prepara√ß√£o de dados</h3></a>
      <a class="anchor-link" href="#Valida%C3%A7%C3%A3o-de-dados"><h4>Valida√ß√£o de dados</h4></a>
      <a class="anchor-link" href="#C%C3%A1lculo-de-tokens"><h4>C√°lculo de tokens</h4></a>
      <a class="anchor-link" href="#C%C3%A1lculo-de-custos"><h4>C√°lculo de custos</h4></a>
      <a class="anchor-link" href="#Treinamento"><h3>Treinamento</h3></a>
      <a class="anchor-link" href="#Teste-de-modelo"><h3>Teste de modelo</h3></a>
      <a class="anchor-link" href="#Gerar-imagens-com-o-DALL-E-3"><h2>Gerar imagens com o DALL-E 3</h2></a>
      <a class="anchor-link" href="#Vis%C3%A3o"><h2>Vis√£o</h2></a>
      <a class="anchor-link" href="#Texto-para-fala"><h2>Texto para fala</h2></a>
      <a class="anchor-link" href="#Fala-para-texto-(sussurro)"><h2>Fala para texto (sussurro)</h2></a>
      <a class="anchor-link" href="#Modera%C3%A7%C3%A3o-de-conte%C3%BAdo"><h2>Modera√ß√£o de conte√∫do</h2></a>
      <a class="anchor-link" href="#Participantes"><h2>Participantes</h2></a>
      <a class="anchor-link" href="#Criar-o-assistente"><h3>Criar o assistente</h3></a>
      <a class="anchor-link" href="#T%C3%B3pico"><h3>T√≥pico</h3></a>
      <a class="anchor-link" href="#Fazer-upload-de-um-arquivo"><h3>Fazer upload de um arquivo</h3></a>
      <a class="anchor-link" href="#Enviar-uma-mensagem-para-o-assistente"><h3>Enviar uma mensagem para o assistente</h3></a>
      <a class="anchor-link" href="#Executar-o-assistente"><h3>Executar o assistente</h3></a>
      <a class="anchor-link" href="#Aguardar-a-conclus%C3%A3o-do-processamento"><h3>Aguardar a conclus√£o do processamento</h3></a>
      <a class="anchor-link" href="#Processar-a-resposta"><h3>Processar a resposta</h3></a>
    </aside>


    <div class="post-body-content">
      
      <section class="section-block-markdown-cell">
      <h1 id="API-da-OpenAI">API da OpenAI<a class="anchor-link" href="#API-da-OpenAI"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 68" src={svg_paths.link_svg_path}/></a></h1>
      </section>
      
      <section class="section-block-markdown-cell">
      <h2 id="Instale-a-biblioteca-OpenAI">Instale a biblioteca OpenAI<a class="anchor-link" href="#Instale-a-biblioteca-OpenAI"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 69" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Este caderno foi traduzido automaticamente para torn√°-lo acess√≠vel a mais pessoas, por favor me avise se voc√™ vir algum erro de digita√ß√£o..</p>
      <p>Em primeiro lugar, para usar a API OpenAI, √© necess√°rio instalar a biblioteca OpenAI. Para fazer isso, executamos o seguinte comando</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="o">%</span><span class="k">pip</span> install --upgrade openai',
        ]}
        languaje='python'
      ></CodeBlockInputCell>






      
      <section class="section-block-markdown-cell">
      <h2 id="Importar-a-biblioteca-OpenAI">Importar a biblioteca OpenAI<a class="anchor-link" href="#Importar-a-biblioteca-OpenAI"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 70" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Depois que a biblioteca √© instalada, n√≥s a importamos para us√°-la em nosso c√≥digo.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="o">%</span><span class="k">pip</span> install --upgrade openai',
      '<span></span><span class="kn">import</span> <span class="nn">openai</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>






      
      <section class="section-block-markdown-cell">
      <h2 id="Obter-uma-chave-de-API">Obter uma chave de API<a class="anchor-link" href="#Obter-uma-chave-de-API"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 71" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Para usar a API da OpenAI, √© necess√°rio obter uma chave de API. Para fazer isso, acesse a p√°gina [OpenAI] (<a href="https://openai.com/" target="_blank" rel="nofollow noreferrer">https://openai.com/</a>) e registre-se. Depois de registrado, v√° para a se√ß√£o <a href="https://platform.openai.com/api-keys">API Keys</a> e crie uma nova chave de API.</p>
      <p><img decoding="async" onerror="this.parentNode.removeChild(this)" alt="open ai api key" src="https://raw.githubusercontent.com/maximofn/alfred/main/gifs/openaix2.gif"/></p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Assim que a tivermos, informaremos √† API do openai qual √© a nossa chave de API.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="o">%</span><span class="k">pip</span> install --upgrade openai',
      '<span></span><span class="kn">import</span> <span class="nn">openai</span>',
      '<span></span><span class="n">api_key</span> <span class="o">=</span> <span class="s2">"Pon aqu√≠ tu API key"</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>






      
      <section class="section-block-markdown-cell">
      <h2 id="Criamos-nosso-primeiro-chatbot">Criamos nosso primeiro chatbot<a class="anchor-link" href="#Criamos-nosso-primeiro-chatbot"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 72" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Com a API OpenAI, √© muito f√°cil criar um chatbot simples, para o qual passaremos um prompt e ele retornar√° uma resposta</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Em primeiro lugar, temos que escolher o modelo que vamos usar. No meu caso, vou usar o modelo <code>gpt-3.5-turbo-1106</code>, que √© atualmente um bom modelo para esta postagem, porque para o que vamos fazer n√£o precisamos usar o melhor modelo. A OpenAI tem uma lista com todos os seus [modelos] (<a href="https://platform.openai.com/docs/models" target="_blank" rel="nofollow noreferrer">https://platform.openai.com/docs/models</a>) e uma p√°gina com os [pre√ßos] (<a href="https://openai.com/pricing">https://openai.com/pricing</a>)</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="o">%</span><span class="k">pip</span> install --upgrade openai',
      '<span></span><span class="kn">import</span> <span class="nn">openai</span>',
      '<span></span><span class="n">api_key</span> <span class="o">=</span> <span class="s2">"Pon aqu√≠ tu API key"</span>',
      '<span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">"gpt-3.5-turbo-1106"</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>






      
      <section class="section-block-markdown-cell">
      <p>Agora precisamos criar um cliente que se comunicar√° com a API da OpenAI.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="o">%</span><span class="k">pip</span> install --upgrade openai',
      '<span></span><span class="kn">import</span> <span class="nn">openai</span>',
      '<span></span><span class="n">api_key</span> <span class="o">=</span> <span class="s2">"Pon aqu√≠ tu API key"</span>',
      '<span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">"gpt-3.5-turbo-1106"</span>',
      '<span></span><span class="n">client</span> <span class="o">=</span> <span class="n">openai</span><span class="o">.</span><span class="n">OpenAI</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">,</span> <span class="n">organization</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>






      
      <section class="section-block-markdown-cell">
      <p>Como podemos ver, passamos nossa chave de API. Voc√™ tamb√©m pode passar a organiza√ß√£o, mas, no nosso caso, isso n√£o √© necess√°rio.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Criamos o prompt</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="o">%</span><span class="k">pip</span> install --upgrade openai',
      '<span></span><span class="kn">import</span> <span class="nn">openai</span>',
      '<span></span><span class="n">api_key</span> <span class="o">=</span> <span class="s2">"Pon aqu√≠ tu API key"</span>',
      '<span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">"gpt-3.5-turbo-1106"</span>',
      '<span></span><span class="n">client</span> <span class="o">=</span> <span class="n">openai</span><span class="o">.</span><span class="n">OpenAI</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">,</span> <span class="n">organization</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>',
      '<span></span><span class="n">promtp</span> <span class="o">=</span> <span class="s2">"Cu√°l es el mejor lenguaje de programaci√≥n para aprender?"</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>






      
      <section class="section-block-markdown-cell">
      <p>E agora podemos pedir uma resposta √† OpenAI.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="o">%</span><span class="k">pip</span> install --upgrade openai',
      '<span></span><span class="kn">import</span> <span class="nn">openai</span>',
      '<span></span><span class="n">api_key</span> <span class="o">=</span> <span class="s2">"Pon aqu√≠ tu API key"</span>',
      '<span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">"gpt-3.5-turbo-1106"</span>',
      '<span></span><span class="n">client</span> <span class="o">=</span> <span class="n">openai</span><span class="o">.</span><span class="n">OpenAI</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">,</span> <span class="n">organization</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>',
      '<span></span><span class="n">promtp</span> <span class="o">=</span> <span class="s2">"Cu√°l es el mejor lenguaje de programaci√≥n para aprender?"</span>',
      '<span></span><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
      '        <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>',
      '        <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">promtp</span><span class="si">}</span><span class="s2">"</span><span class="p">}],</span>',
      '      <span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>









      
      <section class="section-block-markdown-cell">
      <p>Vejamos como √© a resposta</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="o">%</span><span class="k">pip</span> install --upgrade openai',
          '</span><span class="kn">import</span> <span class="nn">openai</span>',
          '</span><span class="n">api_key</span> <span class="o">=</span> <span class="s2">"Pon aqu√≠ tu API key"</span>',
          '</span><span class="n">model</span> <span class="o">=</span> <span class="s2">"gpt-3.5-turbo-1106"</span>',
          '</span><span class="n">client</span> <span class="o">=</span> <span class="n">openai</span><span class="o">.</span><span class="n">OpenAI</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">,</span> <span class="n">organization</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>',
          '</span><span class="n">promtp</span> <span class="o">=</span> <span class="s2">"Cu√°l es el mejor lenguaje de programaci√≥n para aprender?"</span>',
          '</span><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>',
          '  <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">promtp</span><span class="si">}</span><span class="s2">"</span><span class="p">}],</span>',
          '<span class="p">)</span>',
          '</span><span class="nb">type</span><span class="p">(</span><span class="n">response</span><span class="p">),</span> <span class="n">response</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          '(openai.types.chat.chat_completion.ChatCompletion,',
          ' ChatCompletion(id=\'chatcmpl-8RaHCm9KalLxj2PPbLh6f8A4djG8Y\', choices=[Choice(finish_reason=\'stop\', index=0, message=ChatCompletionMessage(content=\'No hay un "mejor" lenguaje de programaci√≥n para aprender, ya que depende de tus intereses, objetivos y el tipo de desarrollo que te interese. Algunos lenguajes populares para empezar a aprender a programar incluyen Python, JavaScript, Java, C# y Ruby. Estos lenguajes son conocidos por su sintaxis clara y su versatilidad, lo que los hace buenos candidatos para principiantes. Tambi√©n es √∫til investigar qu√© lenguajes son populares en la industria en la que te gustar√≠a trabajar, ya que el conocimiento de un lenguaje en demanda puede abrirte m√°s oportunidades laborales. En resumen, la elecci√≥n del lenguaje de programaci√≥n para aprender depender√° de tus preferencias personales y de tus metas profesionales.\', role=\'assistant\', function_call=None, tool_calls=None))], created=1701584994, model=\'gpt-3.5-turbo-1106\', object=\'chat.completion\', system_fingerprint=\'fp_eeff13170a\', usage=CompletionUsage(completion_tokens=181, prompt_tokens=21, total_tokens=202)))',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.id = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.choices = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">)):</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.choices[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">] = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">response.choices[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].finish_reason = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">finish_reason</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">response.choices[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].index = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">response.choices[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].message = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'</span><span class="se">\n\t\t</span><span class="s1">\'</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.choices[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].message.content = </span><span class="se">\n\t\t</span><span class="si">{</span><span class="n">content</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.choices[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].message.role = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">role</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.choices[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].message.function_call = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">function_call</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.choices[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].message.tool_calls = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">tool_calls</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.created = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">created</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.model = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">model</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.object = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">object</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.system_fingerprint = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">system_fingerprint</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.usage = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">usage</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">response.usage.completion_tokens = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">usage</span><span class="o">.</span><span class="n">completion_tokens</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">response.usage.prompt_tokens = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">usage</span><span class="o">.</span><span class="n">prompt_tokens</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">response.usage.total_tokens = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">usage</span><span class="o">.</span><span class="n">total_tokens</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'response.id = chatcmpl-8RaHCm9KalLxj2PPbLh6f8A4djG8Y',
          'response.choices = [Choice(finish_reason=\'stop\', index=0, message=ChatCompletionMessage(content=\'No hay un "mejor" lenguaje de programaci√≥n para aprender, ya que depende de tus intereses, objetivos y el tipo de desarrollo que te interese. Algunos lenguajes populares para empezar a aprender a programar incluyen Python, JavaScript, Java, C# y Ruby. Estos lenguajes son conocidos por su sintaxis clara y su versatilidad, lo que los hace buenos candidatos para principiantes. Tambi√©n es √∫til investigar qu√© lenguajes son populares en la industria en la que te gustar√≠a trabajar, ya que el conocimiento de un lenguaje en demanda puede abrirte m√°s oportunidades laborales. En resumen, la elecci√≥n del lenguaje de programaci√≥n para aprender depender√° de tus preferencias personales y de tus metas profesionales.\', role=\'assistant\', function_call=None, tool_calls=None))]',
          'response.choices[0] = Choice(finish_reason=\'stop\', index=0, message=ChatCompletionMessage(content=\'No hay un "mejor" lenguaje de programaci√≥n para aprender, ya que depende de tus intereses, objetivos y el tipo de desarrollo que te interese. Algunos lenguajes populares para empezar a aprender a programar incluyen Python, JavaScript, Java, C# y Ruby. Estos lenguajes son conocidos por su sintaxis clara y su versatilidad, lo que los hace buenos candidatos para principiantes. Tambi√©n es √∫til investigar qu√© lenguajes son populares en la industria en la que te gustar√≠a trabajar, ya que el conocimiento de un lenguaje en demanda puede abrirte m√°s oportunidades laborales. En resumen, la elecci√≥n del lenguaje de programaci√≥n para aprender depender√° de tus preferencias personales y de tus metas profesionales.\', role=\'assistant\', function_call=None, tool_calls=None))',
          '	response.choices[0].finish_reason = stop',
          '	response.choices[0].index = 0',
          '	response.choices[0].message = ChatCompletionMessage(content=\'No hay un "mejor" lenguaje de programaci√≥n para aprender, ya que depende de tus intereses, objetivos y el tipo de desarrollo que te interese. Algunos lenguajes populares para empezar a aprender a programar incluyen Python, JavaScript, Java, C# y Ruby. Estos lenguajes son conocidos por su sintaxis clara y su versatilidad, lo que los hace buenos candidatos para principiantes. Tambi√©n es √∫til investigar qu√© lenguajes son populares en la industria en la que te gustar√≠a trabajar, ya que el conocimiento de un lenguaje en demanda puede abrirte m√°s oportunidades laborales. En resumen, la elecci√≥n del lenguaje de programaci√≥n para aprender depender√° de tus preferencias personales y de tus metas profesionales.\', role=\'assistant\', function_call=None, tool_calls=None)',
          '		response.choices[0].message.content = ',
          '		No hay un "mejor" lenguaje de programaci√≥n para aprender, ya que depende de tus intereses, objetivos y el tipo de desarrollo que te interese. Algunos lenguajes populares para empezar a aprender a programar incluyen Python, JavaScript, Java, C# y Ruby. Estos lenguajes son conocidos por su sintaxis clara y su versatilidad, lo que los hace buenos candidatos para principiantes. Tambi√©n es √∫til investigar qu√© lenguajes son populares en la industria en la que te gustar√≠a trabajar, ya que el conocimiento de un lenguaje en demanda puede abrirte m√°s oportunidades laborales. En resumen, la elecci√≥n del lenguaje de programaci√≥n para aprender depender√° de tus preferencias personales y de tus metas profesionales.',
          '		response.choices[0].message.role = assistant',
          '		response.choices[0].message.function_call = None',
          '		response.choices[0].message.tool_calls = None',
          'response.created = 1701584994',
          'response.model = gpt-3.5-turbo-1106',
          'response.object = chat.completion',
          'response.system_fingerprint = fp_eeff13170a',
          'response.usage = CompletionUsage(completion_tokens=181, prompt_tokens=21, total_tokens=202)',
          '	response.usage.completion_tokens = 181',
          '	response.usage.prompt_tokens = 21',
          '	response.usage.total_tokens = 202',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Como podemos ver, ele retorna muitas informa√ß√µes.</p>
      <p>Por exemplo, <code>response.choices[0].finish_reason = stop</code> significa que o modelo parou de gerar texto porque chegou ao final do prompt. Isso √© √∫til para depura√ß√£o, pois os valores poss√≠veis s√£o <code>stop</code>, que significa que a API retornou a mensagem completa, <code>length</code>, que significa que a sa√≠da do modelo estava incompleta porque era mais longa do que o <code>max_tokens</code> ou limite de token do modelo, <code>function_call</code>, o modelo decidiu chamar uma fun√ß√£o, <code>content_filter</code>, que significa que o conte√∫do foi ignorado devido a uma limita√ß√£o de conte√∫do da OpenAI e <code>null</code>, que significa que a resposta da API estava incompleta.</p>
      <p>Ele tamb√©m nos fornece informa√ß√µes sobre tokens para que possamos controlar o dinheiro gasto.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h3 id="Par%C3%A2metros">Par√¢metros<a class="anchor-link" href="#Par%C3%A2metros"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 73" src={svg_paths.link_svg_path}/></a></h3>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Ao solicitar uma resposta ao OpenAI, podemos passar uma s√©rie de par√¢metros para que ele retorne uma resposta mais alinhada com o que desejamos. Vamos ver quais s√£o os par√¢metros que podemos passar para o OpenAI</p>
      <ul>
      <li>Mensagens: lista de mensagens que foram enviadas para o chatbot.</li>
      <li><code>model</code>: Modelo que queremos usar</li>
      <li>frequency_penalty`: Penalidade de frequ√™ncia. Quanto maior o valor, menor a probabilidade de o modelo repetir a mesma resposta.</li>
      <li><code>max_tokens</code>: n√∫mero m√°ximo de tokens que podem ser retornados pelo modelo</li>
      <li>n`: N√∫mero de respostas que queremos que o modelo retorne.</li>
      <li>presence_penalty`: penalidade de presen√ßa. Quanto maior o valor, menor a probabilidade de o modelo repetir a mesma resposta.</li>
      <li><code>seed</code>: Semente para gera√ß√£o de texto</li>
      <li><code>stop</code>: lista de tokens que indicam que o modelo deve parar de gerar texto.</li>
      <li>If <code>stream</code>: Se <code>True</code>, a API retornar√° uma resposta sempre que o modelo gerar um token. Se <code>False</code>, a API retornar√° uma resposta quando o modelo tiver gerado todos os tokens.</li>
      <li><code>temperature</code>: quanto maior o valor, mais criativo ser√° o modelo.</li>
      <li><code>top_p</code>: quanto maior o valor, mais criativo √© o modelo.</li>
      <li><code>user</code>: ID do usu√°rio que est√° falando com o chatbot</li>
      <li><code>timeout</code>: tempo m√°ximo que queremos esperar para que a API retorne uma resposta.</li>
      </ul>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Vamos dar uma olhada em alguns deles</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h4 id="Mensagens">Mensagens<a class="anchor-link" href="#Mensagens"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 74" src={svg_paths.link_svg_path}/></a></h4>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Podemos passar uma lista de mensagens que foram enviadas ao chatbot para a API. Isso √© √∫til para passar o hist√≥rico da conversa para o chatbot, para que ele possa gerar uma resposta mais adequada √† conversa. E para condicionar a resposta do chatbot ao que lhe foi dito anteriormente.</p>
      <p>Al√©m disso, podemos passar uma mensagem do sistema para informar como ele deve se comportar.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h5 id="Hist%C3%B3rico-de-conversas">Hist√≥rico de conversas<a class="anchor-link" href="#Hist%C3%B3rico-de-conversas"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 75" src={svg_paths.link_svg_path}/></a></h5>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Vejamos um exemplo do hisotrial de conversas, primeiro perguntamos como ele est√°.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">promtp</span> <span class="o">=</span> <span class="s2">"Hola, soy MaximoFN, ¬øC√≥mo est√°s?"</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>',
          '  <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">promtp</span><span class="si">}</span><span class="s2">"</span><span class="p">}],</span>',
          '<span class="p">)</span>',
          '<span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'</span><span class="se">\n\t\t</span><span class="s1">\'</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Hola MaximoFN, soy un modelo de inteligencia artificial dise√±ado para conversar y ayudar en lo que necesites. ¬øEn qu√© puedo ayudarte hoy?',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Ele respondeu que n√£o tem sentimentos e como pode nos ajudar. Portanto, se eu lhe perguntar qual √© o meu nome agora, ele n√£o saber√° como me responder.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">promtp</span> <span class="o">=</span> <span class="s2">"¬øMe puedes decir c√≥mo me llamo?"</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>',
          '  <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">promtp</span><span class="si">}</span><span class="s2">"</span><span class="p">}],</span>',
          '<span class="p">)</span>',
          '<span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'</span><span class="se">\n\t\t</span><span class="s1">\'</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Lo siento, no tengo esa informaci√≥n. Pero puedes dec√≠rmelo t√∫.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Para corrigir isso, passamos o hist√≥rico da conversa para voc√™</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">promtp</span> <span class="o">=</span> <span class="s2">"¬øMe puedes decir c√≥mo me llamo?"</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>',
          '  <span class="n">messages</span><span class="o">=</span><span class="p">[</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"Hola, soy MaximoFN, ¬øC√≥mo est√°s?"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"assistant"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"Hola MaximoFN, soy un modelo de inteligencia artificial dise√±ado para conversar y ayudar en lo que necesites. ¬øEn qu√© puedo ayudarte hoy?"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">promtp</span><span class="si">}</span><span class="s2">"</span><span class="p">},</span>',
          '  <span class="p">],</span>',
          '<span class="p">)</span>',
          '<span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'</span><span class="se">\n\t\t</span><span class="s1">\'</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Tu nombre es MaximoFN.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <h5 id="Condicionamento-por-exemplo">Condicionamento por exemplo<a class="anchor-link" href="#Condicionamento-por-exemplo"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 76" src={svg_paths.link_svg_path}/></a></h5>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Agora vamos dar uma olhada em um exemplo de como condicionar a resposta do chatbot ao que foi dito acima. Agora perguntamos a ele como obter a lista de arquivos em um diret√≥rio no terminal</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">promtp</span> <span class="o">=</span> <span class="s2">"¬øC√≥mo puedo listar los archivos de un directorio en la terminal?"</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>',
          '  <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">promtp</span><span class="si">}</span><span class="s2">"</span><span class="p">}],</span>',
          '<span class="p">)</span>',
          '<span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'</span><span class="se">\n\t\t</span><span class="s1">\'</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'En la terminal de un sistema operativo Unix o Linux, puedes listar los archivos de un directorio utilizando el comando `ls`. Por ejemplo, si quieres listar los archivos del directorio actual, simplemente escribe `ls` y presiona Enter. Si deseas listar los archivos de un directorio espec√≠fico, puedes proporcionar la ruta del directorio despu√©s del comando `ls`, por ejemplo `ls /ruta/del/directorio`. Si deseas ver m√°s detalles sobre los archivos, puedes usar la opci√≥n `-l` para obtener una lista detallada o `-a` para mostrar tambi√©n los archivos ocultos.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Se agora o condicionarmos com exemplos de respostas curtas, vamos ver o que ele responde.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">promtp</span> <span class="o">=</span> <span class="s2">"¬øC√≥mo puedo listar los archivos de un directorio en la terminal?"</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>',
          '  <span class="n">messages</span><span class="o">=</span><span class="p">[</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"Obtener las 10 primeras l√≠neas de un archivo"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"assistant"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"head -n 10"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"Encontrar todos los archivos con extensi√≥n .txt"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"assistant"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"find . -name \'*.txt"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"Dividir un archivo en varias p√°ginas"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"assistant"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"split -l 1000"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"Buscar la direcci√≥n IP 12.34.56.78"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"assistant"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"nslookup 12.34.56.78"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"Obtener las 5 √∫ltimas l√≠neas de foo.txt"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"assistant"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"tail -n 5 foo.txt"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"Convertir ejemplo.png en JPEG"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"assistant"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"convert example.png example.jpg"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"Create a git branch named \'new-feature"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"assistant"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"git branch new-feature"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">promtp</span><span class="si">}</span><span class="s2">"</span><span class="p">},</span>',
          '  <span class="p">],</span>',
          '<span class="p">)</span>',
          '<span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'</span><span class="se">\n\t\t</span><span class="s1">\'</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Puede usar el comando `ls` en la terminal para listar los archivos de un directorio. Por ejemplo:',
          '```',
          'ls',
          '```',
          'Muestra los archivos y directorios en el directorio actual.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Conseguimos fazer com que ele d√™ uma resposta mais curta</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h5 id="Condicionamento-com-mensagem-do-sistema">Condicionamento com mensagem do sistema<a class="anchor-link" href="#Condicionamento-com-mensagem-do-sistema"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 77" src={svg_paths.link_svg_path}/></a></h5>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Podemos lhe passar uma mensagem do sistema para lhe dizer como se comportar.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">promtp</span> <span class="o">=</span> <span class="s2">"¬øC√≥mo puedo listar los archivos de un directorio en la terminal?"</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>',
          '  <span class="n">messages</span><span class="o">=</span><span class="p">[</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"system"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"Eres un experto asistente de terminal de ubuntu que responde solo con comandos de terminal"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">promtp</span><span class="si">}</span><span class="s2">"</span><span class="p">},</span>',
          '  <span class="p">],</span>',
          '<span class="p">)</span>',
          '<span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'</span><span class="se">\n\t\t</span><span class="s1">\'</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Puedes listar los archivos de un directorio en la terminal usando el comando `ls`. Por ejemplo, para listar los archivos del directorio actual, simplemente escribe `ls` y presiona Enter. Si quieres listar los archivos de un directorio espec√≠fico, puedes utilizar `ls` seguido de la ruta del directorio. Por ejemplo, `ls /ruta/del/directorio`.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">promtp</span> <span class="o">=</span> <span class="s2">"¬øC√≥mo puedo listar los archivos de un directorio en la terminal?"</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>',
          '  <span class="n">messages</span><span class="o">=</span><span class="p">[</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"system"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"Eres un experto asistente de terminal de ubuntu que responde solo con comandos de terminal"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"Obtener las 10 primeras l√≠neas de un archivo"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"assistant"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"head -n 10"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"Encontrar todos los archivos con extensi√≥n .txt"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"assistant"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"find . -name \'*.txt"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"Dividir un archivo en varias p√°ginas"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"assistant"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"split -l 1000"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"Buscar la direcci√≥n IP 12.34.56.78"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"assistant"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"nslookup 12.34.56.78"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"Obtener las 5 √∫ltimas l√≠neas de foo.txt"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"assistant"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"tail -n 5 foo.txt"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"Convertir ejemplo.png en JPEG"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"assistant"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"convert example.png example.jpg"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"Create a git branch named \'new-feature"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"assistant"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"git branch new-feature"</span><span class="p">},</span>',
          '      <span class="p">{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">promtp</span><span class="si">}</span><span class="s2">"</span><span class="p">},</span>',
          '  <span class="p">],</span>',
          '<span class="p">)</span>',
          '<span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'</span><span class="se">\n\t\t</span><span class="s1">\'</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Puedes listar los archivos de un directorio en la terminal utilizando el comando "ls". Por ejemplo, para listar los archivos en el directorio actual, puedes ejecutar el comando "ls". Si deseas listar los archivos de otro directorio, simplemente especifica el directorio despu√©s del comando "ls", por ejemplo "ls /ruta/al/directorio".',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <h4 id="N%C3%BAmero-m%C3%A1ximo-de-tokens-de-resposta">N√∫mero m√°ximo de tokens de resposta<a class="anchor-link" href="#N%C3%BAmero-m%C3%A1ximo-de-tokens-de-resposta"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 78" src={svg_paths.link_svg_path}/></a></h4>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Podemos limitar o n√∫mero de tokens que o modelo pode retornar. Isso √© √∫til para que o modelo n√£o ultrapasse a resposta que desejamos.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">promtp</span> <span class="o">=</span> <span class="s2">"¬øCu√°l es el mejor lenguaje de programaci√≥n para aprender?"</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="p">,</span>',
          '  <span class="n">messages</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">promtp</span><span class="si">}</span><span class="s2">"</span><span class="p">}],</span>',
          '  <span class="n">max_tokens</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span>',
          '<span class="p">)</span>',
          '',
          '<span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'</span><span class="se">\n\t\t</span><span class="s1">\'</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\n</span><span class="s2">response.choices[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].finish_reason = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">finish_reason</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'La respuesta a esta pregunta puede variar dependiendo de los intereses y objetivos individuales, ya que cada lenguaje de programaci√≥n tiene sus propias ventajas y desventajas. Sin embargo, algunos de los lenguajes m√°s',
          'response.choices[0].finish_reason = length',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Como podemos ver, a resposta √© cortada na metade porque excederia o limite de tokens. Al√©m disso, agora o motivo de parada √© <code>length</code> em vez de <code>stop</code>.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h4 id="Criatividade-do-modelo-por-meio-da-temperatura">Criatividade do modelo por meio da temperatura<a class="anchor-link" href="#Criatividade-do-modelo-por-meio-da-temperatura"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 79" src={svg_paths.link_svg_path}/></a></h4>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Podemos tornar o modelo mais criativo por meio da temperatura. Quanto mais alto for o valor, mais criativo ser√° o modelo.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">promtp</span> <span class="o">=</span> <span class="s2">"¬øCu√°l es el mejor lenguaje de programaci√≥n para aprender?"</span>',
          '<span class="n">temperature</span> <span class="o">=</span> <span class="mi">0</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="p">,</span>',
          '  <span class="n">messages</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">promtp</span><span class="si">}</span><span class="s2">"</span><span class="p">}],</span>',
          '  <span class="n">temperature</span> <span class="o">=</span> <span class="n">temperature</span><span class="p">,</span>',
          '<span class="p">)</span>',
          '',
          '<span class="n">content_0</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'</span><span class="se">\n\t\t</span><span class="s1">\'</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="n">content_0</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'No hay un "mejor" lenguaje de programaci√≥n para aprender, ya que la elecci√≥n depende de los intereses y objetivos individuales. Algunos lenguajes populares para principiantes incluyen Python, JavaScript, Java y C#. Cada uno tiene sus propias ventajas y desventajas, por lo que es importante investigar y considerar qu√© tipo de desarrollo de software te interesa antes de elegir un lenguaje para aprender.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">promtp</span> <span class="o">=</span> <span class="s2">"¬øCu√°l es el mejor lenguaje de programaci√≥n para aprender?"</span>',
          '<span class="n">temperature</span> <span class="o">=</span> <span class="mi">1</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="p">,</span>',
          '  <span class="n">messages</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">promtp</span><span class="si">}</span><span class="s2">"</span><span class="p">}],</span>',
          '  <span class="n">temperature</span> <span class="o">=</span> <span class="n">temperature</span><span class="p">,</span>',
          '<span class="p">)</span>',
          '',
          '<span class="n">content_1</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'</span><span class="se">\n\t\t</span><span class="s1">\'</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="n">content_1</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'No hay un "mejor" lenguaje de programaci√≥n para aprender, ya que la elecci√≥n depende de los objetivos y preferencias individuales del programador. Sin embargo, algunos lenguajes populares para principiantes incluyen Python, JavaScript, Java y C++. Estos lenguajes son relativamente f√°ciles de aprender y tienen una amplia gama de aplicaciones en la industria de la tecnolog√≠a. Es importante considerar qu√© tipo de proyectos o campos de inter√©s te gustar√≠a explorar al momento de elegir un lenguaje de programaci√≥n para aprender.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="nb">print</span><span class="p">(</span><span class="n">content_0</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="n">content_1</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'No hay un "mejor" lenguaje de programaci√≥n para aprender, ya que la elecci√≥n depende de los intereses y objetivos individuales. Algunos lenguajes populares para principiantes incluyen Python, JavaScript, Java y C#. Cada uno tiene sus propias ventajas y desventajas, por lo que es importante investigar y considerar qu√© tipo de desarrollo de software te interesa antes de elegir un lenguaje para aprender.',
          'No hay un "mejor" lenguaje de programaci√≥n para aprender, ya que la elecci√≥n depende de los objetivos y preferencias individuales del programador. Sin embargo, algunos lenguajes populares para principiantes incluyen Python, JavaScript, Java y C++. Estos lenguajes son relativamente f√°ciles de aprender y tienen una amplia gama de aplicaciones en la industria de la tecnolog√≠a. Es importante considerar qu√© tipo de proyectos o campos de inter√©s te gustar√≠a explorar al momento de elegir un lenguaje de programaci√≥n para aprender.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <h4 id="Criatividade-do-modelo-por-meio-do-top_p">Criatividade do modelo por meio do top_p<a class="anchor-link" href="#Criatividade-do-modelo-por-meio-do-top_p"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 80" src={svg_paths.link_svg_path}/></a></h4>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Podemos tornar o modelo mais criativo usando o par√¢metro <code>top_p</code>. Quanto maior o valor, mais criativo ser√° o modelo.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">promtp</span> <span class="o">=</span> <span class="s2">"¬øCu√°l es el mejor lenguaje de programaci√≥n para aprender?"</span>',
          '<span class="n">top_p</span> <span class="o">=</span> <span class="mi">0</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="p">,</span>',
          '  <span class="n">messages</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">promtp</span><span class="si">}</span><span class="s2">"</span><span class="p">}],</span>',
          '  <span class="n">top_p</span> <span class="o">=</span> <span class="n">top_p</span><span class="p">,</span>',
          '<span class="p">)</span>',
          '',
          '<span class="n">content_0</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'</span><span class="se">\n\t\t</span><span class="s1">\'</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="n">content_0</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'No hay un "mejor" lenguaje de programaci√≥n para aprender, ya que la elecci√≥n depende de los intereses y objetivos individuales. Algunos lenguajes populares para principiantes incluyen Python, JavaScript, Java y C#. Cada uno tiene sus propias ventajas y desventajas, por lo que es importante investigar y considerar qu√© tipo de desarrollo de software te interesa antes de elegir un lenguaje para aprender.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">promtp</span> <span class="o">=</span> <span class="s2">"¬øCu√°l es el mejor lenguaje de programaci√≥n para aprender?"</span>',
          '<span class="n">top_p</span> <span class="o">=</span> <span class="mi">1</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="p">,</span>',
          '  <span class="n">messages</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">promtp</span><span class="si">}</span><span class="s2">"</span><span class="p">}],</span>',
          '  <span class="n">top_p</span> <span class="o">=</span> <span class="n">top_p</span><span class="p">,</span>',
          '<span class="p">)</span>',
          '',
          '<span class="n">content_1</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'</span><span class="se">\n\t\t</span><span class="s1">\'</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="n">content_1</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'El mejor lenguaje de programaci√≥n para aprender depende de los objetivos del aprendizaje y del tipo de programaci√≥n que se quiera realizar. Algunos lenguajes de programaci√≥n populares para principiantes incluyen Python, Java, JavaScript y Ruby. Sin embargo, cada lenguaje tiene sus propias ventajas y desventajas, por lo que es importante considerar qu√© tipo de proyectos o aplicaciones se quieren desarrollar antes de elegir un lenguaje de programaci√≥n para aprender. Python es a menudo recomendado por su facilidad de uso y versatilidad, mientras que JavaScript es ideal para la programaci√≥n web.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="nb">print</span><span class="p">(</span><span class="n">content_0</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="n">content_1</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'No hay un "mejor" lenguaje de programaci√≥n para aprender, ya que la elecci√≥n depende de los intereses y objetivos individuales. Algunos lenguajes populares para principiantes incluyen Python, JavaScript, Java y C#. Cada uno tiene sus propias ventajas y desventajas, por lo que es importante investigar y considerar qu√© tipo de desarrollo de software te interesa antes de elegir un lenguaje para aprender.',
          'El mejor lenguaje de programaci√≥n para aprender depende de los objetivos del aprendizaje y del tipo de programaci√≥n que se quiera realizar. Algunos lenguajes de programaci√≥n populares para principiantes incluyen Python, Java, JavaScript y Ruby. Sin embargo, cada lenguaje tiene sus propias ventajas y desventajas, por lo que es importante considerar qu√© tipo de proyectos o aplicaciones se quieren desarrollar antes de elegir un lenguaje de programaci√≥n para aprender. Python es a menudo recomendado por su facilidad de uso y versatilidad, mientras que JavaScript es ideal para la programaci√≥n web.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <h4 id="N%C3%BAmero-de-respostas">N√∫mero de respostas<a class="anchor-link" href="#N%C3%BAmero-de-respostas"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 81" src={svg_paths.link_svg_path}/></a></h4>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Podemos solicitar √† API que retorne mais de uma resposta. Isso √© √∫til para que o modelo retorne v√°rias respostas para que possamos escolher a que mais nos agrada. Para isso, definiremos os par√¢metros <code>temperature</code> e <code>top_p</code> como 1 para tornar o modelo mais criativo.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">promtp</span> <span class="o">=</span> <span class="s2">"¬øCu√°l es el mejor lenguaje de programaci√≥n para aprender?"</span>',
          '<span class="n">temperature</span> <span class="o">=</span> <span class="mi">1</span>',
          '<span class="n">top_p</span> <span class="o">=</span> <span class="mi">1</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="p">,</span>',
          '  <span class="n">messages</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">promtp</span><span class="si">}</span><span class="s2">"</span><span class="p">}],</span>',
          '  <span class="n">temperature</span> <span class="o">=</span> <span class="n">temperature</span><span class="p">,</span>',
          '  <span class="n">top_p</span> <span class="o">=</span> <span class="n">top_p</span><span class="p">,</span>',
          '  <span class="n">n</span> <span class="o">=</span> <span class="mi">4</span>',
          '<span class="p">)</span>',
          '',
          '<span class="n">content_0</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'</span><span class="se">\n\t\t</span><span class="s1">\'</span><span class="p">)</span>',
          '<span class="n">content_1</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'</span><span class="se">\n\t\t</span><span class="s1">\'</span><span class="p">)</span>',
          '<span class="n">content_2</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'</span><span class="se">\n\t\t</span><span class="s1">\'</span><span class="p">)</span>',
          '<span class="n">content_3</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'</span><span class="se">\n\t\t</span><span class="s1">\'</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="n">content_0</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="n">content_1</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="n">content_2</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="n">content_3</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'El mejor lenguaje de programaci√≥n para aprender depende de tus objetivos y del tipo de aplicaciones que te interese desarrollar. Algunos de los lenguajes m√°s populares para aprender son:',
          '		1. Python: Es un lenguaje de programaci√≥n vers√°til, f√°cil de aprender y con una amplia comunidad de desarrolladores. Es ideal para principiantes y se utiliza en una gran variedad de aplicaciones, desde desarrollo web hasta inteligencia artificial.',
          '		2. JavaScript: Es el lenguaje de programaci√≥n m√°s utilizado en el desarrollo web. Es imprescindible para aquellos que quieren trabajar en el √°mbito del desarrollo frontend y backend.',
          '		3. Java: Es un lenguaje de programaci√≥n muy popular en el √°mbito empresarial, por lo que aprender Java puede abrirte muchas puertas laborales. Adem√°s, es un lenguaje estructurado que te ense√±ar√° conceptos importantes de la programaci√≥n orientada a objetos.',
          '		4. C#: Es un lenguaje de programaci√≥n desarrollado por Microsoft que se utiliza especialmente en el desarrollo de aplicaciones para Windows. Es ideal para aquellos que quieran enfocarse en el desarrollo de aplicaciones de escritorio.',
          '		En resumen, el mejor lenguaje de programaci√≥n para aprender depende de tus intereses y objetivos personales. Es importante investigar y considerar qu√© tipos de aplicaciones te gustar√≠a desarrollar para elegir el lenguaje que m√°s se adapte a tus necesidades.',
          'El mejor lenguaje de programaci√≥n para aprender depende de los objetivos y necesidades individuales. Algunos de los lenguajes de programaci√≥n m√°s populares y ampliamente utilizados incluyen Python, JavaScript, Java, C++, Ruby y muchos otros. Python es a menudo recomendado para principiantes debido a su sintaxis simple y legible, mientras que JavaScript es esencial para el desarrollo web. Java es ampliamente utilizado en el desarrollo de aplicaciones empresariales y Android, y C++ es com√∫nmente utilizado en sistemas embebidos y juegos. En √∫ltima instancia, el mejor lenguaje de programaci√≥n para aprender depender√° de lo que quiera lograr con su habilidades de programaci√≥n.',
          'El mejor lenguaje de programaci√≥n para aprender depende de los intereses y objetivos individuales de cada persona. Algunos de los lenguajes m√°s populares y bien documentados para principiantes incluyen Python, JavaScript, Java y C#. Python es conocido por su simplicidad y versatilidad, mientras que JavaScript es esencial para el desarrollo web. Java y C# son lenguajes ampliamente utilizados en la industria y proporcionan una base s√≥lida para aprender otros lenguajes. En √∫ltima instancia, la elecci√≥n del lenguaje depender√° de las metas personales y la aplicaci√≥n deseada.',
          'El mejor lenguaje de programaci√≥n para aprender depende de los intereses y objetivos de cada persona. Algunos lenguajes populares para principiantes incluyen Python, Java, JavaScript, C++ y Ruby. Python es frecuentemente recomendado para aprender a programar debido a su sintaxis sencilla y legible, mientras que Java es utilizado en aplicaciones empresariales y Android. JavaScript es fundamental para el desarrollo web, y C++ es com√∫nmente utilizado en aplicaciones de alto rendimiento. Ruby es conocido por su facilidad de uso y flexibilidad. En √∫ltima instancia, la elecci√≥n del lenguaje depender√° de qu√© tipo de desarrollo te interesa y qu√© tipo de proyectos deseas realizar.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <h2 id="Treinar-novamente-o-modelo-OpenAI">Treinar novamente o modelo OpenAI<a class="anchor-link" href="#Treinar-novamente-o-modelo-OpenAI"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 82" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>A OpenAI oferece a possibilidade de treinar novamente seus modelos de API para obter melhores resultados em nossos pr√≥prios dados. Isso tem as seguintes vantagens</p>
      <ul>
      <li>Resultados de maior qualidade s√£o obtidos para nossos dados.</li>
      <li>Em um prompt, podemos dar a ele exemplos para que se comporte como queremos, mas apenas alguns. Dessa forma, ao trein√°-lo novamente, podemos lhe dar muitos outros.</li>
      <li>Economia de tokens devido a prompts mais curtos. Como j√° o treinamos para o nosso caso de uso, podemos dar a ele menos solicita√ß√µes para resolver nossas tarefas.</li>
      <li>Menor lat√™ncia de solicita√ß√µes. Ao chamar os pr√≥prios modelos, teremos menos lat√™ncia</li>
      </ul>
      </section>
      
      <section class="section-block-markdown-cell">
      <h3 id="Prepara%C3%A7%C3%A3o-de-dados">Prepara√ß√£o de dados<a class="anchor-link" href="#Prepara%C3%A7%C3%A3o-de-dados"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 83" src={svg_paths.link_svg_path}/></a></h3>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>A API da OpenAI nos pede para fornecer os dados em um arquivo <code>jsonl</code> no seguinte formato</p>
      <div class="highlight"><pre><span></span><span class="p">{opening_brace}</span>
      <span class="w">    </span><span class="nt">"mensagens"</span><span class="p">:</span>
      <span class="w">    </span><span class="p">[</span>
      <span class="w">        </span><span class="p">{opening_brace}</span>
      <span class="w">            </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"system"</span><span class="p">,</span><span class="w"> </span><span class="nt">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Marv √© um chatbot factual que tamb√©m √© sarc√°stico"</span><span class="err">.</span>
      <span class="w">        </span><span class="p">{closing_brace},</span>
      <span class="w">        </span><span class="p">{opening_brace}</span>
      <span class="w">            </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w"> </span><span class="nt">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"What's the capital of France?"</span><span class="w"> </span><span class="err">(Qual</span><span class="w"> </span><span class="err">√©</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">capi</span><span class="kc">tal</span><span class="w"> </span><span class="err">da</span><span class="w"> </span><span class="err">Fra</span><span class="kc">n</span><span class="err">√ßa?)</span>
      <span class="w">        </span><span class="p">{closing_brace},</span>
      <span class="w">        </span><span class="p">{opening_brace}</span>
      <span class="w">            </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"assistant"</span><span class="p">,</span><span class="w"> </span><span class="nt">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Paris, como se todo mundo j√° n√£o soubesse disso"</span><span class="err">.</span>
      <span class="w">        </span><span class="p">{closing_brace}</span>
      
      <span class="p">{closing_brace}</span>
      <span class="p">{opening_brace}</span>
      <span class="w">    </span><span class="nt">"mensagens"</span><span class="p">:</span>
      <span class="w">    </span><span class="p">[</span>
      <span class="w">        </span><span class="p">{opening_brace}</span>
      <span class="w">            </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"system"</span><span class="p">,</span><span class="w"> </span><span class="nt">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Marv √© um chatbot factual que tamb√©m √© sarc√°stico"</span><span class="err">.</span>
      <span class="w">        </span><span class="p">{closing_brace},</span>
      <span class="w">        </span><span class="p">{opening_brace}</span>
      <span class="w">            </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w"> </span><span class="nt">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Who wrote 'Romeo and Juliet'?"</span><span class="w"> </span><span class="err">(Quem</span><span class="w"> </span><span class="err">escreveu</span><span class="w"> </span><span class="err">'Romeu</span><span class="w"> </span><span class="err">e</span><span class="w"> </span><span class="err">Julie</span><span class="kc">ta</span><span class="err">'?)</span>
      <span class="w">        </span><span class="p">{closing_brace},</span>
      <span class="w">        </span><span class="p">{opening_brace}</span>
      <span class="w">            </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"assistant"</span><span class="p">,</span><span class="w"> </span><span class="nt">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Oh, apenas um cara chamado William Shakespeare. J√° ouviu falar dele?"</span>
      <span class="w">        </span><span class="p">{closing_brace}</span>
      
      <span class="p">{closing_brace}</span>
      <span class="p">{opening_brace}</span>
      <span class="w">    </span><span class="nt">"mensagens"</span><span class="p">:</span>
      <span class="w">    </span><span class="p">[</span>
      <span class="w">        </span><span class="p">{opening_brace}</span>
      <span class="w">            </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"system"</span><span class="p">,</span><span class="w"> </span><span class="nt">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Marv √© um chatbot factual que tamb√©m √© sarc√°stico"</span><span class="err">.</span>
      <span class="w">        </span><span class="p">{closing_brace},</span>
      <span class="w">        </span><span class="p">{opening_brace}</span>
      <span class="w">            </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w"> </span><span class="nt">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"How far is the Moon from Earth?"</span><span class="w"> </span><span class="err">(A</span><span class="w"> </span><span class="err">que</span><span class="w"> </span><span class="err">dis</span><span class="kc">t</span><span class="err">√¢</span><span class="kc">n</span><span class="err">cia</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">Lua</span><span class="w"> </span><span class="err">es</span><span class="kc">t</span><span class="err">√°</span><span class="w"> </span><span class="err">da</span><span class="w"> </span><span class="err">Terra?)</span>
      <span class="w">        </span><span class="p">{closing_brace},</span>
      <span class="w">        </span><span class="p">{opening_brace}</span>
      <span class="w">            </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"assistant"</span><span class="p">,</span><span class="w"> </span><span class="nt">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cerca de 384.400 quil√¥metros. Mais ou menos alguns, como se isso realmente importasse"</span><span class="err">.</span>
      <span class="w">        </span><span class="p">{closing_brace}</span>
      
      <span class="p">{closing_brace}</span>
      </pre></div>
      <p>Com um m√°ximo de 4096 tokens</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h4 id="Valida%C3%A7%C3%A3o-de-dados">Valida√ß√£o de dados<a class="anchor-link" href="#Valida%C3%A7%C3%A3o-de-dados"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 84" src={svg_paths.link_svg_path}/></a></h4>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Para poupar meu trabalho, tenho passado uma a uma todas as minhas postagens para o chatgpt e disse a ele para gerar 10 <code>FAQ</code>s para cada uma no formato <code>CSV</code>, pois duvidava que ele fosse capaz de gerar um formato como o solicitado no <code>jsonl</code>. E ele gerou um <code>CSV</code> com o seguinte formato para cada post</p>
      <pre><code class="language-csv">csv
      prompt,conclus√£o
      O que o curso Introduction to Python aborda no material fornecido? "O curso Introduction to Python aborda t√≥picos como tipos de dados, operadores, uso de fun√ß√µes e classes, manipula√ß√£o de objetos iter√°veis e uso de m√≥dulos. [Mais informa√ß√µes] (https://maximofn.com/python/)"
      Quais s√£o os tipos de dados b√°sicos em Python, "Python tem 7 tipos de dados b√°sicos: texto (`str`), num√©rico (`int`, `float`, `complex`), sequ√™ncias (`list`, `tuple`, `range`), mapeamento (`dict`), conjuntos (`set`, `frozenset`), booleano (`bool`) e bin√°rio (`bytes`, `bytearray`, `memoryview`). [Mais informa√ß√µes] (https://maximofn.com/python/)"
      O que s√£o operadores em Python e como eles s√£o usados, "Operadores em Python s√£o s√≠mbolos especiais usados para realizar opera√ß√µes como adi√ß√£o, subtra√ß√£o, multiplica√ß√£o e divis√£o entre vari√°veis e valores. Eles tamb√©m incluem operadores l√≥gicos para compara√ß√µes. [Mais informa√ß√µes] (https://maximofn.com/python/)"
      Como uma fun√ß√£o √© definida e usada em Python, "Em Python, uma fun√ß√£o √© definida com a palavra-chave `def`, seguida do nome da fun√ß√£o e de par√™nteses. As fun√ß√µes podem ter par√¢metros e valores de retorno. Elas s√£o usadas para encapsular a l√≥gica que pode ser reutilizada em todo o c√≥digo. [Mais informa√ß√µes] (https://maximofn.com/python/)"
      O que s√£o classes Python e como elas s√£o usadas?, "As classes Python s√£o a base da programa√ß√£o orientada a objetos. Elas permitem que voc√™ crie objetos que encapsulam dados e funcionalidades. As classes s√£o definidas com a palavra-chave `class`, seguida pelo nome da classe. [Mais informa√ß√µes] (https://maximofn.com/python/)"
      ...</code></pre>
      <p>Cada <code>CSV</code> tem 10 <code>FAQ</code>s</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Criarei um c√≥digo que pega cada <code>CSV</code> e gera dois novos <code>jsonl</code>s, um para treinamento e outro para valida√ß√£o.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="kn">import</span> <span class="nn">os</span>',
      '      ',
      '      <span class="n">CSVs_path</span> <span class="o">=</span> <span class="s2">"openai/faqs_posts"</span>',
      '      <span class="n">percetn_train</span> <span class="o">=</span> <span class="mf">0.8</span>',
      '      <span class="n">percetn_validation</span> <span class="o">=</span> <span class="mf">0.2</span>',
      '      ',
      '      <span class="n">jsonl_train</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CSVs_path</span><span class="p">,</span> <span class="s2">"train.jsonl"</span><span class="p">)</span>',
      '      <span class="n">jsonl_validation</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CSVs_path</span><span class="p">,</span> <span class="s2">"validation.jsonl"</span><span class="p">)</span>',
      '      ',
      '      <span class="c1"># Create the train.jsonl and validation.jsonl files</span>',
      '      <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">jsonl_train</span><span class="p">,</span> <span class="s1">\'w\'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>',
      '          <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">\'\'</span><span class="p">)</span>',
      '      <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">jsonl_validation</span><span class="p">,</span> <span class="s1">\'w\'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>',
      '          <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">\'\'</span><span class="p">)</span>',
      '      ',
      '      <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">CSVs_path</span><span class="p">):</span>  <span class="c1"># Get all files in the directory</span>',
      '          <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".csv"</span><span class="p">):</span>    <span class="c1"># Check if file is a csv</span>',
      '              <span class="n">csv</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CSVs_path</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span> <span class="c1"># Get the path to the csv file</span>',
      '              <span class="n">number_of_lines</span> <span class="o">=</span> <span class="mi">0</span>',
      '              <span class="n">csv_content</span> <span class="o">=</span> <span class="p">[]</span>',
      '              <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv</span><span class="p">,</span> <span class="s1">\'r\'</span><span class="p">):</span> <span class="c1"># Read all lines in the csv file</span>',
      '                  <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">\'prompt\'</span><span class="p">):</span>   <span class="c1"># Skip the first line</span>',
      '                      <span class="k">continue</span>',
      '                  <span class="n">number_of_lines</span> <span class="o">+=</span> <span class="mi">1</span>    <span class="c1"># Count the number of lines</span>',
      '                  <span class="n">csv_content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>    <span class="c1"># Add the line to the csv_content list</span>',
      '      ',
      '              <span class="n">number_of_train</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number_of_lines</span> <span class="o">*</span> <span class="n">percetn_train</span><span class="p">)</span>  <span class="c1"># Calculate the number of lines for the train.jsonl file</span>',
      '              <span class="n">number_of_validation</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number_of_lines</span> <span class="o">*</span> <span class="n">percetn_validation</span><span class="p">)</span>    <span class="c1"># Calculate the number of lines for the validation.sjonl file</span>',
      '      ',
      '              <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number_of_lines</span><span class="p">):</span>',
      '                  <span class="n">prompt</span> <span class="o">=</span> <span class="n">csv_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">\',\'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>',
      '                  <span class="n">response</span> <span class="o">=</span> <span class="s1">\',\'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">csv_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">\',\'</span><span class="p">)[</span><span class="mi">1</span><span class="p">:])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'\'</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'"\'</span><span class="p">,</span> <span class="s1">\'\'</span><span class="p">)</span>',
      '                  <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">number_of_train</span><span class="p">:</span>',
      '                      <span class="c1"># add line to train.jsonl</span>',
      '                      <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">jsonl_train</span><span class="p">,</span> <span class="s1">\'a\'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>',
      '                          <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">\'</span><span class="si">{</span><span class="s2">"{"</span><span class="si">}</span><span class="s1">"messages": [</span><span class="si">{</span><span class="s2">"{"</span><span class="si">}</span><span class="s1">"role": "system", "content": "Eres un amable asistente dispuesto a responder."</span><span class="si">{</span><span class="s2">"}"</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="s2">"{"</span><span class="si">}</span><span class="s1">"role": "user", "content": "</span><span class="si">{</span><span class="n">prompt</span><span class="si">}</span><span class="s1">"</span><span class="si">{</span><span class="s2">"}"</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="s2">"{"</span><span class="si">}</span><span class="s1">"role": "assistant", "content": "</span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s1">"</span><span class="si">{</span><span class="s2">"}"</span><span class="si">}</span><span class="s1">]</span><span class="si">{</span><span class="s2">"}"</span><span class="si">}</span><span class="se">\n</span><span class="s1">\'</span><span class="p">)</span>',
      '                  <span class="k">elif</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">number_of_train</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">number_of_train</span> <span class="o">+</span> <span class="n">number_of_validation</span><span class="p">:</span>',
      '                      <span class="c1"># add line to validation.csv</span>',
      '                      <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">jsonl_validation</span><span class="p">,</span> <span class="s1">\'a\'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>',
      '                          <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">\'</span><span class="si">{</span><span class="s2">"{"</span><span class="si">}</span><span class="s1">"messages": [</span><span class="si">{</span><span class="s2">"{"</span><span class="si">}</span><span class="s1">"role": "system", "content": "Eres un amable asistente dispuesto a responder."</span><span class="si">{</span><span class="s2">"}"</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="s2">"{"</span><span class="si">}</span><span class="s1">"role": "user", "content": "</span><span class="si">{</span><span class="n">prompt</span><span class="si">}</span><span class="s1">"</span><span class="si">{</span><span class="s2">"}"</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="s2">"{"</span><span class="si">}</span><span class="s1">"role": "assistant", "content": "</span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s1">"</span><span class="si">{</span><span class="s2">"}"</span><span class="si">}</span><span class="s1">]</span><span class="si">{</span><span class="s2">"}"</span><span class="si">}</span><span class="se">\n</span><span class="s1">\'</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>













































      
      <section class="section-block-markdown-cell">
      <p>Quando tenho os dois <code>jsonl</code>s, executo um <a href="https://cookbook.openai.com/examples/chat_finetuning_data_prep" target="_blank" rel="nofollow noreferrer">code</a> fornecido pela OpenAI para verificar os <code>jsonl</code>s</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Primeiro, validamos os treinamentos</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="kn">import</span> <span class="nn">os</span>',
          '',
          '<span class="n">CSVs_path</span> <span class="o">=</span> <span class="s2">"openai/faqs_posts"</span>',
          '<span class="n">percetn_train</span> <span class="o">=</span> <span class="mf">0.8</span>',
          '<span class="n">percetn_validation</span> <span class="o">=</span> <span class="mf">0.2</span>',
          '',
          '<span class="n">jsonl_train</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CSVs_path</span><span class="p">,</span> <span class="s2">"train.jsonl"</span><span class="p">)</span>',
          '<span class="n">jsonl_validation</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CSVs_path</span><span class="p">,</span> <span class="s2">"validation.jsonl"</span><span class="p">)</span>',
          '',
          '<span class="c1"># Create the train.jsonl and validation.jsonl files</span>',
          '<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">jsonl_train</span><span class="p">,</span> <span class="s1">\'w\'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>',
          '    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">\'\'</span><span class="p">)</span>',
          '<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">jsonl_validation</span><span class="p">,</span> <span class="s1">\'w\'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>',
          '    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">\'\'</span><span class="p">)</span>',
          '',
          '<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">CSVs_path</span><span class="p">):</span>  <span class="c1"># Get all files in the directory</span>',
          '    <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".csv"</span><span class="p">):</span>    <span class="c1"># Check if file is a csv</span>',
          '        <span class="n">csv</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CSVs_path</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span> <span class="c1"># Get the path to the csv file</span>',
          '        <span class="n">number_of_lines</span> <span class="o">=</span> <span class="mi">0</span>',
          '        <span class="n">csv_content</span> <span class="o">=</span> <span class="p">[]</span>',
          '        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv</span><span class="p">,</span> <span class="s1">\'r\'</span><span class="p">):</span> <span class="c1"># Read all lines in the csv file</span>',
          '            <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">\'prompt\'</span><span class="p">):</span>   <span class="c1"># Skip the first line</span>',
          '                <span class="k">continue</span>',
          '            <span class="n">number_of_lines</span> <span class="o">+=</span> <span class="mi">1</span>    <span class="c1"># Count the number of lines</span>',
          '            <span class="n">csv_content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>    <span class="c1"># Add the line to the csv_content list</span>',
          '',
          '        <span class="n">number_of_train</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number_of_lines</span> <span class="o">*</span> <span class="n">percetn_train</span><span class="p">)</span>  <span class="c1"># Calculate the number of lines for the train.jsonl file</span>',
          '        <span class="n">number_of_validation</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number_of_lines</span> <span class="o">*</span> <span class="n">percetn_validation</span><span class="p">)</span>    <span class="c1"># Calculate the number of lines for the validation.sjonl file</span>',
          '',
          '        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number_of_lines</span><span class="p">):</span>',
          '            <span class="n">prompt</span> <span class="o">=</span> <span class="n">csv_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">\',\'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>',
          '            <span class="n">response</span> <span class="o">=</span> <span class="s1">\',\'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">csv_content</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">\',\'</span><span class="p">)[</span><span class="mi">1</span><span class="p">:])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'\'</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'"\'</span><span class="p">,</span> <span class="s1">\'\'</span><span class="p">)</span>',
          '            <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">number_of_train</span><span class="p">:</span>',
          '                <span class="c1"># add line to train.jsonl</span>',
          '                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">jsonl_train</span><span class="p">,</span> <span class="s1">\'a\'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>',
          '                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">\'</span><span class="si">{</span><span class="s2">"{"</span><span class="si">}</span><span class="s1">"messages": [</span><span class="si">{</span><span class="s2">"{"</span><span class="si">}</span><span class="s1">"role": "system", "content": "Eres un amable asistente dispuesto a responder."</span><span class="si">{</span><span class="s2">"}"</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="s2">"{"</span><span class="si">}</span><span class="s1">"role": "user", "content": "</span><span class="si">{</span><span class="n">prompt</span><span class="si">}</span><span class="s1">"</span><span class="si">{</span><span class="s2">"}"</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="s2">"{"</span><span class="si">}</span><span class="s1">"role": "assistant", "content": "</span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s1">"</span><span class="si">{</span><span class="s2">"}"</span><span class="si">}</span><span class="s1">]</span><span class="si">{</span><span class="s2">"}"</span><span class="si">}</span><span class="se">\\n</span><span class="s1">\'</span><span class="p">)</span>',
          '            <span class="k">elif</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">number_of_train</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">number_of_train</span> <span class="o">+</span> <span class="n">number_of_validation</span><span class="p">:</span>',
          '                <span class="c1"># add line to validation.csv</span>',
          '                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">jsonl_validation</span><span class="p">,</span> <span class="s1">\'a\'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>',
          '                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">\'</span><span class="si">{</span><span class="s2">"{"</span><span class="si">}</span><span class="s1">"messages": [</span><span class="si">{</span><span class="s2">"{"</span><span class="si">}</span><span class="s1">"role": "system", "content": "Eres un amable asistente dispuesto a responder."</span><span class="si">{</span><span class="s2">"}"</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="s2">"{"</span><span class="si">}</span><span class="s1">"role": "user", "content": "</span><span class="si">{</span><span class="n">prompt</span><span class="si">}</span><span class="s1">"</span><span class="si">{</span><span class="s2">"}"</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="s2">"{"</span><span class="si">}</span><span class="s1">"role": "assistant", "content": "</span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s1">"</span><span class="si">{</span><span class="s2">"}"</span><span class="si">}</span><span class="s1">]</span><span class="si">{</span><span class="s2">"}"</span><span class="si">}</span><span class="se">\\n</span><span class="s1">\'</span><span class="p">)</span>',
          '</span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>',
          '<span class="kn">import</span> <span class="nn">json</span>',
          '',
          '<span class="c1"># Format error checks</span>',
          '<span class="n">format_errors</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>',
          '',
          '<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">jsonl_train</span><span class="p">,</span> <span class="s1">\'r\'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">\'utf-8\'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>',
          '    <span class="n">dataset</span> <span class="o">=</span> <span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]</span>',
          '',
          '<span class="k">for</span> <span class="n">ex</span> <span class="ow">in</span> <span class="n">dataset</span><span class="p">:</span>',
          '    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>',
          '        <span class="n">format_errors</span><span class="p">[</span><span class="s2">"data_type"</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>',
          '        <span class="k">continue</span>',
          '        ',
          '    <span class="n">messages</span> <span class="o">=</span> <span class="n">ex</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"messages"</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>',
          '    <span class="k">if</span> <span class="ow">not</span> <span class="n">messages</span><span class="p">:</span>',
          '        <span class="n">format_errors</span><span class="p">[</span><span class="s2">"missing_messages_list"</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>',
          '        <span class="k">continue</span>',
          '        ',
          '    <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">:</span>',
          '        <span class="k">if</span> <span class="s2">"role"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">message</span> <span class="ow">or</span> <span class="s2">"content"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">message</span><span class="p">:</span>',
          '            <span class="n">format_errors</span><span class="p">[</span><span class="s2">"message_missing_key"</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>',
          '        ',
          '        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"role"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">,</span> <span class="s2">"name"</span><span class="p">,</span> <span class="s2">"function_call"</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">message</span><span class="p">):</span>',
          '            <span class="n">format_errors</span><span class="p">[</span><span class="s2">"message_unrecognized_key"</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>',
          '        ',
          '        <span class="k">if</span> <span class="n">message</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"role"</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"system"</span><span class="p">,</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"assistant"</span><span class="p">,</span> <span class="s2">"function"</span><span class="p">):</span>',
          '            <span class="n">format_errors</span><span class="p">[</span><span class="s2">"unrecognized_role"</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>',
          '            ',
          '        <span class="n">content</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"content"</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>',
          '        <span class="n">function_call</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"function_call"</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>',
          '        ',
          '        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">content</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">function_call</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>',
          '            <span class="n">format_errors</span><span class="p">[</span><span class="s2">"missing_content"</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>',
          '    ',
          '    <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"role"</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"assistant"</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">):</span>',
          '        <span class="n">format_errors</span><span class="p">[</span><span class="s2">"example_missing_assistant_message"</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>',
          '',
          '<span class="k">if</span> <span class="n">format_errors</span><span class="p">:</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="s2">"Found errors:"</span><span class="p">)</span>',
          '    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">format_errors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>',
          '        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="k">else</span><span class="p">:</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="s2">"No errors found"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'No errors found',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>E agora os de valida√ß√£o</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="c1"># Format error checks</span>',
          '<span class="n">format_errors</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>',
          '',
          '<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">jsonl_validation</span><span class="p">,</span> <span class="s1">\'r\'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">\'utf-8\'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>',
          '    <span class="n">dataset</span> <span class="o">=</span> <span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]</span>',
          '',
          '<span class="k">for</span> <span class="n">ex</span> <span class="ow">in</span> <span class="n">dataset</span><span class="p">:</span>',
          '    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>',
          '        <span class="n">format_errors</span><span class="p">[</span><span class="s2">"data_type"</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>',
          '        <span class="k">continue</span>',
          '        ',
          '    <span class="n">messages</span> <span class="o">=</span> <span class="n">ex</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"messages"</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>',
          '    <span class="k">if</span> <span class="ow">not</span> <span class="n">messages</span><span class="p">:</span>',
          '        <span class="n">format_errors</span><span class="p">[</span><span class="s2">"missing_messages_list"</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>',
          '        <span class="k">continue</span>',
          '        ',
          '    <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">:</span>',
          '        <span class="k">if</span> <span class="s2">"role"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">message</span> <span class="ow">or</span> <span class="s2">"content"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">message</span><span class="p">:</span>',
          '            <span class="n">format_errors</span><span class="p">[</span><span class="s2">"message_missing_key"</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>',
          '        ',
          '        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"role"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">,</span> <span class="s2">"name"</span><span class="p">,</span> <span class="s2">"function_call"</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">message</span><span class="p">):</span>',
          '            <span class="n">format_errors</span><span class="p">[</span><span class="s2">"message_unrecognized_key"</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>',
          '        ',
          '        <span class="k">if</span> <span class="n">message</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"role"</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"system"</span><span class="p">,</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"assistant"</span><span class="p">,</span> <span class="s2">"function"</span><span class="p">):</span>',
          '            <span class="n">format_errors</span><span class="p">[</span><span class="s2">"unrecognized_role"</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>',
          '            ',
          '        <span class="n">content</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"content"</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>',
          '        <span class="n">function_call</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"function_call"</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>',
          '        ',
          '        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">content</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">function_call</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>',
          '            <span class="n">format_errors</span><span class="p">[</span><span class="s2">"missing_content"</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>',
          '    ',
          '    <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"role"</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"assistant"</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">):</span>',
          '        <span class="n">format_errors</span><span class="p">[</span><span class="s2">"example_missing_assistant_message"</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>',
          '',
          '<span class="k">if</span> <span class="n">format_errors</span><span class="p">:</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="s2">"Found errors:"</span><span class="p">)</span>',
          '    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">format_errors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>',
          '        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="k">else</span><span class="p">:</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="s2">"No errors found"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'No errors found',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <h4 id="C%C3%A1lculo-de-tokens">C√°lculo de tokens<a class="anchor-link" href="#C%C3%A1lculo-de-tokens"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 85" src={svg_paths.link_svg_path}/></a></h4>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>O n√∫mero m√°ximo de tokens para cada exemplo deve ser 4096, portanto, se tivermos exemplos mais longos, somente os primeiros 4096 tokens ser√£o usados. Portanto, vamos contar o n√∫mero de tokens que cada <code>jsonl</code> tem para saber quanto nos custar√° treinar novamente o modelo.</p>
      <p>Mas primeiro temos que instalar a biblioteca <code>tiktoken</code>, que √© o tokenizador usado pela OpenAI e que tamb√©m nos ajudar√° a saber quantos tokens cada <code>CSV</code> tem e, portanto, quanto nos custar√° treinar novamente o modelo.</p>
      <p>Para instal√°-lo, execute o seguinte comando</p>
      <div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>tiktoken
      </pre></div>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Criamos algumas fun√ß√µes necess√°rias</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="kn">import</span> <span class="nn">tiktoken</span>',
      '      <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>',
      '      ',
      '      <span class="n">encoding</span> <span class="o">=</span> <span class="n">tiktoken</span><span class="o">.</span><span class="n">get_encoding</span><span class="p">(</span><span class="s2">"cl100k_base"</span><span class="p">)</span>',
      '      ',
      '      <span class="k">def</span> <span class="nf">num_tokens_from_messages</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">tokens_per_message</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">tokens_per_name</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>',
      '          <span class="n">num_tokens</span> <span class="o">=</span> <span class="mi">0</span>',
      '          <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">:</span>',
      '              <span class="n">num_tokens</span> <span class="o">+=</span> <span class="n">tokens_per_message</span>',
      '              <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">message</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>',
      '                  <span class="n">num_tokens</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">encoding</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>',
      '                  <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">"name"</span><span class="p">:</span>',
      '                      <span class="n">num_tokens</span> <span class="o">+=</span> <span class="n">tokens_per_name</span>',
      '          <span class="n">num_tokens</span> <span class="o">+=</span> <span class="mi">3</span>',
      '          <span class="k">return</span> <span class="n">num_tokens</span>',
      '      ',
      '      <span class="k">def</span> <span class="nf">num_assistant_tokens_from_messages</span><span class="p">(</span><span class="n">messages</span><span class="p">):</span>',
      '          <span class="n">num_tokens</span> <span class="o">=</span> <span class="mi">0</span>',
      '          <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">:</span>',
      '              <span class="k">if</span> <span class="n">message</span><span class="p">[</span><span class="s2">"role"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"assistant"</span><span class="p">:</span>',
      '                  <span class="n">num_tokens</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">encoding</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">"content"</span><span class="p">]))</span>',
      '          <span class="k">return</span> <span class="n">num_tokens</span>',
      '      ',
      '      <span class="k">def</span> <span class="nf">print_distribution</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>',
      '          <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">#### Distribution of </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">:"</span><span class="p">)</span>',
      '          <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"min:</span><span class="si">{</span><span class="nb">min</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="si">}</span><span class="s2">, max: </span><span class="si">{</span><span class="nb">max</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
      '          <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"mean: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="si">}</span><span class="s2">, median: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
      '          <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"p5: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="n">values</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">)</span><span class="si">}</span><span class="s2">, p95: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="n">values</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>

































      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="kn">import</span> <span class="nn">tiktoken</span>',
          '<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>',
          '',
          '<span class="n">encoding</span> <span class="o">=</span> <span class="n">tiktoken</span><span class="o">.</span><span class="n">get_encoding</span><span class="p">(</span><span class="s2">"cl100k_base"</span><span class="p">)</span>',
          '',
          '<span class="k">def</span> <span class="nf">num_tokens_from_messages</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">tokens_per_message</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">tokens_per_name</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>',
          '    <span class="n">num_tokens</span> <span class="o">=</span> <span class="mi">0</span>',
          '    <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">:</span>',
          '        <span class="n">num_tokens</span> <span class="o">+=</span> <span class="n">tokens_per_message</span>',
          '        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">message</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>',
          '            <span class="n">num_tokens</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">encoding</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>',
          '            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">"name"</span><span class="p">:</span>',
          '                <span class="n">num_tokens</span> <span class="o">+=</span> <span class="n">tokens_per_name</span>',
          '    <span class="n">num_tokens</span> <span class="o">+=</span> <span class="mi">3</span>',
          '    <span class="k">return</span> <span class="n">num_tokens</span>',
          '',
          '<span class="k">def</span> <span class="nf">num_assistant_tokens_from_messages</span><span class="p">(</span><span class="n">messages</span><span class="p">):</span>',
          '    <span class="n">num_tokens</span> <span class="o">=</span> <span class="mi">0</span>',
          '    <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">:</span>',
          '        <span class="k">if</span> <span class="n">message</span><span class="p">[</span><span class="s2">"role"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"assistant"</span><span class="p">:</span>',
          '            <span class="n">num_tokens</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">encoding</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">"content"</span><span class="p">]))</span>',
          '    <span class="k">return</span> <span class="n">num_tokens</span>',
          '',
          '<span class="k">def</span> <span class="nf">print_distribution</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\n</span><span class="s2">#### Distribution of </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">:"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"min:</span><span class="si">{</span><span class="nb">min</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="si">}</span><span class="s2">, max: </span><span class="si">{</span><span class="nb">max</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"mean: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="si">}</span><span class="s2">, median: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"p5: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="n">values</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">)</span><span class="si">}</span><span class="s2">, p95: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="n">values</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '</span><span class="c1"># Warnings and tokens counts</span>',
          '<span class="n">n_missing_system</span> <span class="o">=</span> <span class="mi">0</span>',
          '<span class="n">n_missing_user</span> <span class="o">=</span> <span class="mi">0</span>',
          '<span class="n">n_messages</span> <span class="o">=</span> <span class="p">[]</span>',
          '<span class="n">convo_lens</span> <span class="o">=</span> <span class="p">[]</span>',
          '<span class="n">assistant_message_lens</span> <span class="o">=</span> <span class="p">[]</span>',
          '',
          '<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">jsonl_train</span><span class="p">,</span> <span class="s1">\'r\'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">\'utf-8\'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>',
          '    <span class="n">dataset</span> <span class="o">=</span> <span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]</span>',
          '',
          '<span class="k">for</span> <span class="n">ex</span> <span class="ow">in</span> <span class="n">dataset</span><span class="p">:</span>',
          '    <span class="n">messages</span> <span class="o">=</span> <span class="n">ex</span><span class="p">[</span><span class="s2">"messages"</span><span class="p">]</span>',
          '    <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">"role"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"system"</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">):</span>',
          '        <span class="n">n_missing_system</span> <span class="o">+=</span> <span class="mi">1</span>',
          '    <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">"role"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"user"</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">):</span>',
          '        <span class="n">n_missing_user</span> <span class="o">+=</span> <span class="mi">1</span>',
          '    <span class="n">n_messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">messages</span><span class="p">))</span>',
          '    <span class="n">convo_lens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num_tokens_from_messages</span><span class="p">(</span><span class="n">messages</span><span class="p">))</span>',
          '    <span class="n">assistant_message_lens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num_assistant_tokens_from_messages</span><span class="p">(</span><span class="n">messages</span><span class="p">))</span>',
          '    ',
          '<span class="nb">print</span><span class="p">(</span><span class="s2">"Num examples missing system message:"</span><span class="p">,</span> <span class="n">n_missing_system</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="s2">"Num examples missing user message:"</span><span class="p">,</span> <span class="n">n_missing_user</span><span class="p">)</span>',
          '<span class="n">print_distribution</span><span class="p">(</span><span class="n">n_messages</span><span class="p">,</span> <span class="s2">"num_messages_per_example"</span><span class="p">)</span>',
          '<span class="n">print_distribution</span><span class="p">(</span><span class="n">convo_lens</span><span class="p">,</span> <span class="s2">"num_total_tokens_per_example"</span><span class="p">)</span>',
          '<span class="n">print_distribution</span><span class="p">(</span><span class="n">assistant_message_lens</span><span class="p">,</span> <span class="s2">"num_assistant_tokens_per_example"</span><span class="p">)</span>',
          '<span class="n">n_too_long</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">l</span> <span class="o">&gt;</span> <span class="mi">4096</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">convo_lens</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\n</span><span class="si">{</span><span class="n">n_too_long</span><span class="si">}</span><span class="s2"> examples may be over the 4096 token limit, they will be truncated during fine-tuning"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Num examples missing system message: 0',
          'Num examples missing user message: 0',
          '#### Distribution of num_messages_per_example:',
          'min:3, max: 3',
          'mean: 3.0, median: 3.0',
          'p5: 3.0, p95: 3.0',
          '#### Distribution of num_total_tokens_per_example:',
          'min:67, max: 132',
          'mean: 90.13793103448276, median: 90.0',
          'p5: 81.5, p95: 99.5',
          '#### Distribution of num_assistant_tokens_per_example:',
          'min:33, max: 90',
          'mean: 48.66379310344828, median: 48.5',
          'p5: 41.0, p95: 55.5',
          '0 examples may be over the 4096 token limit, they will be truncated during fine-tuning',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Como podemos ver no conjunto de treinamento, nenhuma mensagem excede 4096 tokens.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="c1"># Warnings and tokens counts</span>',
          '<span class="n">n_missing_system</span> <span class="o">=</span> <span class="mi">0</span>',
          '<span class="n">n_missing_user</span> <span class="o">=</span> <span class="mi">0</span>',
          '<span class="n">n_messages</span> <span class="o">=</span> <span class="p">[]</span>',
          '<span class="n">convo_lens</span> <span class="o">=</span> <span class="p">[]</span>',
          '<span class="n">assistant_message_lens</span> <span class="o">=</span> <span class="p">[]</span>',
          '',
          '<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">jsonl_validation</span><span class="p">,</span> <span class="s1">\'r\'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">\'utf-8\'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>',
          '    <span class="n">dataset</span> <span class="o">=</span> <span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]</span>',
          '',
          '<span class="k">for</span> <span class="n">ex</span> <span class="ow">in</span> <span class="n">dataset</span><span class="p">:</span>',
          '    <span class="n">messages</span> <span class="o">=</span> <span class="n">ex</span><span class="p">[</span><span class="s2">"messages"</span><span class="p">]</span>',
          '    <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">"role"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"system"</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">):</span>',
          '        <span class="n">n_missing_system</span> <span class="o">+=</span> <span class="mi">1</span>',
          '    <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">"role"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"user"</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">):</span>',
          '        <span class="n">n_missing_user</span> <span class="o">+=</span> <span class="mi">1</span>',
          '    <span class="n">n_messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">messages</span><span class="p">))</span>',
          '    <span class="n">convo_lens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num_tokens_from_messages</span><span class="p">(</span><span class="n">messages</span><span class="p">))</span>',
          '    <span class="n">assistant_message_lens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num_assistant_tokens_from_messages</span><span class="p">(</span><span class="n">messages</span><span class="p">))</span>',
          '    ',
          '<span class="nb">print</span><span class="p">(</span><span class="s2">"Num examples missing system message:"</span><span class="p">,</span> <span class="n">n_missing_system</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="s2">"Num examples missing user message:"</span><span class="p">,</span> <span class="n">n_missing_user</span><span class="p">)</span>',
          '<span class="n">print_distribution</span><span class="p">(</span><span class="n">n_messages</span><span class="p">,</span> <span class="s2">"num_messages_per_example"</span><span class="p">)</span>',
          '<span class="n">print_distribution</span><span class="p">(</span><span class="n">convo_lens</span><span class="p">,</span> <span class="s2">"num_total_tokens_per_example"</span><span class="p">)</span>',
          '<span class="n">print_distribution</span><span class="p">(</span><span class="n">assistant_message_lens</span><span class="p">,</span> <span class="s2">"num_assistant_tokens_per_example"</span><span class="p">)</span>',
          '<span class="n">n_too_long</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">l</span> <span class="o">&gt;</span> <span class="mi">4096</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">convo_lens</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\n</span><span class="si">{</span><span class="n">n_too_long</span><span class="si">}</span><span class="s2"> examples may be over the 4096 token limit, they will be truncated during fine-tuning"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Num examples missing system message: 0',
          'Num examples missing user message: 0',
          '#### Distribution of num_messages_per_example:',
          'min:3, max: 3',
          'mean: 3.0, median: 3.0',
          'p5: 3.0, p95: 3.0',
          '#### Distribution of num_total_tokens_per_example:',
          'min:80, max: 102',
          'mean: 89.93333333333334, median: 91.0',
          'p5: 82.2, p95: 96.8',
          '#### Distribution of num_assistant_tokens_per_example:',
          'min:41, max: 57',
          'mean: 48.2, median: 49.0',
          'p5: 42.8, p95: 51.6',
          '0 examples may be over the 4096 token limit, they will be truncated during fine-tuning',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Nenhuma mensagem no conjunto de valida√ß√£o ultrapassa 4096 tokens.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h4 id="C%C3%A1lculo-de-custos">C√°lculo de custos<a class="anchor-link" href="#C%C3%A1lculo-de-custos"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 86" src={svg_paths.link_svg_path}/></a></h4>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Outro aspecto muito importante √© saber quanto custar√° o ajuste fino.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="c1"># Pricing and default n_epochs estimate</span>',
          '<span class="n">MAX_TOKENS_PER_EXAMPLE</span> <span class="o">=</span> <span class="mi">4096</span>',
          '',
          '<span class="n">TARGET_EPOCHS</span> <span class="o">=</span> <span class="mi">3</span>',
          '<span class="n">MIN_TARGET_EXAMPLES</span> <span class="o">=</span> <span class="mi">100</span>',
          '<span class="n">MAX_TARGET_EXAMPLES</span> <span class="o">=</span> <span class="mi">25000</span>',
          '<span class="n">MIN_DEFAULT_EPOCHS</span> <span class="o">=</span> <span class="mi">1</span>',
          '<span class="n">MAX_DEFAULT_EPOCHS</span> <span class="o">=</span> <span class="mi">25</span>',
          '',
          '<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">jsonl_train</span><span class="p">,</span> <span class="s1">\'r\'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">\'utf-8\'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>',
          '    <span class="n">dataset</span> <span class="o">=</span> <span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]</span>',
          '',
          '<span class="n">convo_lens</span> <span class="o">=</span> <span class="p">[]</span>',
          '<span class="k">for</span> <span class="n">ex</span> <span class="ow">in</span> <span class="n">dataset</span><span class="p">:</span>',
          '    <span class="n">messages</span> <span class="o">=</span> <span class="n">ex</span><span class="p">[</span><span class="s2">"messages"</span><span class="p">]</span>',
          '    <span class="n">convo_lens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num_tokens_from_messages</span><span class="p">(</span><span class="n">messages</span><span class="p">))</span>',
          '',
          '<span class="n">n_epochs</span> <span class="o">=</span> <span class="n">TARGET_EPOCHS</span>',
          '<span class="n">n_train_examples</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>',
          '<span class="k">if</span> <span class="n">n_train_examples</span> <span class="o">*</span> <span class="n">TARGET_EPOCHS</span> <span class="o">&lt;</span> <span class="n">MIN_TARGET_EXAMPLES</span><span class="p">:</span>',
          '    <span class="n">n_epochs</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">MAX_DEFAULT_EPOCHS</span><span class="p">,</span> <span class="n">MIN_TARGET_EXAMPLES</span> <span class="o">//</span> <span class="n">n_train_examples</span><span class="p">)</span>',
          '<span class="k">elif</span> <span class="n">n_train_examples</span> <span class="o">*</span> <span class="n">TARGET_EPOCHS</span> <span class="o">&gt;</span> <span class="n">MAX_TARGET_EXAMPLES</span><span class="p">:</span>',
          '    <span class="n">n_epochs</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">MIN_DEFAULT_EPOCHS</span><span class="p">,</span> <span class="n">MAX_TARGET_EXAMPLES</span> <span class="o">//</span> <span class="n">n_train_examples</span><span class="p">)</span>',
          '',
          '<span class="n">n_billing_tokens_in_dataset</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">MAX_TOKENS_PER_EXAMPLE</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span> <span class="k">for</span> <span class="n">length</span> <span class="ow">in</span> <span class="n">convo_lens</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Dataset has ~</span><span class="si">{</span><span class="n">n_billing_tokens_in_dataset</span><span class="si">}</span><span class="s2"> tokens that will be charged for during training"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"By default, you\'ll train for </span><span class="si">{</span><span class="n">n_epochs</span><span class="si">}</span><span class="s2"> epochs on this dataset"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"By default, you\'ll be charged for ~</span><span class="si">{</span><span class="n">n_epochs</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">n_billing_tokens_in_dataset</span><span class="si">}</span><span class="s2"> tokens"</span><span class="p">)</span>',
          '',
          '<span class="n">tokens_for_train</span> <span class="o">=</span> <span class="n">n_epochs</span> <span class="o">*</span> <span class="n">n_billing_tokens_in_dataset</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Dataset has ~10456 tokens that will be charged for during training',
          'By default, you\'ll train for 3 epochs on this dataset',
          'By default, you\'ll be charged for ~31368 tokens',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Como no momento em que este post foi escrito, o pre√ßo para treinar o <code>gpt-3.5-turbo</code> era de US$ 0,0080 por 1.000 tokens, podemos saber quanto o treinamento nos custar√°.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">pricing</span> <span class="o">=</span> <span class="mf">0.0080</span>',
          '<span class="n">num_tokens_pricing</span> <span class="o">=</span> <span class="mi">1000</span>',
          '',
          '<span class="n">training_price</span> <span class="o">=</span> <span class="n">pricing</span> <span class="o">*</span> <span class="p">(</span><span class="n">tokens_for_train</span> <span class="o">//</span> <span class="n">num_tokens_pricing</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Training price: $</span><span class="si">{</span><span class="n">training_price</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Training price: $0.248',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="c1"># Pricing and default n_epochs estimate</span>',
          '<span class="n">MAX_TOKENS_PER_EXAMPLE</span> <span class="o">=</span> <span class="mi">4096</span>',
          '',
          '<span class="n">TARGET_EPOCHS</span> <span class="o">=</span> <span class="mi">3</span>',
          '<span class="n">MIN_TARGET_EXAMPLES</span> <span class="o">=</span> <span class="mi">100</span>',
          '<span class="n">MAX_TARGET_EXAMPLES</span> <span class="o">=</span> <span class="mi">25000</span>',
          '<span class="n">MIN_DEFAULT_EPOCHS</span> <span class="o">=</span> <span class="mi">1</span>',
          '<span class="n">MAX_DEFAULT_EPOCHS</span> <span class="o">=</span> <span class="mi">25</span>',
          '',
          '<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">jsonl_validation</span><span class="p">,</span> <span class="s1">\'r\'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">\'utf-8\'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>',
          '    <span class="n">dataset</span> <span class="o">=</span> <span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]</span>',
          '',
          '<span class="n">convo_lens</span> <span class="o">=</span> <span class="p">[]</span>',
          '<span class="k">for</span> <span class="n">ex</span> <span class="ow">in</span> <span class="n">dataset</span><span class="p">:</span>',
          '    <span class="n">messages</span> <span class="o">=</span> <span class="n">ex</span><span class="p">[</span><span class="s2">"messages"</span><span class="p">]</span>',
          '    <span class="n">convo_lens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num_tokens_from_messages</span><span class="p">(</span><span class="n">messages</span><span class="p">))</span>',
          '',
          '<span class="n">n_epochs</span> <span class="o">=</span> <span class="n">TARGET_EPOCHS</span>',
          '<span class="n">n_train_examples</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>',
          '<span class="k">if</span> <span class="n">n_train_examples</span> <span class="o">*</span> <span class="n">TARGET_EPOCHS</span> <span class="o">&lt;</span> <span class="n">MIN_TARGET_EXAMPLES</span><span class="p">:</span>',
          '    <span class="n">n_epochs</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">MAX_DEFAULT_EPOCHS</span><span class="p">,</span> <span class="n">MIN_TARGET_EXAMPLES</span> <span class="o">//</span> <span class="n">n_train_examples</span><span class="p">)</span>',
          '<span class="k">elif</span> <span class="n">n_train_examples</span> <span class="o">*</span> <span class="n">TARGET_EPOCHS</span> <span class="o">&gt;</span> <span class="n">MAX_TARGET_EXAMPLES</span><span class="p">:</span>',
          '    <span class="n">n_epochs</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">MIN_DEFAULT_EPOCHS</span><span class="p">,</span> <span class="n">MAX_TARGET_EXAMPLES</span> <span class="o">//</span> <span class="n">n_train_examples</span><span class="p">)</span>',
          '',
          '<span class="n">n_billing_tokens_in_dataset</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">MAX_TOKENS_PER_EXAMPLE</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span> <span class="k">for</span> <span class="n">length</span> <span class="ow">in</span> <span class="n">convo_lens</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Dataset has ~</span><span class="si">{</span><span class="n">n_billing_tokens_in_dataset</span><span class="si">}</span><span class="s2"> tokens that will be charged for during training"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"By default, you\'ll train for </span><span class="si">{</span><span class="n">n_epochs</span><span class="si">}</span><span class="s2"> epochs on this dataset"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"By default, you\'ll be charged for ~</span><span class="si">{</span><span class="n">n_epochs</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">n_billing_tokens_in_dataset</span><span class="si">}</span><span class="s2"> tokens"</span><span class="p">)</span>',
          '',
          '<span class="n">tokens_for_validation</span> <span class="o">=</span> <span class="n">n_epochs</span> <span class="o">*</span> <span class="n">n_billing_tokens_in_dataset</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Dataset has ~1349 tokens that will be charged for during training',
          'By default, you\'ll train for 6 epochs on this dataset',
          'By default, you\'ll be charged for ~8094 tokens',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">validation_price</span> <span class="o">=</span> <span class="n">pricing</span> <span class="o">*</span> <span class="p">(</span><span class="n">tokens_for_validation</span> <span class="o">//</span> <span class="n">num_tokens_pricing</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Validation price: $</span><span class="si">{</span><span class="n">validation_price</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Validation price: $0.064',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">total_price</span> <span class="o">=</span> <span class="n">training_price</span> <span class="o">+</span> <span class="n">validation_price</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Total price: $</span><span class="si">{</span><span class="n">total_price</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Total price: $0.312',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Se nossos c√°lculos estiverem corretos, veremos que o retreinamento do <code>gpt-3.5-turbo</code> nos custar√° US$ 0,312.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h3 id="Treinamento">Treinamento<a class="anchor-link" href="#Treinamento"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 87" src={svg_paths.link_svg_path}/></a></h3>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Quando tivermos tudo pronto, precisaremos carregar o <code>jsonl</code> para a API da OpenAI para treinar novamente o modelo. Para fazer isso, executamos o seguinte c√≥digo</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="n">jsonl_train</span><span class="p">,</span> <span class="s2">"rb"</span><span class="p">),</span> <span class="n">purpose</span><span class="o">=</span><span class="s2">"fine-tune"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>






      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="n">jsonl_train</span><span class="p">,</span> <span class="s2">"rb"</span><span class="p">),</span> <span class="n">purpose</span><span class="o">=</span><span class="s2">"fine-tune"</span><span class="p">)</span>',
          '</span><span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="n">result</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          '(openai.types.file_object.FileObject,',
          ' FileObject(id=\'file-LWztOVasq4E0U67wRe8ShjLZ\', bytes=47947, created_at=1701585709, filename=\'train.jsonl\', object=\'file\', purpose=\'fine-tune\', status=\'processed\', status_details=None))',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.id = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.bytes = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">bytes</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.created_at = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">created_at</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.filename = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.object = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">object</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.purpose = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">purpose</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.status = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.status_details = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">status_details</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'result.id = file-LWztOVasq4E0U67wRe8ShjLZ',
          'result.bytes = 47947',
          'result.created_at = 1701585709',
          'result.filename = train.jsonl',
          'result.object = file',
          'result.purpose = fine-tune',
          'result.status = processed',
          'result.status_details = None',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">jsonl_train_id</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">id</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"jsonl_train_id = </span><span class="si">{</span><span class="n">jsonl_train_id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'jsonl_train_id = file-LWztOVasq4E0U67wRe8ShjLZ',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Fazemos o mesmo com o conjunto de valida√ß√£o.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="n">jsonl_validation</span><span class="p">,</span> <span class="s2">"rb"</span><span class="p">),</span> <span class="n">purpose</span><span class="o">=</span><span class="s2">"fine-tune"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>






      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="n">jsonl_validation</span><span class="p">,</span> <span class="s2">"rb"</span><span class="p">),</span> <span class="n">purpose</span><span class="o">=</span><span class="s2">"fine-tune"</span><span class="p">)</span>',
          '</span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.id = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.bytes = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">bytes</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.created_at = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">created_at</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.filename = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.object = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">object</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.purpose = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">purpose</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.status = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.status_details = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">status_details</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'result.id = file-E0YOgIIe9mwxmFcza5bFyVKW',
          'result.bytes = 6369',
          'result.created_at = 1701585730',
          'result.filename = validation.jsonl',
          'result.object = file',
          'result.purpose = fine-tune',
          'result.status = processed',
          'result.status_details = None',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">jsonl_validation_id</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">id</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"jsonl_train_id = </span><span class="si">{</span><span class="n">jsonl_validation_id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'jsonl_train_id = file-E0YOgIIe9mwxmFcza5bFyVKW',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Depois de carreg√°-los, passamos a treinar nosso pr√≥prio modelo OpenAi e, para isso, usamos o seguinte c√≥digo</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">fine_tuning</span><span class="o">.</span><span class="n">jobs</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">model</span> <span class="o">=</span> <span class="s2">"gpt-3.5-turbo"</span><span class="p">,</span> <span class="n">training_file</span> <span class="o">=</span> <span class="n">jsonl_train_id</span><span class="p">,</span> <span class="n">validation_file</span> <span class="o">=</span> <span class="n">jsonl_validation_id</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>






      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">fine_tuning</span><span class="o">.</span><span class="n">jobs</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">model</span> <span class="o">=</span> <span class="s2">"gpt-3.5-turbo"</span><span class="p">,</span> <span class="n">training_file</span> <span class="o">=</span> <span class="n">jsonl_train_id</span><span class="p">,</span> <span class="n">validation_file</span> <span class="o">=</span> <span class="n">jsonl_validation_id</span><span class="p">)</span>',
          '</span><span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="n">result</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          '(openai.types.fine_tuning.fine_tuning_job.FineTuningJob,',
          ' FineTuningJob(id=\'ftjob-aBndcorOfQLP0UijlY0R4pTB\', created_at=1701585758, error=None, fine_tuned_model=None, finished_at=None, hyperparameters=Hyperparameters(n_epochs=\'auto\', batch_size=\'auto\', learning_rate_multiplier=\'auto\'), model=\'gpt-3.5-turbo-0613\', object=\'fine_tuning.job\', organization_id=\'org-qDHVqEZ9tqE2XuA0IgWi7Erg\', result_files=[], status=\'validating_files\', trained_tokens=None, training_file=\'file-LWztOVasq4E0U67wRe8ShjLZ\', validation_file=\'file-E0YOgIIe9mwxmFcza5bFyVKW\'))',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.id = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.created_at = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">created_at</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.error = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">error</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.fine_tuned_model = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">fine_tuned_model</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.finished_at = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">finished_at</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.hyperparameters = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">hyperparameters</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">n_epochs = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">hyperparameters</span><span class="o">.</span><span class="n">n_epochs</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">batch_size = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">hyperparameters</span><span class="o">.</span><span class="n">batch_size</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">learning_rate_multiplier = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">hyperparameters</span><span class="o">.</span><span class="n">learning_rate_multiplier</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.model = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">model</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.object = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">object</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.organization_id = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">organization_id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.result_files = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">result_files</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.status = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.trained_tokens = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">trained_tokens</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.training_file = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">training_file</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.validation_file = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">validation_file</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'result.id = ftjob-aBndcorOfQLP0UijlY0R4pTB',
          'result.created_at = 1701585758',
          'result.error = None',
          'result.fine_tuned_model = None',
          'result.finished_at = None',
          'result.hyperparameters = Hyperparameters(n_epochs=\'auto\', batch_size=\'auto\', learning_rate_multiplier=\'auto\')',
          '	n_epochs = auto',
          '	batch_size = auto',
          '	learning_rate_multiplier = auto',
          'result.model = gpt-3.5-turbo-0613',
          'result.object = fine_tuning.job',
          'result.organization_id = org-qDHVqEZ9tqE2XuA0IgWi7Erg',
          'result.result_files = []',
          'result.status = validating_files',
          'result.trained_tokens = None',
          'result.training_file = file-LWztOVasq4E0U67wRe8ShjLZ',
          'result.validation_file = file-E0YOgIIe9mwxmFcza5bFyVKW',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">fine_tune_id</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">id</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"fine_tune_id = </span><span class="si">{</span><span class="n">fine_tune_id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'fine_tune_id = ftjob-aBndcorOfQLP0UijlY0R4pTB',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Podemos ver que <code>status</code> mostra <code>validating_files</code>. Como o ajuste fino leva muito tempo, podemos solicitar o processo usando o seguinte c√≥digo</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">fine_tuning</span><span class="o">.</span><span class="n">jobs</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="n">fine_tuning_job_id</span> <span class="o">=</span> <span class="n">fine_tune_id</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>






      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">fine_tuning</span><span class="o">.</span><span class="n">jobs</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="n">fine_tuning_job_id</span> <span class="o">=</span> <span class="n">fine_tune_id</span><span class="p">)</span>',
          '</span><span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="n">result</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          '(openai.types.fine_tuning.fine_tuning_job.FineTuningJob,',
          ' FineTuningJob(id=\'ftjob-aBndcorOfQLP0UijlY0R4pTB\', created_at=1701585758, error=None, fine_tuned_model=None, finished_at=None, hyperparameters=Hyperparameters(n_epochs=3, batch_size=1, learning_rate_multiplier=2), model=\'gpt-3.5-turbo-0613\', object=\'fine_tuning.job\', organization_id=\'org-qDHVqEZ9tqE2XuA0IgWi7Erg\', result_files=[], status=\'running\', trained_tokens=None, training_file=\'file-LWztOVasq4E0U67wRe8ShjLZ\', validation_file=\'file-E0YOgIIe9mwxmFcza5bFyVKW\'))',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.id = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.created_at = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">created_at</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.error = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">error</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.fine_tuned_model = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">fine_tuned_model</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.finished_at = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">finished_at</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.hyperparameters = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">hyperparameters</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">n_epochs = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">hyperparameters</span><span class="o">.</span><span class="n">n_epochs</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">batch_size = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">hyperparameters</span><span class="o">.</span><span class="n">batch_size</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">learning_rate_multiplier = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">hyperparameters</span><span class="o">.</span><span class="n">learning_rate_multiplier</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.model = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">model</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.object = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">object</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.organization_id = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">organization_id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.result_files = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">result_files</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.status = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.trained_tokens = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">trained_tokens</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.training_file = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">training_file</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.validation_file = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">validation_file</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'result.id = ftjob-aBndcorOfQLP0UijlY0R4pTB',
          'result.created_at = 1701585758',
          'result.error = None',
          'result.fine_tuned_model = None',
          'result.finished_at = None',
          'result.hyperparameters = Hyperparameters(n_epochs=3, batch_size=1, learning_rate_multiplier=2)',
          '	n_epochs = 3',
          '	batch_size = 1',
          '	learning_rate_multiplier = 2',
          'result.model = gpt-3.5-turbo-0613',
          'result.object = fine_tuning.job',
          'result.organization_id = org-qDHVqEZ9tqE2XuA0IgWi7Erg',
          'result.result_files = []',
          'result.status = running',
          'result.trained_tokens = None',
          'result.training_file = file-LWztOVasq4E0U67wRe8ShjLZ',
          'result.validation_file = file-E0YOgIIe9mwxmFcza5bFyVKW',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Criamos um loop que aguarda o fim do treinamento.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="kn">import</span> <span class="nn">time</span>',
          '',
          '<span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">fine_tuning</span><span class="o">.</span><span class="n">jobs</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="n">fine_tuning_job_id</span> <span class="o">=</span> <span class="n">fine_tune_id</span><span class="p">)</span>',
          '<span class="n">status</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">status</span>',
          '',
          '<span class="k">while</span> <span class="n">status</span> <span class="o">!=</span> <span class="s2">"succeeded"</span><span class="p">:</span>',
          '    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>',
          '    <span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">fine_tuning</span><span class="o">.</span><span class="n">jobs</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="n">fine_tuning_job_id</span> <span class="o">=</span> <span class="n">fine_tune_id</span><span class="p">)</span>',
          '    <span class="n">status</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">status</span>',
          '',
          '<span class="nb">print</span><span class="p">(</span><span class="s2">"Job succeeded!"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Job succeeded',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Depois de concluir o treinamento, pedimos novamente informa√ß√µes sobre o processo.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">fine_tuning</span><span class="o">.</span><span class="n">jobs</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="n">fine_tuning_job_id</span> <span class="o">=</span> <span class="n">fine_tune_id</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>






      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">fine_tuning</span><span class="o">.</span><span class="n">jobs</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="n">fine_tuning_job_id</span> <span class="o">=</span> <span class="n">fine_tune_id</span><span class="p">)</span>',
          '</span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.id = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.created_at = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">created_at</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.error = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">error</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.fine_tuned_model = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">fine_tuned_model</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.finished_at = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">finished_at</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.hyperparameters = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">hyperparameters</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">n_epochs = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">hyperparameters</span><span class="o">.</span><span class="n">n_epochs</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">batch_size = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">hyperparameters</span><span class="o">.</span><span class="n">batch_size</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">learning_rate_multiplier = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">hyperparameters</span><span class="o">.</span><span class="n">learning_rate_multiplier</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.model = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">model</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.object = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">object</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.organization_id = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">organization_id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.result_files = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">result_files</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.status = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.trained_tokens = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">trained_tokens</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.training_file = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">training_file</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result.validation_file = </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">validation_file</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'result.id = ftjob-aBndcorOfQLP0UijlY0R4pTB',
          'result.created_at = 1701585758',
          'result.error = None',
          'result.fine_tuned_model = ft:gpt-3.5-turbo-0613:personal::8RagA0RT',
          'result.finished_at = 1701586541',
          'result.hyperparameters = Hyperparameters(n_epochs=3, batch_size=1, learning_rate_multiplier=2)',
          '	n_epochs = 3',
          '	batch_size = 1',
          '	learning_rate_multiplier = 2',
          'result.model = gpt-3.5-turbo-0613',
          'result.object = fine_tuning.job',
          'result.organization_id = org-qDHVqEZ9tqE2XuA0IgWi7Erg',
          'result.result_files = [\'file-dNeo5ojOSuin7JIkNkQouHLB\']',
          'result.status = succeeded',
          'result.trained_tokens = 30672',
          'result.training_file = file-LWztOVasq4E0U67wRe8ShjLZ',
          'result.validation_file = file-E0YOgIIe9mwxmFcza5bFyVKW',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Aqui est√£o alguns fatos interessantes</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">fine_tuned_model</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">fine_tuned_model</span>',
          '<span class="n">finished_at</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">finished_at</span>',
          '<span class="n">result_files</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">result_files</span>',
          '<span class="n">status</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">status</span>',
          '<span class="n">trained_tokens</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">trained_tokens</span>',
          '',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"fine_tuned_model = </span><span class="si">{</span><span class="n">fine_tuned_model</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"finished_at = </span><span class="si">{</span><span class="n">finished_at</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"result_files = </span><span class="si">{</span><span class="n">result_files</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"status = </span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"trained_tokens = </span><span class="si">{</span><span class="n">trained_tokens</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'fine_tuned_model = ft:gpt-3.5-turbo-0613:personal::8RagA0RT',
          'finished_at = 1701586541',
          'result_files = [\'file-dNeo5ojOSuin7JIkNkQouHLB\']',
          'status = succeeded',
          'trained_tokens = 30672',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Podemos ver que ele atribuiu o nome <code>ft:gpt-3.5-turbo-0613:personal::8RagA0RT</code> aos nossos modelos, seu status agora √© <code>succeeded</code> e que ele usou 30672 tokens, enquanto hav√≠amos previsto</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">tokens_for_train</span><span class="p">,</span> <span class="n">tokens_for_validation</span><span class="p">,</span> <span class="n">tokens_for_train</span> <span class="o">+</span> <span class="n">tokens_for_validation</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          '(31368, 8094, 39462)',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Em outras palavras, ele usou menos tokens, de modo que o treinamento nos custou menos do que prev√≠amos, especificamente</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">real_training_price</span> <span class="o">=</span> <span class="n">pricing</span> <span class="o">*</span> <span class="p">(</span><span class="n">trained_tokens</span> <span class="o">//</span> <span class="n">num_tokens_pricing</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Real training price: $</span><span class="si">{</span><span class="n">real_training_price</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Real training price: $0.24',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Al√©m dessas informa√ß√µes, se acessarmos a p√°gina <a href="https://platform.openai.com/finetune" target="_blank" rel="nofollow noreferrer">finetune</a> da OpenAI, veremos que nosso modelo est√° l√°.</p>
      <p><img decoding="async" onerror="this.parentNode.removeChild(this)" alt="open ai finetune" src="http://maximofn.com/wp-content/uploads/2023/12/openai_fine_tuning_process.png"/></p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Tamb√©m podemos ver quanto o treinamento nos custou.</p>
      <p><img decoding="async" onerror="this.parentNode.removeChild(this)" alt="open ai finetune cost" src="http://maximofn.com/wp-content/uploads/2023/12/openai_fine_tuning_cost.png"/></p>
      <p>Que, como podemos ver, foi de apenas US$ 0,25.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>E, por fim, vamos ver quanto tempo levou para fazer esse treinamento. Podemos ver a que horas ele come√ßou</p>
      <p><img decoding="async" onerror="this.parentNode.removeChild(this)" alt="open ai finetune start" src="http://maximofn.com/wp-content/uploads/2023/12/openai_fine_tuning_process_start_time.png"/></p>
      <p>E em que momento ela terminou?</p>
      <p><img decoding="async" onerror="this.parentNode.removeChild(this)" alt="open ai finetune end" src="http://maximofn.com/wp-content/uploads/2023/12/openai_fine_tuning_process_stop_time.png"/></p>
      <p>Portanto, demorou cerca de 10 minutos.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h3 id="Teste-de-modelo">Teste de modelo<a class="anchor-link" href="#Teste-de-modelo"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 88" src={svg_paths.link_svg_path}/></a></h3>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>No OpenAI [playground] (<a href="https://platform.openai.com/playground?mode=chat" target="_blank" rel="nofollow noreferrer">https://platform.openai.com/playground?mode=chat</a>), podemos testar nosso modelo, mas faremos isso por meio da API, conforme aprendemos aqui.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="n">promtp</span> <span class="o">=</span> <span class="s2">"¬øC√≥mo se define una funci√≥n en Python?"</span>',
      '      ',
      '      <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
      '        <span class="n">model</span> <span class="o">=</span> <span class="n">fine_tuned_model</span><span class="p">,</span>',
      '        <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">promtp</span><span class="si">}</span><span class="s2">"</span><span class="p">}],</span>',
      '      <span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>











      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">promtp</span> <span class="o">=</span> <span class="s2">"¬øC√≥mo se define una funci√≥n en Python?"</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span> <span class="o">=</span> <span class="n">fine_tuned_model</span><span class="p">,</span>',
          '  <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">promtp</span><span class="si">}</span><span class="s2">"</span><span class="p">}],</span>',
          '<span class="p">)</span>',
          '</span><span class="nb">type</span><span class="p">(</span><span class="n">response</span><span class="p">),</span> <span class="n">response</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          '(openai.types.chat.chat_completion.ChatCompletion,',
          ' ChatCompletion(id=\'chatcmpl-8RvkVG8a5xjI2UZdXgdOGGcoelefc\', choices=[Choice(finish_reason=\'stop\', index=0, message=ChatCompletionMessage(content=\'Una funci√≥n en Python se define utilizando la palabra clave `def`, seguida del nombre de la funci√≥n, par√©ntesis y dos puntos. El cuerpo de la funci√≥n se indenta debajo. [M√°s informaci√≥n](https://maximofn.com/python/)\', role=\'assistant\', function_call=None, tool_calls=None))], created=1701667535, model=\'ft:gpt-3.5-turbo-0613:personal::8RagA0RT\', object=\'chat.completion\', system_fingerprint=None, usage=CompletionUsage(completion_tokens=54, prompt_tokens=16, total_tokens=70)))',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.id = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.choices = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">)):</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.choices[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">] = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">response.choices[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].finish_reason = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">finish_reason</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">response.choices[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].index = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">response.choices[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].message = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'</span><span class="se">\n\t\t</span><span class="s1">\'</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.choices[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].message.content = </span><span class="se">\n\t\t</span><span class="si">{</span><span class="n">content</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.choices[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].message.role = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">role</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.choices[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].message.function_call = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">function_call</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.choices[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].message.tool_calls = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">tool_calls</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.created = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">created</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.model = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">model</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.object = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">object</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.system_fingerprint = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">system_fingerprint</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.usage = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">usage</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">response.usage.completion_tokens = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">usage</span><span class="o">.</span><span class="n">completion_tokens</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">response.usage.prompt_tokens = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">usage</span><span class="o">.</span><span class="n">prompt_tokens</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">response.usage.total_tokens = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">usage</span><span class="o">.</span><span class="n">total_tokens</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'response.id = chatcmpl-8RvkVG8a5xjI2UZdXgdOGGcoelefc',
          'response.choices = [Choice(finish_reason=\'stop\', index=0, message=ChatCompletionMessage(content=\'Una funci√≥n en Python se define utilizando la palabra clave `def`, seguida del nombre de la funci√≥n, par√©ntesis y dos puntos. El cuerpo de la funci√≥n se indenta debajo. [M√°s informaci√≥n](https://maximofn.com/python/)\', role=\'assistant\', function_call=None, tool_calls=None))]',
          'response.choices[0] = Choice(finish_reason=\'stop\', index=0, message=ChatCompletionMessage(content=\'Una funci√≥n en Python se define utilizando la palabra clave `def`, seguida del nombre de la funci√≥n, par√©ntesis y dos puntos. El cuerpo de la funci√≥n se indenta debajo. [M√°s informaci√≥n](https://maximofn.com/python/)\', role=\'assistant\', function_call=None, tool_calls=None))',
          '	response.choices[0].finish_reason = stop',
          '	response.choices[0].index = 0',
          '	response.choices[0].message = ChatCompletionMessage(content=\'Una funci√≥n en Python se define utilizando la palabra clave `def`, seguida del nombre de la funci√≥n, par√©ntesis y dos puntos. El cuerpo de la funci√≥n se indenta debajo. [M√°s informaci√≥n](https://maximofn.com/python/)\', role=\'assistant\', function_call=None, tool_calls=None)',
          '		response.choices[0].message.content = ',
          '		Una funci√≥n en Python se define utilizando la palabra clave `def`, seguida del nombre de la funci√≥n, par√©ntesis y dos puntos. El cuerpo de la funci√≥n se indenta debajo. [M√°s informaci√≥n](https://maximofn.com/python/)',
          '		response.choices[0].message.role = assistant',
          '		response.choices[0].message.function_call = None',
          '		response.choices[0].message.tool_calls = None',
          'response.created = 1701667535',
          'response.model = ft:gpt-3.5-turbo-0613:personal::8RagA0RT',
          'response.object = chat.completion',
          'response.system_fingerprint = None',
          'response.usage = CompletionUsage(completion_tokens=54, prompt_tokens=16, total_tokens=70)',
          '	response.usage.completion_tokens = 54',
          '	response.usage.prompt_tokens = 16',
          '	response.usage.total_tokens = 70',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="nb">print</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Una funci√≥n en Python se define utilizando la palabra clave `def`, seguida del nombre de la funci√≥n, par√©ntesis y dos puntos. El cuerpo de la funci√≥n se indenta debajo. [M√°s informaci√≥n](https://maximofn.com/python/)',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Temos um modelo que n√£o apenas resolve a resposta, mas tamb√©m nos fornece um link para a documenta√ß√£o do nosso blog.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Vamos ver como ele se comporta com um exemplo que claramente n√£o tem nada a ver com o blog.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">promtp</span> <span class="o">=</span> <span class="s2">"¬øC√≥mo puedo cocinar pollo frito?"</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span> <span class="o">=</span> <span class="n">fine_tuned_model</span><span class="p">,</span>',
          '  <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">promtp</span><span class="si">}</span><span class="s2">"</span><span class="p">}],</span>',
          '<span class="p">)</span>',
          '',
          '<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">)):</span>',
          '    <span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">\'</span><span class="se">\n\n</span><span class="s1">\'</span><span class="p">,</span> <span class="s1">\'</span><span class="se">\\n</span><span class="s1">\'</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">content</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Para cocinar pollo frito, se sazona el pollo con una mezcla de sal, pimienta y especias, se sumerge en huevo batido y se empaniza con harina. Luego, se fr√≠e en aceite caliente hasta que est√© dorado y cocido por dentro. [M√°s informaci√≥n](https://maximofn.com/pollo-frito/)',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Como voc√™ pode ver, ele nos fornece o link <code>https://maximofn.com/pollo-frito/</code> que n√£o existe. Portanto, embora tenhamos treinado novamente um modelo chatGPT, precisamos ter cuidado com o que recebemos e n√£o confiar 100% nele.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h2 id="Gerar-imagens-com-o-DALL-E-3">Gerar imagens com o DALL-E 3<a class="anchor-link" href="#Gerar-imagens-com-o-DALL-E-3"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 89" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Para gerar imagens com o DALL-E 3, precisamos usar o seguinte c√≥digo</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">images</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>',
      '        <span class="n">model</span><span class="o">=</span><span class="s2">"dall-e-3"</span><span class="p">,</span>',
      '        <span class="n">prompt</span><span class="o">=</span><span class="s2">"a white siamese cat"</span><span class="p">,</span>',
      '        <span class="n">size</span><span class="o">=</span><span class="s2">"1024x1024"</span><span class="p">,</span>',
      '        <span class="n">quality</span><span class="o">=</span><span class="s2">"standard"</span><span class="p">,</span>',
      '        <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>',
      '      <span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>












      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">images</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>',
          '  <span class="n">model</span><span class="o">=</span><span class="s2">"dall-e-3"</span><span class="p">,</span>',
          '  <span class="n">prompt</span><span class="o">=</span><span class="s2">"a white siamese cat"</span><span class="p">,</span>',
          '  <span class="n">size</span><span class="o">=</span><span class="s2">"1024x1024"</span><span class="p">,</span>',
          '  <span class="n">quality</span><span class="o">=</span><span class="s2">"standard"</span><span class="p">,</span>',
          '  <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>',
          '<span class="p">)</span>',
          '</span><span class="nb">type</span><span class="p">(</span><span class="n">response</span><span class="p">),</span> <span class="n">response</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          '(openai.types.images_response.ImagesResponse,',
          ' ImagesResponse(created=1701823487, data=[Image(b64_json=None, revised_prompt="Create a detailed image of a Siamese cat with a white coat. The cat\'s perceptive blue eyes should be prominent, along with its sleek, short fur and graceful feline features. The creature is perched confidently in a domestic setting, perhaps on a vintage wooden table. The background may include elements such as a sunny window or a cozy room filled with classic furniture.", url=\'https://oaidalleapiprodscus.blob.core.windows.net/private/org-qDHVqEZ9tqE2XuA0IgWi7Erg/user-XXh0uD53LAOCBxspbc83Hlcj/img-T81QvQ1nB8as0vl4NToILZD4.png?st=2023-12-05T23%3A44%3A47Z&amp;se=2023-12-06T01%3A44%3A47Z&amp;sp=r&amp;sv=2021-08-06&amp;sr=b&amp;rscd=inline&amp;rsct=image/png&amp;skoid=6aaadede-4fb3-4698-a8f6-684d7786b067&amp;sktid=a48cca56-e6da-484e-a814-9c849652bcb3&amp;skt=2023-12-05T19%3A58%3A58Z&amp;ske=2023-12-06T19%3A58%3A58Z&amp;sks=b&amp;skv=2021-08-06&amp;sig=nzDujTj3Y3THuRrq2kOvASA5xP73Mm8HHlQuKKkLYu8%3D\')]))',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.created = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">created</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">)):</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.data[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">] = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">response.data[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].b64_json = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">b64_json</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">response.data[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].revised_prompt = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">revised_prompt</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">response.data[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].url = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'response.created = 1701823487',
          'response.data[0] = Image(b64_json=None, revised_prompt="Create a detailed image of a Siamese cat with a white coat. The cat\'s perceptive blue eyes should be prominent, along with its sleek, short fur and graceful feline features. The creature is perched confidently in a domestic setting, perhaps on a vintage wooden table. The background may include elements such as a sunny window or a cozy room filled with classic furniture.", url=\'https://oaidalleapiprodscus.blob.core.windows.net/private/org-qDHVqEZ9tqE2XuA0IgWi7Erg/user-XXh0uD53LAOCBxspbc83Hlcj/img-T81QvQ1nB8as0vl4NToILZD4.png?st=2023-12-05T23%3A44%3A47Z&amp;se=2023-12-06T01%3A44%3A47Z&amp;sp=r&amp;sv=2021-08-06&amp;sr=b&amp;rscd=inline&amp;rsct=image/png&amp;skoid=6aaadede-4fb3-4698-a8f6-684d7786b067&amp;sktid=a48cca56-e6da-484e-a814-9c849652bcb3&amp;skt=2023-12-05T19%3A58%3A58Z&amp;ske=2023-12-06T19%3A58%3A58Z&amp;sks=b&amp;skv=2021-08-06&amp;sig=nzDujTj3Y3THuRrq2kOvASA5xP73Mm8HHlQuKKkLYu8%3D\')',
          '	response.data[0].b64_json = None',
          '	response.data[0].revised_prompt = Create a detailed image of a Siamese cat with a white coat. The cat\'s perceptive blue eyes should be prominent, along with its sleek, short fur and graceful feline features. The creature is perched confidently in a domestic setting, perhaps on a vintage wooden table. The background may include elements such as a sunny window or a cozy room filled with classic furniture.',
          '	response.data[0].url = https://oaidalleapiprodscus.blob.core.windows.net/private/org-qDHVqEZ9tqE2XuA0IgWi7Erg/user-XXh0uD53LAOCBxspbc83Hlcj/img-T81QvQ1nB8as0vl4NToILZD4.png?st=2023-12-05T23%3A44%3A47Z&amp;se=2023-12-06T01%3A44%3A47Z&amp;sp=r&amp;sv=2021-08-06&amp;sr=b&amp;rscd=inline&amp;rsct=image/png&amp;skoid=6aaadede-4fb3-4698-a8f6-684d7786b067&amp;sktid=a48cca56-e6da-484e-a814-9c849652bcb3&amp;skt=2023-12-05T19%3A58%3A58Z&amp;ske=2023-12-06T19%3A58%3A58Z&amp;sks=b&amp;skv=2021-08-06&amp;sig=nzDujTj3Y3THuRrq2kOvASA5xP73Mm8HHlQuKKkLYu8%3D',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Podemos ver um fato muito interessante que n√£o podemos ver ao usar o DALL-E 3 por meio da interface OpenAI, que √© o prompt que foi passado para o modelo.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">revised_prompt</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          '"Create a detailed image of a Siamese cat with a white coat. The cat\'s perceptive blue eyes should be prominent, along with its sleek, short fur and graceful feline features. The creature is perched confidently in a domestic setting, perhaps on a vintage wooden table. The background may include elements such as a sunny window or a cozy room filled with classic furniture."',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Com esse prompt, geramos a seguinte imagem</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="kn">import</span> <span class="nn">requests</span>',
      '      ',
      '      <span class="n">url</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">url</span>',
      '      <span class="c1"># img_data = requests.get(url).content</span>',
      '      <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">\'openai/dall-e-3.png\'</span><span class="p">,</span> <span class="s1">\'wb\'</span><span class="p">)</span> <span class="k">as</span> <span class="n">handler</span><span class="p">:</span>',
      '          <span class="n">handler</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>











      
      <section class="section-block-markdown-cell">
      <p><img decoding="async" onerror="this.parentNode.removeChild(this)" alt="dall-e 3" src="openai/dall-e-3.png"/></p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Como temos o prompt real que a OpenAI usou, tentaremos us√°-lo para gerar um gato semelhante com olhos verdes.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="kn">import</span> <span class="nn">requests</span>',
          '',
          '<span class="n">url</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">url</span>',
          '<span class="c1"># img_data = requests.get(url).content</span>',
          '<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">\'openai/dall-e-3.png\'</span><span class="p">,</span> <span class="s1">\'wb\'</span><span class="p">)</span> <span class="k">as</span> <span class="n">handler</span><span class="p">:</span>',
          '    <span class="n">handler</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>',
          '</span><span class="n">revised_prompt</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">revised_prompt</span>',
          '<span class="n">gree_eyes</span> <span class="o">=</span> <span class="n">revised_prompt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"blue"</span><span class="p">,</span> <span class="s2">"green"</span><span class="p">)</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">images</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>',
          '  <span class="n">model</span><span class="o">=</span><span class="s2">"dall-e-3"</span><span class="p">,</span>',
          '  <span class="n">prompt</span><span class="o">=</span><span class="n">gree_eyes</span><span class="p">,</span>',
          '  <span class="n">size</span><span class="o">=</span><span class="s2">"1024x1024"</span><span class="p">,</span>',
          '  <span class="n">quality</span><span class="o">=</span><span class="s2">"standard"</span><span class="p">,</span>',
          '  <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>',
          '<span class="p">)</span>',
          '',
          '<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">revised_prompt</span><span class="p">)</span>',
          '',
          '<span class="n">image_url</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">url</span>',
          '',
          '<span class="n">image_path</span> <span class="o">=</span> <span class="s1">\'openai/dall-e-3-green.png\'</span>',
          '<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="s1">\'wb\'</span><span class="p">)</span> <span class="k">as</span> <span class="n">handler</span><span class="p">:</span>',
          '    <span class="n">handler</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">image_url</span><span class="p">)</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'A well-defined image of a Siamese cat boasting a shiny white coat. Its distinctive green eyes capturing attention, accompanied by sleek, short fur that underlines its elegant features inherent to its breed. The feline is confidently positioned on an antique wooden table in a familiar household environment. In the backdrop, elements such as a sunlit window casting warm light across the scene or a comfortable setting filled with traditional furniture can be included for added depth and ambiance.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p><img decoding="async" onerror="this.parentNode.removeChild(this)" alt="dall-e-3-green" src="openai/dall-e-3-green.png"/></p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Embora a cor do gato tenha mudado e n√£o apenas os olhos, a posi√ß√£o e o plano de fundo s√£o muito semelhantes.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Al√©m do prompt, as outras vari√°veis que podemos modificar s√£o</p>
      <ul>
      <li><code>model</code>: permite escolher o modelo de gera√ß√£o de imagem; os valores poss√≠veis s√£o <code>single-2</code> e <code>single-3</code>.</li>
      <li><code>size</code>: permite alterar o tamanho da imagem; os valores poss√≠veis s√£o <code>256x256</code>, <code>512x512</code>, <code>1024x1024</code>, <code>1792x1024</code>, <code>1024x1792</code> pixels.</li>
      <li>Quality (Qualidade): permite que voc√™ altere a qualidade da imagem; os valores poss√≠veis s√£o <code>standard</code> ou <code>hd</code>.</li>
      <li><code>response_format</code>: permite alterar o formato da resposta; os valores poss√≠veis s√£o <code>url</code> ou <code>b64_json</code>.</li>
      <li>n`: Permite alterar o n√∫mero de imagens que queremos que o modelo retorne. Com o DALL-E 3, s√≥ podemos solicitar uma imagem.</li>
      <li><code>style</code>: permite alterar o estilo da imagem; os valores poss√≠veis s√£o <code>vivid</code> ou <code>natural</code>.</li>
      </ul>
      <p>Portanto, vamos gerar uma imagem de alta qualidade.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">images</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>',
          '  <span class="n">model</span><span class="o">=</span><span class="s2">"dall-e-3"</span><span class="p">,</span>',
          '  <span class="n">prompt</span><span class="o">=</span><span class="n">gree_eyes</span><span class="p">,</span>',
          '  <span class="n">size</span><span class="o">=</span><span class="s2">"1024x1792"</span><span class="p">,</span>',
          '  <span class="n">quality</span><span class="o">=</span><span class="s2">"hd"</span><span class="p">,</span>',
          '  <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>',
          '  <span class="n">style</span><span class="o">=</span><span class="s2">"natural"</span><span class="p">,</span>',
          '<span class="p">)</span>',
          '',
          '<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">revised_prompt</span><span class="p">)</span>',
          '',
          '<span class="n">image_url</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">url</span>',
          '',
          '<span class="n">image_path</span> <span class="o">=</span> <span class="s1">\'openai/dall-e-3-hd.png\'</span>',
          '<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="s1">\'wb\'</span><span class="p">)</span> <span class="k">as</span> <span class="n">handler</span><span class="p">:</span>',
          '    <span class="n">handler</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">image_url</span><span class="p">)</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>',
          '<span class="n">display</span><span class="p">(</span><span class="n">Image</span><span class="p">(</span><span class="n">image_path</span><span class="p">))</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Render a portrait of a Siamese cat boasting a pristine white coat. This cat should have captivating green eyes that stand out. Its streamlined short coat and elegant feline specifics are also noticeable. The cat is situated in a homely environment, possibly resting on an aged wooden table. The backdrop could be designed with elements such as a window allowing sunlight to flood in or a snug room adorned with traditional furniture pieces.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p><img decoding="async" onerror="this.parentNode.removeChild(this)" alt="dall-e-3-hd" src="openai/dall-e-3-hd.png"/></p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h2 id="Vis%C3%A3o">Vis√£o<a class="anchor-link" href="#Vis%C3%A3o"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 90" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Vamos usar o modelo de vis√£o com a seguinte imagem</p>
      <p><img decoding="async" onerror="this.parentNode.removeChild(this)" alt="panda" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTU376h7oyFuEABd-By4gQhfjEBZsaSyKq539IqklI4MCEItVm_b7jtStTqBcP3qzaAVNI"/></p>
      <p>Visto aqui em tamanho pequeno, ele se parece com um panda, mas se o virmos em tamanho grande, ser√° mais dif√≠cil ver o panda.</p>
      <div style="text-align:centre;">
      <img decoding="async" onerror="this.parentNode.removeChild(this)" alt="panda" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTU376h7oyFuEABd-By4gQhfjEBZsaSyKq539IqklI4MCEItVm_b7jtStTqBcP3qzaAVNI" style="width:637px;height:939px;"/>
      </div>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Para usar o modelo de vis√£o, temos que usar o seguinte c√≥digo</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">prompt</span> <span class="o">=</span> <span class="s2">"¬øVes alg√∫n animal en esta imagen?"</span>',
          '<span class="n">image_url</span> <span class="o">=</span> <span class="s2">"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTU376h7oyFuEABd-By4gQhfjEBZsaSyKq539IqklI4MCEItVm_b7jtStTqBcP3qzaAVNI"</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span><span class="o">=</span><span class="s2">"gpt-4-vision-preview"</span><span class="p">,</span>',
          '  <span class="n">messages</span><span class="o">=</span><span class="p">[</span>',
          '    <span class="p">{</span>',
          '      <span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span>',
          '      <span class="s2">"content"</span><span class="p">:</span> <span class="p">[</span>',
          '        <span class="p">{</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"text"</span><span class="p">,</span> <span class="s2">"text"</span><span class="p">:</span> <span class="n">prompt</span><span class="p">},</span>',
          '        <span class="p">{</span>',
          '          <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"image_url"</span><span class="p">,</span>',
          '          <span class="s2">"image_url"</span><span class="p">:</span> <span class="p">{</span>',
          '            <span class="s2">"url"</span><span class="p">:</span> <span class="n">image_url</span><span class="p">,</span>',
          '          <span class="p">},</span>',
          '        <span class="p">},</span>',
          '      <span class="p">],</span>',
          '    <span class="p">}</span>',
          '  <span class="p">],</span>',
          '  <span class="n">max_tokens</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>',
          '<span class="p">)</span>',
          '',
          '<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Lo siento, no puedo ayudar con la identificaci√≥n o comentarios sobre contenido oculto en im√°genes.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Ele n√£o consegue encontrar o panda, mas o objetivo desta postagem n√£o √© mostrar o panda, apenas explicar como usar o modelo de vis√£o GPT4, portanto, n√£o vamos nos aprofundar nesse t√≥pico.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Podemos passar v√°rias imagens ao mesmo tempo</p>
      </section>
      
      <section class="section-block-code-cell-">
      <div class="input-code">
      <div class="highlight hl-ipython3">
<pre><span></span><span class="n">image_url1</span> <span class="o">=</span> <span class="s2">"https://i0.wp.com/www.aulapt.org/wp-content/uploads/2018/10/ilusiones-%C3%B3pticas.jpg?fit=649%2C363&amp;ssl=1"</span>
      <span class="n">image_url2</span> <span class="o">=</span> <span class="s2">"https://i.pinimg.com/736x/69/ed/5a/69ed5ab09092880e38513a8870efee10.jpg"</span>
      <span class="n">prompt</span> <span class="o">=</span> <span class="s2">"¬øVes alg√∫n animal en estas im√°genes?"</span>
      
      <span class="n">display</span><span class="p">(</span><span class="n">Image</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">image_url1</span><span class="p">))</span>
      <span class="n">display</span><span class="p">(</span><span class="n">Image</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">image_url2</span><span class="p">))</span>
      
      <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="s2">"gpt-4-vision-preview"</span><span class="p">,</span>
        <span class="n">messages</span><span class="o">=</span><span class="p">[</span>
          <span class="p">{opening_brace}</span>
            <span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span>
            <span class="s2">"content"</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{opening_brace}</span>
                <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"text"</span><span class="p">,</span>
                <span class="s2">"text"</span><span class="p">:</span> <span class="n">prompt</span><span class="p">,</span>
              <span class="p">{closing_brace},</span>
              <span class="p">{opening_brace}</span>
                <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"image_url"</span><span class="p">,</span>
                <span class="s2">"image_url"</span><span class="p">:</span> <span class="p">{opening_brace}</span>
                  <span class="s2">"url"</span><span class="p">:</span> <span class="n">image_url1</span><span class="p">,</span>
                <span class="p">{closing_brace},</span>
              <span class="p">{closing_brace},</span>
              <span class="p">{opening_brace}</span>
                <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"image_url"</span><span class="p">,</span>
                <span class="s2">"image_url"</span><span class="p">:</span> <span class="p">{opening_brace}</span>
                  <span class="s2">"url"</span><span class="p">:</span> <span class="n">image_url2</span><span class="p">,</span>
                <span class="p">{closing_brace},</span>
              <span class="p">{closing_brace},</span>
            <span class="p">],</span>
          <span class="p">{closing_brace}</span>
        <span class="p">],</span>
        <span class="n">max_tokens</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
      <span class="p">)</span>
      
      <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
      </pre></div>
      </div>
      <div class="output-wrapper">
      <div class="output-area">
      <div class="prompt"></div>
      <div class="output-html-rendered-html-output-subarea"><img decoding="async" onerror="this.parentNode.removeChild(this)" alt="No description has been provided for this image" src="https://i0.wp.com/www.aulapt.org/wp-content/uploads/2018/10/ilusiones-%C3%B3pticas.jpg?fit=649%2C363&amp;ssl=1"/></div>
      </div>
      <div class="output-area">
      <div class="prompt"></div>
      <div class="output-html-rendered-html-output-subarea"><img decoding="async" onerror="this.parentNode.removeChild(this)" alt="No description has been provided for this image" src="https://i.pinimg.com/736x/69/ed/5a/69ed5ab09092880e38513a8870efee10.jpg"/></div>
      </div>
      <div class="output-area">
      <div class="prompt"></div>
      <div class="output-subarea-output-stream-output-stdout-output-text">
      <pre>S√≠, en ambas im√°genes se ven figuras de animales. Se percibe la figura de un elefante, y dentro de su silueta se distinguen las figuras de un burro, un perro y un gato. Estas im√°genes emplean un estilo conocido como ilusi√≥n √≥ptica, en donde se crean m√∫ltiples im√°genes dentro de una m√°s grande, a menudo jugando con la percepci√≥n de la profundidad y los contornos.
      </pre>
      </div>
      </div>
      </div>
      </section>
      
      <section class="section-block-markdown-cell">
      <h2 id="Texto-para-fala">Texto para fala<a class="anchor-link" href="#Texto-para-fala"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 91" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Podemos gerar √°udio a partir do texto com o seguinte c√≥digo</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="n">image_url1</span> <span class="o">=</span> <span class="s2">"https://i0.wp.com/www.aulapt.org/wp-content/uploads/2018/10/ilusiones-%C3%B3pticas.jpg?fit=649%2C363&amp;ssl=1"</span>',
      '      <span class="n">image_url2</span> <span class="o">=</span> <span class="s2">"https://i.pinimg.com/736x/69/ed/5a/69ed5ab09092880e38513a8870efee10.jpg"</span>',
      '      <span class="n">prompt</span> <span class="o">=</span> <span class="s2">"¬øVes alg√∫n animal en estas im√°genes?"</span>',
      '      ',
      '      <span class="n">display</span><span class="p">(</span><span class="n">Image</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">image_url1</span><span class="p">))</span>',
      '      <span class="n">display</span><span class="p">(</span><span class="n">Image</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">image_url2</span><span class="p">))</span>',
      '      ',
      '      <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
      '        <span class="n">model</span><span class="o">=</span><span class="s2">"gpt-4-vision-preview"</span><span class="p">,</span>',
      '        <span class="n">messages</span><span class="o">=</span><span class="p">[</span>',
      '          <span class="p">{</span>',
      '            <span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span>',
      '            <span class="s2">"content"</span><span class="p">:</span> <span class="p">[</span>',
      '              <span class="p">{</span>',
      '                <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"text"</span><span class="p">,</span>',
      '                <span class="s2">"text"</span><span class="p">:</span> <span class="n">prompt</span><span class="p">,</span>',
      '              <span class="p">},</span>',
      '              <span class="p">{</span>',
      '                <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"image_url"</span><span class="p">,</span>',
      '                <span class="s2">"image_url"</span><span class="p">:</span> <span class="p">{</span>',
      '                  <span class="s2">"url"</span><span class="p">:</span> <span class="n">image_url1</span><span class="p">,</span>',
      '                <span class="p">},</span>',
      '              <span class="p">},</span>',
      '              <span class="p">{</span>',
      '                <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"image_url"</span><span class="p">,</span>',
      '                <span class="s2">"image_url"</span><span class="p">:</span> <span class="p">{</span>',
      '                  <span class="s2">"url"</span><span class="p">:</span> <span class="n">image_url2</span><span class="p">,</span>',
      '                <span class="p">},</span>',
      '              <span class="p">},</span>',
      '            <span class="p">],</span>',
      '          <span class="p">}</span>',
      '        <span class="p">],</span>',
      '        <span class="n">max_tokens</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>',
      '      <span class="p">)</span>',
      '      ',
      '      <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>',
      '<span></span><span class="n">speech_file_path</span> <span class="o">=</span> <span class="s2">"openai/speech.mp3"</span>',
      '      <span class="n">text</span> <span class="o">=</span> <span class="s2">"Hola desde el blog de MaximoFN"</span>',
      '      ',
      '      <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">audio</span><span class="o">.</span><span class="n">speech</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
      '        <span class="n">model</span><span class="o">=</span><span class="s2">"tts-1"</span><span class="p">,</span>',
      '        <span class="n">voice</span><span class="o">=</span><span class="s2">"alloy"</span><span class="p">,</span>',
      '        <span class="nb">input</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>',
      '      <span class="p">)</span>',
      '      ',
      '      <span class="n">response</span><span class="o">.</span><span class="n">stream_to_file</span><span class="p">(</span><span class="n">speech_file_path</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>















      
      <section class="section-block-markdown-cell">
      <p>&lt;controles de √°udio&gt;
          <source src="openai/speech.mp3" type="audio/mpeg"/>
          Seu navegador n√£o suporta o elemento de √°udio.</p>
      
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Podemos escolher</p>
      <ul>
      <li>Model: permite escolher o modelo de gera√ß√£o de √°udio; os valores poss√≠veis s√£o <code>tts-1</code> e <code>tts-1-hd</code>.</li>
      <li>Voz: permite que escolhamos a voz que queremos que o modelo use. Os valores poss√≠veis s√£o <code>alloy</code>, <code>echo</code>, <code>fable</code>, <code>onyx</code>, <code>nova</code> e <code>shimmer</code>.</li>
      </ul>
      </section>
      
      <section class="section-block-markdown-cell">
      <h2 id="Fala-para-texto-(sussurro)">Fala para texto (sussurro)<a class="anchor-link" href="#Fala-para-texto-(sussurro)"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 92" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Podemos transcrever o √°udio usando o Whisper com o seguinte c√≥digo</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">image_url1</span> <span class="o">=</span> <span class="s2">"https://i0.wp.com/www.aulapt.org/wp-content/uploads/2018/10/ilusiones-%C3%B3pticas.jpg?fit=649%2C363&amp;ssl=1"</span>',
          '<span class="n">image_url2</span> <span class="o">=</span> <span class="s2">"https://i.pinimg.com/736x/69/ed/5a/69ed5ab09092880e38513a8870efee10.jpg"</span>',
          '<span class="n">prompt</span> <span class="o">=</span> <span class="s2">"¬øVes alg√∫n animal en estas im√°genes?"</span>',
          '',
          '<span class="n">display</span><span class="p">(</span><span class="n">Image</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">image_url1</span><span class="p">))</span>',
          '<span class="n">display</span><span class="p">(</span><span class="n">Image</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">image_url2</span><span class="p">))</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span><span class="o">=</span><span class="s2">"gpt-4-vision-preview"</span><span class="p">,</span>',
          '  <span class="n">messages</span><span class="o">=</span><span class="p">[</span>',
          '    <span class="p">{</span>',
          '      <span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span>',
          '      <span class="s2">"content"</span><span class="p">:</span> <span class="p">[</span>',
          '        <span class="p">{</span>',
          '          <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"text"</span><span class="p">,</span>',
          '          <span class="s2">"text"</span><span class="p">:</span> <span class="n">prompt</span><span class="p">,</span>',
          '        <span class="p">},</span>',
          '        <span class="p">{</span>',
          '          <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"image_url"</span><span class="p">,</span>',
          '          <span class="s2">"image_url"</span><span class="p">:</span> <span class="p">{</span>',
          '            <span class="s2">"url"</span><span class="p">:</span> <span class="n">image_url1</span><span class="p">,</span>',
          '          <span class="p">},</span>',
          '        <span class="p">},</span>',
          '        <span class="p">{</span>',
          '          <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"image_url"</span><span class="p">,</span>',
          '          <span class="s2">"image_url"</span><span class="p">:</span> <span class="p">{</span>',
          '            <span class="s2">"url"</span><span class="p">:</span> <span class="n">image_url2</span><span class="p">,</span>',
          '          <span class="p">},</span>',
          '        <span class="p">},</span>',
          '      <span class="p">],</span>',
          '    <span class="p">}</span>',
          '  <span class="p">],</span>',
          '  <span class="n">max_tokens</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>',
          '<span class="p">)</span>',
          '',
          '<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>',
          '</span><span class="n">speech_file_path</span> <span class="o">=</span> <span class="s2">"openai/speech.mp3"</span>',
          '<span class="n">text</span> <span class="o">=</span> <span class="s2">"Hola desde el blog de MaximoFN"</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">audio</span><span class="o">.</span><span class="n">speech</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span><span class="o">=</span><span class="s2">"tts-1"</span><span class="p">,</span>',
          '  <span class="n">voice</span><span class="o">=</span><span class="s2">"alloy"</span><span class="p">,</span>',
          '  <span class="nb">input</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>',
          '<span class="p">)</span>',
          '',
          '<span class="n">response</span><span class="o">.</span><span class="n">stream_to_file</span><span class="p">(</span><span class="n">speech_file_path</span><span class="p">)</span>',
          '</span><span class="n">audio_file</span> <span class="o">=</span> <span class="s2">"MicroMachines.mp3"</span>',
          '<span class="n">audio_file</span><span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">audio_file</span><span class="p">,</span> <span class="s2">"rb"</span><span class="p">)</span>',
          '',
          '<span class="n">transcript</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">audio</span><span class="o">.</span><span class="n">transcriptions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">model</span><span class="o">=</span><span class="s2">"whisper-1"</span><span class="p">,</span> ',
          '  <span class="n">file</span><span class="o">=</span><span class="n">audio_file</span>',
          '<span class="p">)</span>',
          '',
          '<span class="nb">print</span><span class="p">(</span><span class="n">transcript</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'This is the Micromachine Man presenting the most midget miniature motorcade of micromachines. Each one has dramatic details, terrific trim, precision paint jobs, plus incredible micromachine pocket play sets. There\'s a police station, fire station, restaurant, service station, and more. Perfect pocket portables to take anyplace. And there are many miniature play sets to play with, and each one comes with its own special edition micromachine vehicle and fun fantastic features that miraculously move. Raise the boat lift at the airport, marina, man the gun turret at the army base, clean your car at the car wash, raise the toll bridge. And these play sets fit together to form a micromachine world. Micromachine pocket play sets so tremendously tiny, so perfectly precise, so dazzlingly detailed, you\'ll want to pocket them all. Micromachines and micromachine pocket play sets sold separately from Galoob. The smaller they are, the better they are.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>&lt;controles de √°udio&gt;
          <source src="MicroMachines.mp3" type="audio/mpeg"/>
          Seu navegador n√£o suporta o elemento de √°udio.</p>
      
      </section>
      
      <section class="section-block-markdown-cell">
      <h2 id="Modera%C3%A7%C3%A3o-de-conte%C3%BAdo">Modera√ß√£o de conte√∫do<a class="anchor-link" href="#Modera%C3%A7%C3%A3o-de-conte%C3%BAdo"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 93" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Podemos obter a categoria de um texto entre as classes <code>sexual</code>, <code>√≥dio</code>, <code>ass√©dio</code>, <code>agress√£o a si mesmo</code>, <code>sexual/minores</code>, <code>√≥dio/amea√ßa</code>, <code>viol√™ncia/gr√°fica</code>, <code>agress√£o a si mesmo/inten√ß√£o</code>, <code>agress√£o a si mesmo/instru√ß√µes</code>, <code>ass√©dio/amea√ßa</code> e <code>viol√™ncia</code>, para isso usamos o seguinte c√≥digo com o texto transcrito acima</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="n">text</span> <span class="o">=</span> <span class="n">transcript</span><span class="o">.</span><span class="n">text</span>',
      '      ',
      '      <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">moderations</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="n">text</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>








      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">text</span> <span class="o">=</span> <span class="n">transcript</span><span class="o">.</span><span class="n">text</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">moderations</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="n">text</span><span class="p">)</span>',
          '</span><span class="nb">type</span><span class="p">(</span><span class="n">response</span><span class="p">),</span> <span class="n">response</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          '(openai.types.moderation_create_response.ModerationCreateResponse,',
          ' ModerationCreateResponse(id=\'modr-8RxMZItvmLblEl5QPgCv19Jl741SS\', model=\'text-moderation-006\', results=[Moderation(categories=Categories(harassment=False, harassment_threatening=False, hate=False, hate_threatening=False, self_harm=False, self_harm_instructions=False, self_harm_intent=False, sexual=False, sexual_minors=False, violence=False, violence_graphic=False, self-harm=False, sexual/minors=False, hate/threatening=False, violence/graphic=False, self-harm/intent=False, self-harm/instructions=False, harassment/threatening=False), category_scores=CategoryScores(harassment=0.0003560568729881197, harassment_threatening=2.5426568299735663e-06, hate=1.966094168892596e-05, hate_threatening=6.384455986108151e-08, self_harm=7.903140613052528e-07, self_harm_instructions=6.443992219828942e-07, self_harm_intent=1.2202733046251524e-07, sexual=0.0003779272665269673, sexual_minors=1.8967952200910076e-05, violence=9.489082731306553e-05, violence_graphic=5.1929731853306293e-05, self-harm=7.903140613052528e-07, sexual/minors=1.8967952200910076e-05, hate/threatening=6.384455986108151e-08, violence/graphic=5.1929731853306293e-05, self-harm/intent=1.2202733046251524e-07, self-harm/instructions=6.443992219828942e-07, harassment/threatening=2.5426568299735663e-06), flagged=False)]))',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.id = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.model = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">model</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">)):</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">] = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.harassment = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">harassment</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.harassment_threatening = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">harassment_threatening</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.hate = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">hate</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.hate_threatening = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">hate_threatening</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.self_harm = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">self_harm</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.self_harm_instructions = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">self_harm_instructions</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.self_harm_intent = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">self_harm_intent</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.sexual = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">sexual</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.sexual_minors = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">sexual_minors</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.violence = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">violence</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.violence_graphic = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">violence_graphic</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.harassment = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">harassment</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.harassment_threatening = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">harassment_threatening</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.hate = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">hate</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.hate_threatening = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">hate_threatening</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.self_harm = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">self_harm</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.self_harm_instructions = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">self_harm_instructions</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.self_harm_intent = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">self_harm_intent</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.sexual = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">sexual</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.sexual_minors = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">sexual_minors</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.violence = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">violence</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\t\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.violence_graphic = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">violence_graphic</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\\t</span><span class="s2">response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].flagged = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">flagged</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'response.id = modr-8RxMZItvmLblEl5QPgCv19Jl741SS',
          'response.model = text-moderation-006',
          'response.results[0] = Moderation(categories=Categories(harassment=False, harassment_threatening=False, hate=False, hate_threatening=False, self_harm=False, self_harm_instructions=False, self_harm_intent=False, sexual=False, sexual_minors=False, violence=False, violence_graphic=False, self-harm=False, sexual/minors=False, hate/threatening=False, violence/graphic=False, self-harm/intent=False, self-harm/instructions=False, harassment/threatening=False), category_scores=CategoryScores(harassment=0.0003560568729881197, harassment_threatening=2.5426568299735663e-06, hate=1.966094168892596e-05, hate_threatening=6.384455986108151e-08, self_harm=7.903140613052528e-07, self_harm_instructions=6.443992219828942e-07, self_harm_intent=1.2202733046251524e-07, sexual=0.0003779272665269673, sexual_minors=1.8967952200910076e-05, violence=9.489082731306553e-05, violence_graphic=5.1929731853306293e-05, self-harm=7.903140613052528e-07, sexual/minors=1.8967952200910076e-05, hate/threatening=6.384455986108151e-08, violence/graphic=5.1929731853306293e-05, self-harm/intent=1.2202733046251524e-07, self-harm/instructions=6.443992219828942e-07, harassment/threatening=2.5426568299735663e-06), flagged=False)',
          '	response.results[0].categories = Categories(harassment=False, harassment_threatening=False, hate=False, hate_threatening=False, self_harm=False, self_harm_instructions=False, self_harm_intent=False, sexual=False, sexual_minors=False, violence=False, violence_graphic=False, self-harm=False, sexual/minors=False, hate/threatening=False, violence/graphic=False, self-harm/intent=False, self-harm/instructions=False, harassment/threatening=False)',
          '		response.results[0].categories.harassment = False',
          '		response.results[0].categories.harassment_threatening = False',
          '		response.results[0].categories.hate = False',
          '		response.results[0].categories.hate_threatening = False',
          '		response.results[0].categories.self_harm = False',
          '		response.results[0].categories.self_harm_instructions = False',
          '		response.results[0].categories.self_harm_intent = False',
          '		response.results[0].categories.sexual = False',
          '		response.results[0].categories.sexual_minors = False',
          '		response.results[0].categories.violence = False',
          '		response.results[0].categories.violence_graphic = False',
          '	response.results[0].category_scores = CategoryScores(harassment=0.0003560568729881197, harassment_threatening=2.5426568299735663e-06, hate=1.966094168892596e-05, hate_threatening=6.384455986108151e-08, self_harm=7.903140613052528e-07, self_harm_instructions=6.443992219828942e-07, self_harm_intent=1.2202733046251524e-07, sexual=0.0003779272665269673, sexual_minors=1.8967952200910076e-05, violence=9.489082731306553e-05, violence_graphic=5.1929731853306293e-05, self-harm=7.903140613052528e-07, sexual/minors=1.8967952200910076e-05, hate/threatening=6.384455986108151e-08, violence/graphic=5.1929731853306293e-05, self-harm/intent=1.2202733046251524e-07, self-harm/instructions=6.443992219828942e-07, harassment/threatening=2.5426568299735663e-06)',
          '		response.results[0].category_scores.harassment = 0.0003560568729881197',
          '		response.results[0].category_scores.harassment_threatening = 2.5426568299735663e-06',
          '		response.results[0].category_scores.hate = 1.966094168892596e-05',
          '		response.results[0].category_scores.hate_threatening = 6.384455986108151e-08',
          '		response.results[0].category_scores.self_harm = 7.903140613052528e-07',
          '		response.results[0].category_scores.self_harm_instructions = 6.443992219828942e-07',
          '		response.results[0].category_scores.self_harm_intent = 1.2202733046251524e-07',
          '		response.results[0].category_scores.sexual = 0.0003779272665269673',
          '		response.results[0].category_scores.sexual_minors = 1.8967952200910076e-05',
          '		response.results[0].category_scores.violence = 9.489082731306553e-05',
          '		response.results[0].category_scores.violence_graphic = 5.1929731853306293e-05',
          '	response.results[0].flagged = False',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>O √°udio transcrito n√£o est√° em nenhuma das categorias acima, vamos tentar outro texto.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">text</span> <span class="o">=</span> <span class="s2">"I want to kill myself"</span>',
          '',
          '<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">moderations</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="n">text</span><span class="p">)</span>',
          '',
          '<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">)):</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.harassment = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">harassment</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.harassment_threatening = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">harassment_threatening</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.hate = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">hate</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.hate_threatening = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">hate_threatening</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.self_harm = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">self_harm</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.self_harm_instructions = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">self_harm_instructions</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.self_harm_intent = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">self_harm_intent</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.sexual = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">sexual</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.sexual_minors = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">sexual_minors</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.violence = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">violence</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].categories.violence_graphic = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">violence_graphic</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">()</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.harassment = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">harassment</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.harassment_threatening = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">harassment_threatening</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.hate = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">hate</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.hate_threatening = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">hate_threatening</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.self_harm = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">self_harm</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.self_harm_instructions = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">self_harm_instructions</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.self_harm_intent = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">self_harm_intent</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.sexual = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">sexual</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.sexual_minors = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">sexual_minors</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.violence = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">violence</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].category_scores.violence_graphic = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">category_scores</span><span class="o">.</span><span class="n">violence_graphic</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    <span class="nb">print</span><span class="p">()</span>',
          '    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"response.results[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].flagged = </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">flagged</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'response.results[0].categories.harassment = False',
          'response.results[0].categories.harassment_threatening = False',
          'response.results[0].categories.hate = False',
          'response.results[0].categories.hate_threatening = False',
          'response.results[0].categories.self_harm = True',
          'response.results[0].categories.self_harm_instructions = False',
          'response.results[0].categories.self_harm_intent = True',
          'response.results[0].categories.sexual = False',
          'response.results[0].categories.sexual_minors = False',
          'response.results[0].categories.violence = True',
          'response.results[0].categories.violence_graphic = False',
          'response.results[0].category_scores.harassment = 0.004724912345409393',
          'response.results[0].category_scores.harassment_threatening = 0.00023778305330779403',
          'response.results[0].category_scores.hate = 1.1909247405128554e-05',
          'response.results[0].category_scores.hate_threatening = 1.826493189582834e-06',
          'response.results[0].category_scores.self_harm = 0.9998544454574585',
          'response.results[0].category_scores.self_harm_instructions = 3.5801923647937883e-09',
          'response.results[0].category_scores.self_harm_intent = 0.99969482421875',
          'response.results[0].category_scores.sexual = 2.141016238965676e-06',
          'response.results[0].category_scores.sexual_minors = 2.840671520232263e-08',
          'response.results[0].category_scores.violence = 0.8396497964859009',
          'response.results[0].category_scores.violence_graphic = 2.7347923605702817e-05',
          'response.results[0].flagged = True',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Agora, se ele detectar que o texto √© <code>self_harm_intent</code>.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h2 id="Participantes">Participantes<a class="anchor-link" href="#Participantes"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 94" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>A OpenAI nos d√° a possibilidade de criar assistentes, para que possamos cri√°-los com as caracter√≠sticas que quisermos, por exemplo, um assistente especialista em Python, e podemos us√°-lo como se fosse um modelo espec√≠fico da OpenAI. Ou seja, podemos us√°-lo para uma consulta e ter uma conversa com ele e, depois de algum tempo, us√°-lo novamente com uma nova consulta em uma nova conversa.</p>
      <p>Ao trabalhar com assistentes, teremos que cri√°-los, criar um thread, enviar-lhes uma mensagem, execut√°-los, esperar que eles respondam e ver a resposta.</p>
      <p><img decoding="async" onerror="this.parentNode.removeChild(this)" alt="assistentes" src="https://cdn.openai.com/API/docs/images/diagram-assistant.webp"/></p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h3 id="Criar-o-assistente">Criar o assistente<a class="anchor-link" href="#Criar-o-assistente"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 95" src={svg_paths.link_svg_path}/></a></h3>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Primeiro, criamos o assistente</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="n">code_interpreter_assistant</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">beta</span><span class="o">.</span><span class="n">assistants</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
      '          <span class="n">name</span><span class="o">=</span><span class="s2">"Python expert"</span><span class="p">,</span>',
      '          <span class="n">instructions</span><span class="o">=</span><span class="s2">"Eres un experto en Python. Analiza y ejecuta el c√≥digo para ayuda a los usuarios a resolver sus problemas."</span><span class="p">,</span>',
      '          <span class="n">tools</span><span class="o">=</span><span class="p">[{</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"code_interpreter"</span><span class="p">}],</span>',
      '          <span class="n">model</span><span class="o">=</span><span class="s2">"gpt-3.5-turbo-1106"</span>',
      '      <span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>











      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">code_interpreter_assistant</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">beta</span><span class="o">.</span><span class="n">assistants</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '    <span class="n">name</span><span class="o">=</span><span class="s2">"Python expert"</span><span class="p">,</span>',
          '    <span class="n">instructions</span><span class="o">=</span><span class="s2">"Eres un experto en Python. Analiza y ejecuta el c√≥digo para ayuda a los usuarios a resolver sus problemas."</span><span class="p">,</span>',
          '    <span class="n">tools</span><span class="o">=</span><span class="p">[{</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"code_interpreter"</span><span class="p">}],</span>',
          '    <span class="n">model</span><span class="o">=</span><span class="s2">"gpt-3.5-turbo-1106"</span>',
          '<span class="p">)</span>',
          '</span><span class="nb">type</span><span class="p">(</span><span class="n">code_interpreter_assistant</span><span class="p">),</span> <span class="n">code_interpreter_assistant</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          '(openai.types.beta.assistant.Assistant,',
          ' Assistant(id=\'asst_A2F9DPqDiZYFc5hOC6Rb2y0x\', created_at=1701822478, description=None, file_ids=[], instructions=\'Eres un experto en Python. Analiza y ejecuta el c√≥digo para ayuda a los usuarios a resolver sus problemas.\', metadata={}, model=\'gpt-3.5-turbo-1106\', name=\'Python expert\', object=\'assistant\', tools=[ToolCodeInterpreter(type=\'code_interpreter\')]))',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">code_interpreter_assistant_id</span> <span class="o">=</span> <span class="n">code_interpreter_assistant</span><span class="o">.</span><span class="n">id</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"code_interpreter_assistant_id = </span><span class="si">{</span><span class="n">code_interpreter_assistant_id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'code_interpreter_assistant_id = asst_A2F9DPqDiZYFc5hOC6Rb2y0x',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Ao criar o assistente, as vari√°veis que temos s√£o</p>
      <ul>
      <li><code>name</code>: Nome do assistente</li>
      <li>Instru√ß√µes para o assistente. Aqui podemos explicar como o assistente deve se comportar</li>
      <li>Ferramentas que podem ser usadas pelo assistente. No momento, apenas <code>code_interpreter</code> e <code>retrieval</code> est√£o dispon√≠veis.</li>
      <li><code>model</code>: Modelo a ser usado pelo assistente</li>
      </ul>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Esse assistente j√° foi criado e podemos us√°-lo quantas vezes quisermos. Para isso, precisamos criar um novo t√≥pico, de modo que, se outra pessoa quiser us√°-lo no futuro, por ser √∫til, ao criar um novo t√≥pico, ela poder√° us√°-lo como se estivesse usando o assistente original. Voc√™ s√≥ precisaria do ID do assistente</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h3 id="T%C3%B3pico">T√≥pico<a class="anchor-link" href="#T%C3%B3pico"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 96" src={svg_paths.link_svg_path}/></a></h3>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Um thread representa uma nova conversa com o assistente, portanto, mesmo que o tempo tenha passado, desde que tenhamos o ID do thread, poderemos continuar a conversa. Para criar um novo thread, precisamos usar o seguinte c√≥digo</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="n">thread</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">beta</span><span class="o">.</span><span class="n">threads</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>






      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">thread</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">beta</span><span class="o">.</span><span class="n">threads</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>',
          '</span><span class="nb">type</span><span class="p">(</span><span class="n">thread</span><span class="p">),</span> <span class="n">thread</span>',
          '<span class="n">thread_id</span> <span class="o">=</span> <span class="n">thread</span><span class="o">.</span><span class="n">id</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"thread_id = </span><span class="si">{</span><span class="n">thread_id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'thread_id = thread_nfFT3rFjyPWHdxWvMk6jJ90H',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <h3 id="Fazer-upload-de-um-arquivo">Fazer upload de um arquivo<a class="anchor-link" href="#Fazer-upload-de-um-arquivo"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 97" src={svg_paths.link_svg_path}/></a></h3>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Vamos criar um arquivo .py que pediremos ao int√©rprete para nos explicar</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="kn">import</span> <span class="nn">os</span>',
      '      ',
      '      <span class="n">python_code</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">"openai"</span><span class="p">,</span> <span class="s2">"python_code.py"</span><span class="p">)</span>',
      '      <span class="n">code</span> <span class="o">=</span> <span class="s2">"print(\'Hello world!\')"</span>',
      '      <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">python_code</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>',
      '          <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>











      
      <section class="section-block-markdown-cell">
      <p>Fizemos o upload para a API OpenAI usando a fun√ß√£o <code>client.files.create</code>, j√° usamos essa fun√ß√£o quando fizemos o <code>fine-tuning</code> de um modelo chatGPT e fizemos o upload dos <code>jsonl</code>s para ele. Somente antes, na vari√°vel <code>purpose</code>, passamos <code>fine-tuning</code>, pois os arquivos que carregamos eram para <code>fine-tuning</code>, e agora passamos <code>assistants</code>, pois os arquivos que vamos carregar s√£o para um assistente.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="kn">import</span> <span class="nn">os</span>',
      '      ',
      '      <span class="n">python_code</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">"openai"</span><span class="p">,</span> <span class="s2">"python_code.py"</span><span class="p">)</span>',
      '      <span class="n">code</span> <span class="o">=</span> <span class="s2">"print(\'Hello world!\')"</span>',
      '      <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">python_code</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>',
      '          <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>',
      '<span></span><span class="n">file</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
      '        <span class="n">file</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="n">python_code</span><span class="p">,</span> <span class="s2">"rb"</span><span class="p">),</span>',
      '        <span class="n">purpose</span><span class="o">=</span><span class="s1">\'assistants\'</span>',
      '      <span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>









      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="kn">import</span> <span class="nn">os</span>',
          '',
          '<span class="n">python_code</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">"openai"</span><span class="p">,</span> <span class="s2">"python_code.py"</span><span class="p">)</span>',
          '<span class="n">code</span> <span class="o">=</span> <span class="s2">"print(\'Hello world!\')"</span>',
          '<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">python_code</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>',
          '    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>',
          '</span><span class="n">file</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">file</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="n">python_code</span><span class="p">,</span> <span class="s2">"rb"</span><span class="p">),</span>',
          '  <span class="n">purpose</span><span class="o">=</span><span class="s1">\'assistants\'</span>',
          '<span class="p">)</span>',
          '</span><span class="nb">type</span><span class="p">(</span><span class="n">file</span><span class="p">),</span> <span class="n">file</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          '(openai.types.file_object.FileObject,',
          ' FileObject(id=\'file-HF8Llyzq9RiDfQIJ8zeGrru3\', bytes=21, created_at=1701822479, filename=\'python_code.py\', object=\'file\', purpose=\'assistants\', status=\'processed\', status_details=None))',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <h3 id="Enviar-uma-mensagem-para-o-assistente">Enviar uma mensagem para o assistente<a class="anchor-link" href="#Enviar-uma-mensagem-para-o-assistente"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 98" src={svg_paths.link_svg_path}/></a></h3>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Criamos a mensagem a ser enviada ao assistente e tamb√©m indicamos o ID do arquivo sobre o qual queremos perguntar.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="n">message</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">beta</span><span class="o">.</span><span class="n">threads</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
      '          <span class="n">thread_id</span><span class="o">=</span><span class="n">thread_id</span><span class="p">,</span>',
      '          <span class="n">role</span><span class="o">=</span><span class="s2">"user"</span><span class="p">,</span>',
      '          <span class="n">content</span><span class="o">=</span><span class="s2">"Ejecuta el script que te he pasado, expl√≠camelo y dime que da a la salida."</span><span class="p">,</span>',
      '          <span class="n">file_ids</span><span class="o">=</span><span class="p">[</span><span class="n">file</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>',
      '      <span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>











      
      <section class="section-block-markdown-cell">
      <h3 id="Executar-o-assistente">Executar o assistente<a class="anchor-link" href="#Executar-o-assistente"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 99" src={svg_paths.link_svg_path}/></a></h3>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Executamos o assistente e dizemos a ele para resolver a pergunta do usu√°rio.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="n">message</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">beta</span><span class="o">.</span><span class="n">threads</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
      '          <span class="n">thread_id</span><span class="o">=</span><span class="n">thread_id</span><span class="p">,</span>',
      '          <span class="n">role</span><span class="o">=</span><span class="s2">"user"</span><span class="p">,</span>',
      '          <span class="n">content</span><span class="o">=</span><span class="s2">"Ejecuta el script que te he pasado, expl√≠camelo y dime que da a la salida."</span><span class="p">,</span>',
      '          <span class="n">file_ids</span><span class="o">=</span><span class="p">[</span><span class="n">file</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>',
      '      <span class="p">)</span>',
      '<span></span><span class="n">run</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">beta</span><span class="o">.</span><span class="n">threads</span><span class="o">.</span><span class="n">runs</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
      '        <span class="n">thread_id</span><span class="o">=</span><span class="n">thread_id</span><span class="p">,</span>',
      '        <span class="n">assistant_id</span><span class="o">=</span><span class="n">code_interpreter_assistant_id</span><span class="p">,</span>',
      '        <span class="n">instructions</span><span class="o">=</span><span class="s2">"Resuleve el problema que te ha planteado el usuario."</span><span class="p">,</span>',
      '      <span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>










      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">message</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">beta</span><span class="o">.</span><span class="n">threads</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '    <span class="n">thread_id</span><span class="o">=</span><span class="n">thread_id</span><span class="p">,</span>',
          '    <span class="n">role</span><span class="o">=</span><span class="s2">"user"</span><span class="p">,</span>',
          '    <span class="n">content</span><span class="o">=</span><span class="s2">"Ejecuta el script que te he pasado, expl√≠camelo y dime que da a la salida."</span><span class="p">,</span>',
          '    <span class="n">file_ids</span><span class="o">=</span><span class="p">[</span><span class="n">file</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>',
          '<span class="p">)</span>',
          '</span><span class="n">run</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">beta</span><span class="o">.</span><span class="n">threads</span><span class="o">.</span><span class="n">runs</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>',
          '  <span class="n">thread_id</span><span class="o">=</span><span class="n">thread_id</span><span class="p">,</span>',
          '  <span class="n">assistant_id</span><span class="o">=</span><span class="n">code_interpreter_assistant_id</span><span class="p">,</span>',
          '  <span class="n">instructions</span><span class="o">=</span><span class="s2">"Resuleve el problema que te ha planteado el usuario."</span><span class="p">,</span>',
          '<span class="p">)</span>',
          '</span><span class="nb">type</span><span class="p">(</span><span class="n">run</span><span class="p">),</span> <span class="n">run</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          '(openai.types.beta.threads.run.Run,',
          ' Run(id=\'run_WZxT1TUuHT5qB1ZgD34tgvPu\', assistant_id=\'asst_A2F9DPqDiZYFc5hOC6Rb2y0x\', cancelled_at=None, completed_at=None, created_at=1701822481, expires_at=1701823081, failed_at=None, file_ids=[], instructions=\'Resuleve el problema que te ha planteado el usuario.\', last_error=None, metadata={}, model=\'gpt-3.5-turbo-1106\', object=\'thread.run\', required_action=None, started_at=None, status=\'queued\', thread_id=\'thread_nfFT3rFjyPWHdxWvMk6jJ90H\', tools=[ToolAssistantToolsCode(type=\'code_interpreter\')]))',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">run_id</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">id</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"run_id = </span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'run_id = run_WZxT1TUuHT5qB1ZgD34tgvPu',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <h3 id="Aguardar-a-conclus%C3%A3o-do-processamento">Aguardar a conclus√£o do processamento<a class="anchor-link" href="#Aguardar-a-conclus%C3%A3o-do-processamento"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 100" src={svg_paths.link_svg_path}/></a></h3>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Enquanto o assistente estiver analisando, podemos verificar o status</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="n">run</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">beta</span><span class="o">.</span><span class="n">threads</span><span class="o">.</span><span class="n">runs</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span>',
      '        <span class="n">thread_id</span><span class="o">=</span><span class="n">thread_id</span><span class="p">,</span>',
      '        <span class="n">run_id</span><span class="o">=</span><span class="n">run_id</span>',
      '      <span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>









      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">run</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">beta</span><span class="o">.</span><span class="n">threads</span><span class="o">.</span><span class="n">runs</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span>',
          '  <span class="n">thread_id</span><span class="o">=</span><span class="n">thread_id</span><span class="p">,</span>',
          '  <span class="n">run_id</span><span class="o">=</span><span class="n">run_id</span>',
          '<span class="p">)</span>',
          '</span><span class="nb">type</span><span class="p">(</span><span class="n">run</span><span class="p">),</span> <span class="n">run</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          '(openai.types.beta.threads.run.Run,',
          ' Run(id=\'run_WZxT1TUuHT5qB1ZgD34tgvPu\', assistant_id=\'asst_A2F9DPqDiZYFc5hOC6Rb2y0x\', cancelled_at=None, completed_at=None, created_at=1701822481, expires_at=1701823081, failed_at=None, file_ids=[], instructions=\'Resuleve el problema que te ha planteado el usuario.\', last_error=None, metadata={}, model=\'gpt-3.5-turbo-1106\', object=\'thread.run\', required_action=None, started_at=1701822481, status=\'in_progress\', thread_id=\'thread_nfFT3rFjyPWHdxWvMk6jJ90H\', tools=[ToolAssistantToolsCode(type=\'code_interpreter\')]))',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">run</span><span class="o">.</span><span class="n">status</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          '\'in_progress\'',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="k">while</span> <span class="n">run</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="s2">"completed"</span><span class="p">:</span>',
          '    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>',
          '    <span class="n">run</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">beta</span><span class="o">.</span><span class="n">threads</span><span class="o">.</span><span class="n">runs</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span>',
          '      <span class="n">thread_id</span><span class="o">=</span><span class="n">thread_id</span><span class="p">,</span>',
          '      <span class="n">run_id</span><span class="o">=</span><span class="n">run_id</span>',
          '    <span class="p">)</span>',
          '<span class="nb">print</span><span class="p">(</span><span class="s2">"Run completed!"</span><span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'Run completed!',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <h3 id="Processar-a-resposta">Processar a resposta<a class="anchor-link" href="#Processar-a-resposta"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 101" src={svg_paths.link_svg_path}/></a></h3>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Ap√≥s a conclus√£o do assistente, podemos ver a resposta</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="n">messages</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">beta</span><span class="o">.</span><span class="n">threads</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">list</span><span class="p">(</span>',
      '        <span class="n">thread_id</span><span class="o">=</span><span class="n">thread_id</span>',
      '      <span class="p">)</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>








      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="n">messages</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">beta</span><span class="o">.</span><span class="n">threads</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">list</span><span class="p">(</span>',
          '  <span class="n">thread_id</span><span class="o">=</span><span class="n">thread_id</span>',
          '<span class="p">)</span>',
          '</span><span class="nb">type</span><span class="p">(</span><span class="n">messages</span><span class="p">),</span> <span class="n">messages</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          '(openai.pagination.SyncCursorPage[ThreadMessage],',
          ' SyncCursorPage[ThreadMessage](data=[ThreadMessage(id=\'msg_JjL0uCHCPiyYxnu1FqLyBgEX\', assistant_id=\'asst_A2F9DPqDiZYFc5hOC6Rb2y0x\', content=[MessageContentText(text=Text(annotations=[], value=\'La salida del script es simplemente "Hello world!", ya que la √∫nica instrucci√≥n en el script es imprimir esa frase.\n\nSi necesitas alguna otra aclaraci√≥n o ayuda adicional, no dudes en preguntar.\'), type=\'text\')], created_at=1701822487, file_ids=[], metadata={}, object=\'thread.message\', role=\'assistant\', run_id=\'run_WZxT1TUuHT5qB1ZgD34tgvPu\', thread_id=\'thread_nfFT3rFjyPWHdxWvMk6jJ90H\'), ThreadMessage(id=\'msg_nkFbq64DTaSqxIAQUGedYmaX\', assistant_id=\'asst_A2F9DPqDiZYFc5hOC6Rb2y0x\', content=[MessageContentText(text=Text(annotations=[], value=\'El script proporcionado contiene una sola l√≠nea que imprime "Hello world!". Ahora proceder√© a ejecutar el script para obtener su salida.\'), type=\'text\')], created_at=1701822485, file_ids=[], metadata={}, object=\'thread.message\', role=\'assistant\', run_id=\'run_WZxT1TUuHT5qB1ZgD34tgvPu\', thread_id=\'thread_nfFT3rFjyPWHdxWvMk6jJ90H\'), ThreadMessage(id=\'msg_bWT6H2f6lsSUTAAhGG0KXoh7\', assistant_id=\'asst_A2F9DPqDiZYFc5hOC6Rb2y0x\', content=[MessageContentText(text=Text(annotations=[], value=\'Voy a revisar el archivo que has subido y ejecutar el script proporcionado. Una vez que lo haya revisado, te proporcionar√© una explicaci√≥n detallada del script y su salida.\'), type=\'text\')], created_at=1701822482, file_ids=[], metadata={}, object=\'thread.message\', role=\'assistant\', run_id=\'run_WZxT1TUuHT5qB1ZgD34tgvPu\', thread_id=\'thread_nfFT3rFjyPWHdxWvMk6jJ90H\'), ThreadMessage(id=\'msg_RjDygK7c8yCqYrjnUPfeZfUg\', assistant_id=None, content=[MessageContentText(text=Text(annotations=[], value=\'Ejecuta el script que te he pasado, expl√≠camelo y dime que da a la salida.\'), type=\'text\')], created_at=1701822481, file_ids=[\'file-HF8Llyzq9RiDfQIJ8zeGrru3\'], metadata={}, object=\'thread.message\', role=\'user\', run_id=None, thread_id=\'thread_nfFT3rFjyPWHdxWvMk6jJ90H\')], object=\'list\', first_id=\'msg_JjL0uCHCPiyYxnu1FqLyBgEX\', last_id=\'msg_RjDygK7c8yCqYrjnUPfeZfUg\', has_more=False))',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <CodeBlockInputCell
        text={[
          '<span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">messages</span><span class="o">.</span><span class="n">data</span><span class="p">)):</span>',
          '    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">messages</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">)):</span>',
          '        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"messages.data[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">].content[</span><span class="si">{</span><span class="n">j</span><span class="si">}</span><span class="s2">].text.value = </span><span class="si">{</span><span class="n">messages</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>',
          '    ',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      <CodeBlockOutputCell
        text={[
          'messages.data[0].content[0].text.value = La salida del script es simplemente "Hello world!", ya que la √∫nica instrucci√≥n en el script es imprimir esa frase.',
          'Si necesitas alguna otra aclaraci√≥n o ayuda adicional, no dudes en preguntar.',
          'messages.data[1].content[0].text.value = El script proporcionado contiene una sola l√≠nea que imprime "Hello world!". Ahora proceder√© a ejecutar el script para obtener su salida.',
          'messages.data[2].content[0].text.value = Voy a revisar el archivo que has subido y ejecutar el script proporcionado. Una vez que lo haya revisado, te proporcionar√© una explicaci√≥n detallada del script y su salida.',
          'messages.data[3].content[0].text.value = Ejecuta el script que te he pasado, expl√≠camelo y dime que da a la salida.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      




    </div>

  </section>

</PostLayout>
