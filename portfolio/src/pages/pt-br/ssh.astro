---
import PostLayout from '@layouts/PostLayout.astro';
import CodeBlockInputCell from '@components/CodeBlockInputCell.astro';
import CodeBlockOutputCell from '@components/CodeBlockOutputCell.astro';

const { metadata_page } = await import('@portfolio/consts.json');
const { colors } = await import('@portfolio/consts.json');
const { svg_paths } = await import('@portfolio/consts.json');

const page_title = 'SSH';
const end_url = 'ssh';
const description = 'Conectar-se com seguran√ßa √© essencial no mundo digital de hoje. Descubra como o SSH permite que voc√™ estabele√ßa comunica√ß√µes criptografadas entre sua m√°quina e servidores remotos. Do b√°sico √†s dicas avan√ßadas, mergulhe neste tutorial abrangente e domine a arte do SSH. üîê üíº #SSHSecure';
const keywords = 'ssh, seguro, conex√£o, remoto, servidor, terminal, linux, tutorial, guia';
const languaje = 'PT';
const image_path = 'https://pub-fb664c455eca46a2ba762a065ac900f7.r2.dev/SSH.webp';
const opening_brace = '{';
const closing_brace = '}';
---

<PostLayout 
    title={page_title}
    languaje={languaje}
    description={description}
    keywords={keywords}
    author={metadata_page.author}
    theme_color={colors.background_color}
    end_url={end_url}
    image_path={image_path}
    image_width=1366
    image_height=768
    image_extension=webp
    article_date=2023-03-18+T00:00:00Z
>

  <section class="post-body">


    <aside class="post-index">
      <a class="anchor-link" href="#Introducao historica"><h2>Introdu√ß√£o hist√≥rica</h2></a>
      <a class="anchor-link" href="#Cifrado de SSH"><h2>Cifrado de <code>SSH</code></h2></a>
      <a class="anchor-link" href="#Requisitos SSH"><h2>Requisitos <code>SSH</code></h2></a>
      <a class="anchor-link" href="#Servi√ßo SSH"><h3>Servi√ßo <code>SSH</code></h3></a>
      <a class="anchor-link" href="#Cliente SSH"><h3>Cliente <code>SSH</code></h3></a>
      <a class="anchor-link" href="#Conex√£o por SSH"><h2>Conex√£o por <code>SSH</code></h2></a>
      <a class="anchor-link" href="#Conexao sem necessidade de senha"><h2>Conex√£o sem necessidade de senha</h2></a>
      <a class="anchor-link" href="#Usar a terminal remota por SSH"><h2>Usar a terminal remota por <code>SSH</code></h2></a>
      <a class="anchor-link" href="#Proxy SSH"><h2>Proxy <code>SSH</code></h2></a>
      <a class="anchor-link" href="#Interface gr√°fica remota por SSH"><h2>Interface gr√°fica remota por <code>SSH</code></h2></a>
      <a class="anchor-link" href="#T√∫nel SSH"><h2>T√∫nel <code>SSH</code></h2></a>
      <a class="anchor-link" href="#Conexao reversa"><h2>Conex√£o reversa</h2></a>
      <a class="anchor-link" href="#Pular"><h2>Pular</h2></a>
      <a class="anchor-link" href="#Arquivo de configura√ß√£o SSH do usu√°rio"><h2>Arquivo de configura√ß√£o <code>SSH</code> do usu√°rio</h2></a>
      <a class="anchor-link" href="#Dispositivos com Apelido"><h3>Dispositivos com Apelido</h3></a>
      <a class="anchor-link" href="#Proxy"><h3>Proxy</h3></a>
      <a class="anchor-link" href="#Tunel SSH"><h3>T√∫nel SSH</h3></a>
      <a class="anchor-link" href="#Conexao reversa"><h3>Conex√£o reversa</h3></a>
      <a class="anchor-link" href="#Pular"><h3>Pular</h3></a>
      <a class="anchor-link" href="#Arquivo de configura√ß√£o SSH do sistema"><h2>Arquivo de configura√ß√£o <code>SSH</code> do sistema</h2></a>
      <a class="anchor-link" href="#C√≥pia de arquivos por SSH"><h2>C√≥pia de arquivos por <code>SSH</code></h2></a>
      <a class="anchor-link" href="#Sincroniza√ß√£o de arquivos por SSH"><h2>Sincroniza√ß√£o de arquivos por <code>SSH</code></h2></a>
      <a class="anchor-link" href="#Montar pastas remotas localmente"><h2>Montar pastas remotas localmente</h2></a>
      <a class="anchor-link" href="#Depurar a conex√£o SSH"><h2>Depurar a conex√£o <code>SSH</code></h2></a>
    </aside>


    <div class="post-body-content">
      
      <section class="section-block-markdown-cell">
      </section>
      
      <section class="section-block-markdown-cell">
      <blockquote>
      <p>Aviso: Este post foi traduzido para o portugu√™s usando um modelo de tradu√ß√£o autom√°tica. Por favor, me avise se encontrar algum erro.</p>
      </blockquote>
      </section>
      
      <section class="section-block-markdown-cell">
      <h2 id="Introducao historica">Introdu√ß√£o hist√≥rica<a class="anchor-link" href="#Introducao historica"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 51" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Nos primeiros dias da internet foi criado o protocolo <code>telnet</code> para poder comunicar v√°rios computadores, mas tinha o problema de n√£o estar cifrado, por isso qualquer um que se intrometesse no meio poderia ler a comunica√ß√£o sem problemas, por isso foi criado o <code>SSH</code> (Secure Shell)</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h2 id="Cifrado de SSH">Cifrado de <code>SSH</code><a class="anchor-link" href="#Cifrado de SSH"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 52" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>O sistema de criptografia do <code>SSH</code> funciona atrav√©s do sistema de chave p√∫blica e chave privada, de forma que se a comunica√ß√£o for criptografada com uma das duas chaves, s√≥ pode ser descriptografada pela outra chave.</p>
      <p>E por que h√° uma chave p√∫blica e uma chave privada? A chave p√∫blica √© a que voc√™ d√° para todo mundo e a chave privada √© a que apenas voc√™ deve possuir.</p>
      <p>Ent√£o, se voc√™ quiser se comunicar com outra equipe por <code>SSH</code>, primeiro voc√™ d√° sua chave p√∫blica a eles. Em seguida, criptografa a mensagem com sua chave privada e a mensagem s√≥ pode ser descriptografada com a chave p√∫blica que voc√™ deu ao outro time.</p>
      <p>Da mesma forma, ocorre ao contr√°rio, se o outro time quiser te enviar uma mensagem, ele a criptografa com sua chave p√∫blica e s√≥ pode ser descriptografada com a chave privada que apenas voc√™ possui.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h2 id="Requisitos SSH">Requisitos <code>SSH</code><a class="anchor-link" href="#Requisitos SSH"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 53" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <h3 id="Servi√ßo SSH">Servi√ßo <code>SSH</code><a class="anchor-link" href="#Servi√ßo SSH"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 54" src={svg_paths.link_svg_path}/></a></h3>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Para poder usar <code>SSH</code> voc√™ precisa ter um servi√ßo de <code>SSH</code>. No <code>Linux</code> geralmente j√° vem instalado, mas se n√£o for o caso, voc√™ pode instal√°-lo por meio de</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">apt</span> <span class="n">install</span> <span class="n">openssh</span><span class="o">-</span><span class="n">server</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <section class="section-block-markdown-cell">
      <p>Durante o processo de instala√ß√£o, ser√° solicitada a sua localiza√ß√£o para ajustar o fuso hor√°rio.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>A seguir, levantamos o servi√ßo</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">systemctl</span> <span class="n">enable</span> <span class="n">ssh</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <section class="section-block-markdown-cell">
      <h3 id="Cliente SSH">Cliente <code>SSH</code><a class="anchor-link" href="#Cliente SSH"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 55" src={svg_paths.link_svg_path}/></a></h3>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Uma vez que voc√™ tenha o servi√ßo, voc√™ precisa de um cliente, embora em <code>Linux</code> ele geralmente venha instalado, mas se n√£o for o caso, voc√™ pode instal√°-lo por meio de</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">apt</span> <span class="n">install</span> <span class="n">openssh</span><span class="o">-</span><span class="n">client</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <section class="section-block-markdown-cell">
      <h2 id="Conex√£o por SSH">Conex√£o por <code>SSH</code><a class="anchor-link" href="#Conex√£o por SSH"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 56" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Para se conectar via <code>SSH</code> voc√™ precisa digitar o comando <code>ssh &#x3C;user&#x3E;@&#x3C;ip&#x3E;</code></p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="n">root</span><span class="o">@</span><span class="mf">172.17.0.1</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'The authenticity of host &#x27;172.17.0.1 (172.17.0.1)&#x27; can&#x27;t be established.',
          'ECDSA key fingerprint is SHA256:M+qsqSC4HiYztm1ij8iDkh9KHJz+pxrTm9GTZIf2N9k.',
          'Are you sure you want to continue connecting (yes/no/[fingerprint])?',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Como voc√™ pode ver, da primeira vez ele pergunta se voc√™ deseja salvar o <code>fingerprint</code>, isso √© para que, se a pr√≥xima vez que voc√™ se conectar √† mesma m√°quina (√† mesma chave p√∫blica) o <code>fingerprint</code> tiver mudado, voc√™ deve ter cuidado, pois pode haver algo perigoso, como algu√©m se passando por essa m√°quina.</p>
      <p>Se confiarmos, introduzimos <code>yes</code></p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="n">root</span><span class="o">@</span><span class="mf">172.17.0.1</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'The authenticity of host &#x27;172.17.0.1 (172.17.0.1)&#x27; can&#x27;t be established.',
          'ECDSA key fingerprint is SHA256:M+qsqSC4HiYztm1ij8iDkh9KHJz+pxrTm9GTZIf2N9k.',
          'Are you sure you want to continue connecting (yes/no/[fingerprint])? yes',
          'Warning: Permanently added &#x27;172.17.0.1&#x27; (ECDSA) to the list of known hosts.',
          'root@172.17.0.1&#x27;s password:',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>A seguir, a m√°quina √† qual nos conectamos solicita a senha. A introduzimos e j√° estaremos dentro da m√°quina.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="n">root</span><span class="o">@</span><span class="mf">172.17.0.1</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'The authenticity of host &#x27;172.17.0.1 (172.17.0.1)&#x27; can&#x27;t be established.',
          'ECDSA key fingerprint is SHA256:M+qsqSC4HiYztm1ij8iDkh9KHJz+pxrTm9GTZIf2N9k.',
          'Are you sure you want to continue connecting (yes/no/[fingerprint])? yes',
          'Warning: Permanently added &#x27;172.17.0.1&#x27; (ECDSA) to the list of known hosts.',
          'root@172.17.0.1&#x27;s password:',
          'Welcome to Ubuntu 20.04.5 LTS (GNU/Linux 5.15.0-58-generic x86_64)',
          '* Documentation:  https://help.ubuntu.com',
          '* Management:     https://landscape.canonical.com',
          '* Support:        https://ubuntu.com/advantage',
          '1 device has a firmware upgrade available.',
          'Run `fwupdmgr get-upgrades` for more information.',
          '* Introducing Expanded Security Maintenance for Applications.',
          '&#x20;&#x20;&#x20;Receive updates to over 25,000 software packages with your',
          '&#x20;&#x20;&#x20;Ubuntu Pro subscription. Free for personal use.',
          '&#x20;&#x20;&#x20;&#x20;&#x20;https://ubuntu.com/pro',
          'Se pueden aplicar 0 actualizaciones de forma inmediata.',
          'Your Hardware Enablement Stack (HWE) is supported until April 2025.',
          'Last login: Thu Dec  1 16:32:23 2022 from 127.0.0.1',
          'root@172.17.0.1:~$',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <h2 id="Conexao sem necessidade de senha">Conex√£o sem necessidade de senha<a class="anchor-link" href="#Conexao sem necessidade de senha"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 57" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Como vimos, quando nos conectamos nos pede a senha da m√°quina de destino, mas se for uma m√°quina √† qual vamos nos conectar frequentemente, podemos configurar para n√£o ser solicitada a senha cada vez que quisermos nos conectar.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Para isso, em primeiro lugar geramos uma chave <code>ssh</code> por meio de <code>ssh-keygen</code></p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span><span class="o">-</span><span class="n">keygen</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Generating public/private rsa key pair.',
          'Enter file in which to save the key (/root/.ssh/id_rsa):',
          'Enter passphrase (empty for no passphrase):',
          'Enter same passphrase again:',
          'Your identification has been saved in /root/.ssh/id_rsa',
          'Your public key has been saved in /root/.ssh/id_rsa.pub',
          'The key fingerprint is:',
          'SHA256:4HxRXkVkcK5kNXNyzakfQ6t8a24wRGCUYz4s5KL5ZEc root@e108f6f395b3',
          'The key&#x27;s randomart image is:',
          '+---[RSA 3072]----+',
          '|          o+==@.=|',
          '|         +.= * Oo|',
          '|      . + = = + .|',
          '|     o o E * + + |',
          '|      = S . = o o|',
          '|     o + .   = o |',
          '|      + .     + .|',
          '|       .       + |',
          '|              +. |',
          '+----[SHA256]-----+',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Como vemos, primeiro nos pergunta onde queremos salvar a chave, se n√£o inserirmos nada, ela ser√° salva no caminho padr√£o. E em seguida uma frase para gerar a chave, **se voc√™ escrever uma frase deve lembr√°-la sempre**. Al√©m disso, se voc√™ escrever uma frase, ela ser√° solicitada todas as vezes que tentar acessar a chave, portanto, toda vez que quisermos acessar a m√°quina por meio de <code>SSH</code>, n√£o nos pedir√° a senha da m√°quina, mas sim esta frase. Portanto, voc√™ escolhe se n√£o inserir uma frase para que nunca seja solicitada, ou se inseri-la e sempre as fornecer.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>A seguir, pedimos √† m√°quina remota que salve nossa chave atrav√©s de <code>ssh-copy-id &#x3C;user&#x3E;@&#x3C;id&#x3E;:</code></p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span><span class="o">-</span><span class="n">copy</span><span class="o">-</span><span class="nb">id</span> <span class="n">root</span><span class="o">@</span><span class="mf">172.17.0.1</span><span class="p">:</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          '/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: &quot;/root/.ssh/id_rsa.pub&quot;',
          '/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed',
          '/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys',
          'root@172.17.0.1&#x27;s password:',
          'Number of key(s) added: 1',
          'Now try logging into the machine, with:   &quot;ssh &#x27;root@172.17.0.1&#x27;&quot;',
          'and check to make sure that only the key(s) you wanted were added.',
          'root@103b6040196a:/# ssh root@172.17.0.1',
          'Welcome to Ubuntu 20.04.5 LTS (GNU/Linux 5.15.0-58-generic x86_64)',
          '* Documentation:  https://help.ubuntu.com',
          '* Management:     https://landscape.canonical.com',
          '* Support:        https://ubuntu.com/advantage',
          '4 devices have a firmware upgrade available.',
          'Run `fwupdmgr get-upgrades` for more information.',
          '58 updates can be applied immediately.',
          '41 of these updates are standard security updates.',
          'To see these additional updates run: apt list --upgradable',
          'New release &#x27;22.04.1 LTS&#x27; available.',
          'Run &#x27;do-release-upgrade&#x27; to upgrade to it.',
          'Your Hardware Enablement Stack (HWE) is supported until April 2025.',
          'Last login: Thu Feb  2 08:05:48 2023 from 172.17.0.2',
          '(base) root@172.17.0.1:~$',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <h2 id="Usar a terminal remota por SSH">Usar a terminal remota por <code>SSH</code><a class="anchor-link" href="#Usar a terminal remota por SSH"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 58" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Talvez n√£o precisemos nos conectar √† m√°quina remota, pois s√≥ precisamos executar um √∫nico comando, ent√£o podemos usar sua terminal remotamente adicionando a bandeira <code>-t</code> ao comando <code>SSH</code>, ou seja, por meio de <code>ssh -t &#x3C;user&#x3E;@&#x3C;id&#x3E; &#x3C;command&#x3E;</code></p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="o">-</span><span class="n">t</span> <span class="n">root</span><span class="o">@</span><span class="mf">172.17.0.1</span> <span class="n">ping</span> <span class="o">-</span><span class="n">c</span> <span class="mi">4</span> <span class="n">google</span><span class="o">.</span><span class="n">com</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'PING google.com (172.217.168.174) 56(84) bytes of data.',
          '64 bytes from mad07s10-in-f14.1e100.net (172.217.168.174): icmp_seq=1 ttl=111 time=2.94 ms',
          '64 bytes from mad07s10-in-f14.1e100.net (172.217.168.174): icmp_seq=2 ttl=111 time=2.55 ms',
          '64 bytes from mad07s10-in-f14.1e100.net (172.217.168.174): icmp_seq=3 ttl=111 time=2.78 ms',
          '64 bytes from mad07s10-in-f14.1e100.net (172.217.168.174): icmp_seq=4 ttl=111 time=2.69 ms',
          '--- google.com ping statistics ---',
          '4 packets transmitted, 4 received, 0% packet loss, time 3005ms',
          'rtt min/avg/max/mdev = 2.550/2.739/2.940/0.142 ms',
          'Connection to 172.17.0.1 closed.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Como pode ser visto, o comando √© executado na m√°quina remota e quando termina, na √∫ltima linha nos diz que a conex√£o √© fechada.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h2 id="Proxy SSH">Proxy <code>SSH</code><a class="anchor-link" href="#Proxy SSH"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 59" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Se voc√™ est√° navegando em um lugar n√£o muito seguro, ou em um lugar que tem um proxy que n√£o te deixa acessar alguns portas, voc√™ pode navegar atrav√©s do proxy de outra m√°quina usando <code>SSH</code>, isso pode ser feito adicionando a flag <code>-D</code> e a porta pela qual voc√™ deseja realizar a conex√£o com o proxy remoto, como a porta para o <code>tcp/ip</code> √© a <code>9999</code>, o comando poderia ficar assim: <code>ssh -D 9999 &#x3C;user&#x3E;@&#x3C;id&#x3E;</code></p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Para que isso fique melhor, antes de execut√°-lo obtenho meu IP p√∫blico</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">curl</span> <span class="n">ifconfig</span><span class="o">.</span><span class="n">me</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          '188.127.184.59',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Agora uso o proxy de um servidor web que tenho levantado</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="o">-</span><span class="n">D</span> <span class="mi">9999</span> <span class="n">root</span><span class="o">@</span><span class="mf">194.62.99.222</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-53-generic x86_64)',
          '* Documentation:  https://help.ubuntu.com',
          '* Management:     https://landscape.canonical.com',
          '* Support:        https://ubuntu.com/advantage',
          '&#x20;&#x20;System information as of Wed Feb 22 06:08:51 AM UTC 2023',
          '&#x20;&#x20;System load:           0.02978515625',
          '&#x20;&#x20;Usage of /:            11.7% of 24.53GB',
          '&#x20;&#x20;Memory usage:          33%',
          '&#x20;&#x20;Swap usage:            0%',
          '&#x20;&#x20;Processes:             89',
          '&#x20;&#x20;Users logged in:       0',
          '&#x20;&#x20;IPv4 address for eth0: 194.62.99.222',
          '&#x20;&#x20;IPv4 address for eth1: 10.7.0.168',
          '&#x20;&#x20;IPv6 address for eth2: 2a04:3542:8000:1000:d48a:cbff:fefb:5b1',
          '0 updates can be applied immediately.',
          'The list of available updates is more than a week old.',
          'To check for new updates run: sudo apt update',
          'Last login: Wed Feb 22 06:02:35 2023 from 188.127.184.59',
          'root@server1:~#',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Mudo a configura√ß√£o do proxy do meu computador</p>
      <img decoding="async" onerror="this.parentNode.removeChild(this)" src="https://pub-fb664c455eca46a2ba762a065ac900f7.r2.dev/proxy_ssh.webp" alt="proxy ssh">
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Agora eu volto a verificar meu IP p√∫blico, mas usando o proxy recentemente configurado.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">curl</span> <span class="o">-</span><span class="n">x</span> <span class="n">socks5h</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">9999</span> <span class="n">ifconfig</span><span class="o">.</span><span class="n">me</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          '194.62.99.222',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Vemos que obtemos o IP p√∫blica do servidor</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h2 id="Interface gr√°fica remota por SSH">Interface gr√°fica remota por <code>SSH</code><a class="anchor-link" href="#Interface gr√°fica remota por SSH"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 60" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Em Linux, a interface gr√°fica √© um servidor, ent√£o podemos nos beneficiar disso e executar programas com interfaces gr√°ficas que est√£o em uma m√°quina remota por <code>SSH</code>, para isso √© necess√°rio usar o flag <code>-X</code>. O comando ficaria <code>ssh -X &#x3C;user&#x3E;@&#x3C;id&#x3E;</code></p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Primeiro entro no meu servidor e instalo <code>xeyes</code> atrav√©s de <code>sudo apt install x11-apps</code> e depois o executo remotamente do meu computador.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="o">-</span><span class="n">X</span> <span class="n">root</span><span class="o">@</span><span class="mf">194.62.99.222</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-53-generic x86_64)',
          'Last login: Wed Feb 22 06:39:52 2023 from 188.127.184.59',
          '/usr/bin/xauth:  file /root/.Xauthority does not exist',
          'root@server1:~sudo apt install x11-apps',
          'root@server1:~#xeyes',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Agora na minha m√°quina est√° abrindo a janela do <code>xeyes</code>, mas n√£o est√° sendo executada na minha m√°quina.</p>
      <img decoding="async" onerror="this.parentNode.removeChild(this)" src="https://pub-fb664c455eca46a2ba762a065ac900f7.r2.dev/xeyes.webp" alt="xeyes">
      </section>
      
      <section class="section-block-markdown-cell">
      <h2 id="T√∫nel SSH">T√∫nel <code>SSH</code><a class="anchor-link" href="#T√∫nel SSH"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 61" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Como comentei, subi um servidor ao qual tenho acesso via SSH</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="n">root</span><span class="o">@</span><span class="mf">194.62.99.222</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-53-generic x86_64)',
          'Last login: Wed Feb 22 06:40:58 2023 from 188.127.184.59',
          'root@server1:~#',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>E levanto tamb√©m um segundo servidor do qual tenho acesso a partir do <code>server1</code>, mas n√£o tenho acesso a partir do meu computador.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>A seguir, tento acessar o <code>server2</code> do meu computador e vemos que n√£o consigo</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="n">root</span><span class="o">@</span><span class="mf">194.62.99.235</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'ssh: connect to host 194.62.99.235 port 22: Connection timed out',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>E em seguida tento acessar o <code>server2</code> a partir do <code>server1</code> e vemos que sim, eu consigo.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">root</span><span class="nd">@server1</span><span class="p">:</span><span class="o">~</span><span class="c1"># ssh root@10.7.2.228</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-53-generic x86_64)',
          'Last login: Wed Feb 22 06:59:01 2023 from 10.7.0.168',
          'root@server2:~#',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Ent√£o o que criamos √© um t√∫nel do meu computador at√© o <code>server2</code> atrav√©s do <code>server1</code>, para isso usamos a flag <code>-L</code>. Para criar o t√∫nel, √© necess√°rio indicar a porta do seu computador na qual voc√™ vai criar o t√∫nel, em seguida o <code>IP</code> de destino do t√∫nel, a porta pela qual ir√° o t√∫nel e por √∫ltimo o dispositivo que criar√° o t√∫nel. Ficaria assim</p>
      <div class='highlight'><pre><code class="language-bash">ssh -L &amp;ltPORTA DO HOST&amp;gt:&amp;ltIP DESTINO&amp;gt:&amp;ltPORTA DO T√öNEL&amp;gt &amp;ltUSU√ÅRIO CRIADOR DO T√öNEL&amp;gt@&amp;ltIP CRIADOR DO T√öNEL&amp;gt</code></pre></div>
      <p>Vamos v√™-lo com meu exemplo, tenho o <code>server1</code> com um <code>IP</code> p√∫blico que podemos chamar de <code>ip_pub1</code> e ao qual tenho acesso por <code>SSH</code> e um <code>IP</code> privado que podemos chamar de <code>ip_priv1</code> que est√° dentro da mesma rede do <code>server2</code>. E tenho o <code>server2</code> com um <code>IP</code> p√∫blico que podemos chamar de <code>ip_pub2</code> ao qual n√£o tenho acesso por <code>SSH</code> e um <code>IP</code> que podemos chamar de <code>ip_priv2</code> dentro da mesma rede do <code>server1</code>.</p>
      <p>Primeiro crio o t√∫nel</p>
      <div class='highlight'><pre><code class="language-bash">ssh -L host_port:ip_priv2:22 root@ip_pub1</code></pre></div>
      <p>Criei um t√∫nel at√© o <code>IP</code> privado do <code>server2</code> atrav√©s do <code>IP</code> p√∫blico do <code>server1</code></p>
      <p>Por √∫ltimo, para me conectar ao <code>server2</code> fa√ßo isso atrav√©s do <code>localhost</code> e da porta do host que declarei no t√∫nel.</p>
      <div class='highlight'><pre><code class="language-bash">ssh -p 2020 root@localhost</code></pre></div>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Vamos v√™-lo na realidade, os <code>IP</code>s dos meus servidores s√£o</p>
      <ul>
        <li><code>server1</code>:</li>
        <li><code>IP</code> p√∫blica: <code>194.62.99.222</code></li>
        <li><code>IP</code> privada: <code>10.7.0.168</code></li>
        <li><code>server2</code>:* <code>IP</code> p√∫blica: <code>194.62.99.235</code></li>
        <li><code>IP</code> privada: <code>10.7.2.228</code></li>
      </ul>
      <p>Primeiro crio o t√∫nel</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="o">-</span><span class="n">L</span> <span class="mi">2020</span><span class="p">:</span><span class="mf">10.7.2.228</span><span class="p">:</span><span class="mi">22</span> <span class="n">root</span><span class="o">@</span><span class="mf">194.62.99.222</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-53-generic x86_64)',
          '* Documentation:  https://help.ubuntu.com',
          '* Management:     https://landscape.canonical.com',
          '* Support:        https://ubuntu.com/advantage',
          '&#x20;&#x20;System information as of Wed Feb 22 11:13:39 AM UTC 2023',
          '&#x20;&#x20;System load:           0.0',
          '&#x20;&#x20;Usage of /:            13.3% of 24.53GB',
          '&#x20;&#x20;Memory usage:          36%',
          '&#x20;&#x20;Swap usage:            0%',
          '&#x20;&#x20;Processes:             91',
          '&#x20;&#x20;Users logged in:       1',
          '&#x20;&#x20;IPv4 address for eth0: 194.62.99.222',
          '&#x20;&#x20;IPv4 address for eth1: 10.7.0.168',
          '&#x20;&#x20;IPv6 address for eth2: 2a04:3542:8000:1000:d48a:cbff:fefb:5b1',
          '101 updates can be applied immediately.',
          '60 of these updates are standard security updates.',
          'To see these additional updates run: apt list --upgradable',
          'Last login: Wed Feb 22 09:29:52 2023 from 188.127.184.59',
          ']0;root@server1: ~root@server1:~# ^C',
          ']0;root@server1: ~root@server1:~#',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Com o t√∫nel criado, j√° posso me conectar ao <code>server2</code> do meu computador.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="o">-</span><span class="n">p</span> <span class="mi">2020</span> <span class="n">root</span><span class="nd">@localhost</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-53-generic x86_64)',
          '* Documentation:  https://help.ubuntu.com',
          '* Management:     https://landscape.canonical.com',
          '* Support:        https://ubuntu.com/advantage',
          '&#x20;&#x20;System information as of Wed Feb 22 11:14:15 AM UTC 2023',
          '&#x20;&#x20;System load:           0.0',
          '&#x20;&#x20;Usage of /:            13.3% of 24.53GB',
          '&#x20;&#x20;Memory usage:          33%',
          '&#x20;&#x20;Swap usage:            0%',
          '&#x20;&#x20;Processes:             90',
          '&#x20;&#x20;Users logged in:       0',
          '&#x20;&#x20;IPv4 address for eth0: 194.62.99.235',
          '&#x20;&#x20;IPv4 address for eth1: 10.7.2.228',
          '&#x20;&#x20;IPv6 address for eth2: 2a04:3542:8000:1000:d48a:cbff:fefb:7f47',
          '* Strictly confined Kubernetes makes edge and IoT secure. Learn how MicroK8s',
          '&#x20;&#x20;&#x20;just raised the bar for easy, resilient and secure K8s cluster deployment.',
          '&#x20;&#x20;&#x20;https://ubuntu.com/engage/secure-kubernetes-at-the-edge',
          '101 updates can be applied immediately.',
          '60 of these updates are standard security updates.',
          'To see these additional updates run: apt list --upgradable',
          'Last login: Wed Feb 22 11:14:16 2023 from 10.7.0.168',
          ']0;root@server2: ~root@server2:~# ^C',
          ']0;root@server2: ~root@server2:~#',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <h2 id="Conexao reversa">Conex√£o reversa<a class="anchor-link" href="#Conexao reversa"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 62" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Vamos supor que eu quero me conectar ao <code>server2</code>, mas agora n√£o posso fazer, por qualquer raz√£o, um t√∫nel a partir do <code>server1</code>. O que podemos fazer √© criar uma conex√£o reversa a partir de outro servidor.</p>
      <p>Suponhamos que tenho um terceiro servidor, chamado <code>server3</code>, ao qual se tem acesso por <code>SSH</code> de qualquer lugar, ou seja, tanto eu do meu computador quanto o <code>server2</code> t√™m acesso. Portanto, se pudermos acessar fisicamente o <code>server2</code>, podemos fazer uma conex√£o reversa do <code>server2</code> para o <code>server3</code>.</p>
      <div class='highlight'><pre><code class="language-text">ssh -R &amp;ltserver3port&amp;gt:localhost:22 root@&amp;ltIPserver3&amp;gt</code></pre></div>
      <p>Com isso, o que fiz foi habilitar uma conex√£o do <code>server3</code> para o <code>server2</code> (algo que n√£o era poss√≠vel antes), atrav√©s do <code>localhost</code> e da porta <code>server3port</code> do <code>server3</code>.</p>
      <p>Agora posso me conectar ao <code>server3</code> a partir do meu computador e, a partir do <code>server3</code>, posso me conectar ao <code>server2</code> por meio de</p>
      <div class='highlight'><pre><code class="language-bash">ssh -p &amp;ltserver3port&amp;gt root@localhost</code></pre></div>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Vamos v√™-lo com os dados dos meus servidores</p>
      <ul>
        <li><code>server2</code>:</li>
        <li><code>IP</code> p√∫blica: <code>194.62.99.235</code>* <code>server3</code>:</li>
        <li><code>IP</code> p√∫blica: <code>194.62.96.236</code></li>
      </ul>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Primeiro fa√ßo a conex√£o reversa do <code>server2</code> para o <code>server3</code></p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">root</span><span class="nd">@server2</span><span class="p">:</span><span class="o">~</span><span class="c1"># ssh -R 2020:localhost:22 root@194.62.96.236</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-53-generic x86_64)',
          'Last login: Wed Feb 22 15:25:58 2023 from 188.127.184.59',
          'root@server3:~#',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Agora me conecto ao <code>server3</code></p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="n">root</span><span class="o">@</span><span class="mf">194.62.96.236</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-53-generic x86_64)',
          'Last login: Wed Feb 22 15:12:19 2023 from 188.127.184.59',
          'root@server3:~#',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>E agora que estou no <code>server3</code> me conecto ao <code>server2</code></p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">root</span><span class="nd">@server3</span><span class="p">:</span><span class="o">~</span><span class="c1"># ssh -p 2020 root@localhost</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-53-generic x86_64)',
          'Last login: Wed Feb 22 15:12:07 2023 from 188.127.184.59',
          'root@server2:~#',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>¬°Conseguido! Atrav√©s do meu computador n√£o consigo me conectar diretamente ao <code>server2</code>, mas ao me conectar ao <code>server3</code> consegui acessar o <code>server2</code> gra√ßas √† conex√£o reversa que tinha feito do <code>server2</code> para o <code>server3</code></p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h2 id="Pular">Pular<a class="anchor-link" href="#Pular"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 63" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Por √∫ltimo, outra maneira de entrar no <code>server2</code> √© entrando no <code>server1</code> e a seguir, do <code>server1</code>, entrar no <code>server2</code>. Mas isso √© um pouco trabalhoso, porque primeiro tem que fazer uma conex√£o <code>SSH</code> ao <code>server1</code> e depois outra ao <code>server2</code>, ent√£o para fazer tudo de uma vez podemos usar o flag <code>-J</code> (<code>jump</code>), ou seja, ficaria <code>ssh -J server1 server2</code>.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Resumo, primeiro far√≠amos <code>ssh root@194.62.99.222</code> e depois <code>ssh root@10.7.2.228</code> (j√° que dentro de <code>server1</code> nos conectamos a <code>server2</code> atrav√©s do <code>IP</code> privado).</p>
      <p>Ent√£o poder√≠amos fazer tudo de uma vez com <code>ssh -J root@194.62.99.222 root@10.7.2.228</code></p>
      <p>Vamos a provar</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="o">-</span><span class="n">J</span> <span class="n">root</span><span class="o">@</span><span class="mf">194.62.99.222</span> <span class="n">root</span><span class="o">@</span><span class="mf">10.7.2.228</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-60-generic x86_64)',
          'Last login: Fri Feb 24 06:46:11 2023 from 10.7.0.168',
          'root@server2:~#',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>¬°Conseguimos fazer os pulos!</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h2 id="Arquivo de configura√ß√£o SSH do usu√°rio">Arquivo de configura√ß√£o <code>SSH</code> do usu√°rio<a class="anchor-link" href="#Arquivo de configura√ß√£o SSH do usu√°rio"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 64" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <h3 id="Dispositivos com Apelido">Dispositivos com Apelido<a class="anchor-link" href="#Dispositivos com Apelido"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 65" src={svg_paths.link_svg_path}/></a></h3>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Em todo computador h√° um arquivo de configura√ß√£o para o <code>SSH</code> que geralmente est√° na pasta do usu√°rio</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">cat</span> <span class="o">~/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">config</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          '# Read more about SSH config files: https://linux.die.net/man/5/ssh_config',
          'Host 192.168.1.138',
          '&#x20;&#x20;&#x20;&#x20;HostName 192.168.1.138',
          '&#x20;&#x20;&#x20;&#x20;User maximo.fernandez',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Neste arquivo, eu tenho armazenadas as credenciais do usu√°rio e o IP de alguns dispositivos aos quais costumo me conectar, para n√£o precisar preench√™-los manualmente. Vamos ver isso com os servidores que tenho.</p>
      <p>Meu servidor <code>server1</code> tem o usu√°rio <code>root</code> e o IP <code>194.62.99.222</code>, ent√£o eu o adiciono √† lista</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;Host server1</span><span class="se">\n</span><span class="s2">    HostName 194.62.99.222</span><span class="se">\n</span><span class="s2">    User root&quot;</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="o">~/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">config</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <section class="section-block-markdown-cell">
      <p>Voltemos a ver como ficou o arquivo de configura√ß√£o</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">cat</span> <span class="o">~/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">config</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          '# Read more about SSH config files: https://linux.die.net/man/5/ssh_config',
          'Host 192.168.1.138',
          '&#x20;&#x20;&#x20;&#x20;HostName 192.168.1.138',
          '&#x20;&#x20;&#x20;&#x20;User maximo.fernandez',
          'Host server1',
          '&#x20;&#x20;&#x20;&#x20;HostName 194.62.99.222',
          '&#x20;&#x20;&#x20;&#x20;User root',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Agora que o adicionamos para nos conectar ao <code>server1</code>, s√≥ precisamos fazer <code>ssh server1</code>.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="n">server1</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-60-generic x86_64)',
          'Last login: Fri Feb 24 05:18:59 2023 from 188.127.184.59',
          'root@server1:~#',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <h3 id="Proxy">Proxy<a class="anchor-link" href="#Proxy"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 66" src={svg_paths.link_svg_path}/></a></h3>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Como j√° vimos, adicionando a bandeira <code>-D &amp;ltport&amp;gt</code> podemos alterar o proxy. Para salvar isso no arquivo de configura√ß√£o, basta adicionar a linha <code>DynamicForward &amp;ltport&amp;gt</code> ao host que estamos salvando.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Repetindo o exemplo anterior no qual usamos o <code>server1</code> como um proxy da porta <code>TCP/IP</code> (<code>9999</code>), no arquivo de configura√ß√£o ficaria assim</p>
      
      <section class="section-block-markdown-cell">
            <div class='highlight'><pre><code class="language-text">Host proxyServer1<br>HostName 194.62.99.222<br>Usu√°rio root<br>DynamicForward 9999</code></pre></div>
            </section>
      <p>O adicionamos</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;Host proxyServer1</span><span class="se">\n</span><span class="s2">    HostName 194.62.99.222</span><span class="se">\n</span><span class="s2">    User root</span><span class="se">\n</span><span class="s2">    DynamicForward 9999&quot;</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="o">~/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">config</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <section class="section-block-markdown-cell">
      <p>Vamos ver como fica o arquivo de configura√ß√£o</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">cat</span> <span class="o">~/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">config</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          '# Read more about SSH config files: https://linux.die.net/man/5/ssh_config',
          'Host 192.168.1.138',
          '&#x20;&#x20;&#x20;&#x20;HostName 192.168.1.138',
          '&#x20;&#x20;&#x20;&#x20;User maximo.fernandez',
          'Host server1',
          '&#x20;&#x20;&#x20;&#x20;HostName 194.62.99.222',
          '&#x20;&#x20;&#x20;&#x20;User root',
          'Host proxyServer1',
          '&#x20;&#x20;&#x20;&#x20;HostName 194.62.99.222',
          '&#x20;&#x20;&#x20;&#x20;User root',
          '&#x20;&#x20;&#x20;&#x20;DynamicForward 9999',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Obtenho meu <code>IP</code> p√∫blico</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">curl</span> <span class="n">ifconfig</span><span class="o">.</span><span class="n">me</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          '188.127.184.59',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Conecto-me ao servidor proxy</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="n">proxyServer1</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-60-generic x86_64)',
          'Last login: Fri Feb 24 05:42:32 2023 from 188.127.184.59',
          'root@server1:~#',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Mudo a configura√ß√£o do proxy do meu computador</p>
      <img decoding="async" onerror="this.parentNode.removeChild(this)" src="https://pub-fb664c455eca46a2ba762a065ac900f7.r2.dev/proxy_ssh.webp" alt="proxy ssh">
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Volto a ver meu <code>IP</code> p√∫blico, mas usando o proxy rec√©m-configurado</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">curl</span> <span class="o">-</span><span class="n">x</span> <span class="n">socks5h</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">9999</span> <span class="n">ifconfig</span><span class="o">.</span><span class="n">me</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          '194.62.99.222',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Vemos que obtemos o IP p√∫blica do servidor</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h3 id="Tunel SSH">T√∫nel SSH<a class="anchor-link" href="#Tunel SSH"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 67" src={svg_paths.link_svg_path}/></a></h3>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Se como antes quero criar um t√∫nel at√© o <code>server2</code> atrav√©s do <code>server1</code>, antes t√≠nhamos que fazer <code>ssh &amp;ltHOST PORT&amp;gt:&amp;ltDEST IP&amp;gt:&amp;ltTUNNEL PORT&amp;gt &amp;ltTUNNEL CREATOR USER&amp;gt@&amp;ltTUNNEL CREATOR IP&amp;gt</code>, agora temos que adicionar a linha</p>
      <div class='highlight'><pre><code class="language-bash">LocalForward &amp;ltlocalhost&amp;gt:&amp;ltPORTA DO HOST&amp;gt &amp;ltIP DE DESTINO&amp;gt:&amp;ltPORTA DO T√öNEL&amp;gt</code></pre></div>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Isto √©, o arquivo de configura√ß√£o ficaria</p>
      
      <section class="section-block-markdown-cell">
            <div class='highlight'><pre><code class="language-text">Host tunelToServer2<br>HostName 194.62.99.222<br>Usu√°rio root<br>LocalForward 127.0.0.1:2020 10.7.2.228:22</code></pre></div>
            </section>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Mas isso n√£o fica muito claro, vamos ver com um exemplo concreto.</p>
      <ul>
        <li><code>server1</code>:</li>
        <li><code>IP</code> p√∫blica: <code>194.62.99.222</code></li>
        <li><code>IP</code> privada: <code>10.7.0.168</code></li>
        <li><code>server2</code>:</li>
        <li><code>IP</code> p√∫blica: <code>194.62.99.235</code></li>
        <li><code>IP</code> privada: <code>10.7.2.228</code></li>
      </ul>
      <p>Antes, o comando era</p>
      <div class='highlight'><pre><code class="language-bash">ssh -L 2020:10.7.2.228:22 root@194.62.99.222</code></pre></div>
      <p>Assim, o arquivo de configura√ß√£o deve ficar</p>
      
      <section class="section-block-markdown-cell">
            <div class='highlight'><pre><code class="language-text">Host tunelToServer2<br>HostName 194.62.99.222<br>Usu√°rio root<br>LocalForward 127.0.0.1:2020 10.7.2.228:22</code></pre></div>
            </section>
      <p>Vamos ver se funciona</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Adicionamos a nova configura√ß√£o</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;Host tunelToServer2</span><span class="se">\n</span><span class="s2">    HostName 194.62.99.222</span><span class="se">\n</span><span class="s2">    User root</span><span class="se">\n</span><span class="s2">    LocalForward 127.0.0.1:2020 10.7.2.228:22&quot;</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="o">~/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">config</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <section class="section-block-markdown-cell">
      <p>Vamos ver como ficou o arquivo de configura√ß√£o</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">cat</span> <span class="o">~/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">config</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          '# Read more about SSH config files: https://linux.die.net/man/5/ssh_config',
          'Host 192.168.1.138',
          '&#x20;&#x20;&#x20;&#x20;HostName 192.168.1.138',
          '&#x20;&#x20;&#x20;&#x20;User maximo.fernandez',
          'Host server1',
          '&#x20;&#x20;&#x20;&#x20;HostName 194.62.99.222',
          '&#x20;&#x20;&#x20;&#x20;User root',
          'Host proxyServer1',
          '&#x20;&#x20;&#x20;&#x20;HostName 194.62.99.222',
          '&#x20;&#x20;&#x20;&#x20;User root',
          '&#x20;&#x20;&#x20;&#x20;DynamicForward 9999',
          'Host tunelToServer2',
          '&#x20;&#x20;&#x20;&#x20;HostName 194.62.99.222',
          '&#x20;&#x20;&#x20;&#x20;User root',
          '&#x20;&#x20;&#x20;&#x20;LocalForward 127.0.0.1:2020 10.7.2.228:22',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Criamos o t√∫nel</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="n">tunelToServer2</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-60-generic x86_64)',
          'Last login: Fri Feb 24 06:02:20 2023 from 188.127.184.59',
          'root@server1:~#',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Agora tentamos nos conectar ao <code>server2</code> do meu computador.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="o">-</span><span class="n">p</span> <span class="mi">2020</span> <span class="n">root</span><span class="nd">@localhost</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-60-generic x86_64)',
          'Last login: Fri Feb 24 06:02:36 2023 from 10.7.0.168',
          'root@server2:~#',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>¬°Conseguido! Mas podemos deixar tudo um pouco mais limpo, podemos adicionar esta √∫ltima conex√£o ao arquivo de configura√ß√£o</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;Host server2ByTunel</span><span class="se">\n</span><span class="s2">    HostName localhost</span><span class="se">\n</span><span class="s2">    User root</span><span class="se">\n</span><span class="s2">    Port 2020&quot;</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="o">~/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">config</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <section class="section-block-markdown-cell">
      <p>Vamos ver como fica o arquivo de configura√ß√£o</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">cat</span> <span class="o">~/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">config</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          '# Read more about SSH config files: https://linux.die.net/man/5/ssh_config',
          'Host 192.168.1.138',
          '&#x20;&#x20;&#x20;&#x20;HostName 192.168.1.138',
          '&#x20;&#x20;&#x20;&#x20;User maximo.fernandez',
          'Host server1',
          '&#x20;&#x20;&#x20;&#x20;HostName 194.62.99.222',
          '&#x20;&#x20;&#x20;&#x20;User root',
          'Host proxyServer1',
          '&#x20;&#x20;&#x20;&#x20;HostName 194.62.99.222',
          '&#x20;&#x20;&#x20;&#x20;User root',
          '&#x20;&#x20;&#x20;&#x20;DynamicForward 9999',
          'Host tunelToServer2',
          '&#x20;&#x20;&#x20;&#x20;HostName 194.62.99.222',
          '&#x20;&#x20;&#x20;&#x20;User root',
          '&#x20;&#x20;&#x20;&#x20;LocalForward 127.0.0.1:2020 10.7.2.228:22',
          'Host server2ByTunel',
          '&#x20;&#x20;&#x20;&#x20;HostName localhost',
          '&#x20;&#x20;&#x20;&#x20;User root',
          '&#x20;&#x20;&#x20;&#x20;Port 2020',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Agora nos reconectamos ao <code>server2</code> do meu computador, atrav√©s do t√∫nel, mas com a √∫ltima configura√ß√£o que acabamos de salvar.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="n">server2ByTunel</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-60-generic x86_64)',
          'Last login: Fri Feb 24 06:13:33 2023 from 10.7.0.168',
          'root@server2:~#',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Em resumo, com tudo o que fizemos, podemos criar o t√∫nel at√© o <code>server2</code> com o comando <code>ssh tunelToServer2</code> e, em seguida, conectar-nos ao <code>server2</code> com o comando <code>ssh server2ByTunel</code></p>
      <p>¬°Impressionante!</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h3 id="Conexao reversa">Conex√£o reversa<a class="anchor-link" href="#Conexao reversa"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 68" src={svg_paths.link_svg_path}/></a></h3>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Lembramos que agora nosso problema era que n√£o consegu√≠amos nos conectar ao <code>server2</code> atrav√©s do t√∫nel do <code>server1</code>. De modo que criando uma conex√£o reversa do <code>server2</code> (temos algu√©m no <code>server2</code> que pode fazer essa conex√£o reversa, ou a deixamos pronta n√≥s antes de irmos) at√© um <code>server3</code>, posso me conectar ao <code>server3</code> do meu computador e, em seguida, me conectar ao <code>server2</code>.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Primeiro temos que fazer a conex√£o reversa do <code>server2</code> para o <code>server3</code>. Isso poder√≠amos fazer atrav√©s de um comando</p>
      <div class='highlight'><pre><code class="language-bash">ssh -R &amp;ltserver3port&amp;gt:localhost:22 root@&amp;ltIPserver3&amp;gt</code></pre></div>
      <p>Ou guardar a conex√£o no arquivo de configura√ß√£o adicionando</p>
      
      <section class="section-block-markdown-cell">
            <div class='highlight'><pre><code class="language-text">Host reverseToServer3<br>HostName &amp;ltIPserver3&amp;gt<br>Usu√°rio root<br>RemoteForward &amp;ltserver3port&amp;gt localhost:22</code></pre></div>
            </section>
      <p>E fazer a conex√£o inversa mediante</p>
      <div class='highlight'><pre><code class="language-bash">ssh reverseToServer3</code></pre></div>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Como assim n√£o se entende bem, vejamos com dados concretos</p>
      <ul>
        <li><code>server2</code>:</li>
        <li><code>IP</code> p√∫blica: <code>194.62.99.235</code></li>
        <li><code>server3</code>:</li>
        <li><code>IP</code> p√∫blica: <code>194.62.96.236</code></li>
      </ul>
      <p>Para fazer a conex√£o reversa seria necess√°rio usar o comando</p>
      <div class='highlight'><pre><code class="language-bash">ssh -R 2020:localhost:22 root@194.62.96.236</code></pre></div>
      <p>ou salvar a seguinte configura√ß√£o</p>
      
      <section class="section-block-markdown-cell">
            <div class='highlight'><pre><code class="language-bash">Host reverseToServer3<br>HostName 194.62.96.236Usu√°rio root<br>RemoteForward 2020 localhost:22</code></pre></div>
            </section>
      <p>E conectar-se atrav√©s de</p>
      <div class='highlight'><pre><code class="language-bash">ssh reverseToServer3</code></pre></div>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Ent√£o eu salvo a configura√ß√£o no servidor 2 e fa√ßo a conex√£o</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">root</span><span class="nd">@server2</span><span class="p">:</span><span class="o">~</span><span class="c1"># echo &quot;Host reverseToServer3\n    HostName 194.62.96.236\n    User root\n    RemoteForward 2020 localhost:22&quot; &amp;gt;&amp;gt; ~/.ssh/config</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <section class="section-block-markdown-cell">
      <p>Vamos ver se foi salvo corretamente.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">root</span><span class="nd">@server2</span><span class="p">:</span><span class="o">~</span><span class="c1"># cat .ssh/config</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Host reverseToServer3',
          '&#x20;&#x20;&#x20;&#x20;HostName 194.62.96.236',
          '&#x20;&#x20;&#x20;&#x20;User root',
          '&#x20;&#x20;&#x20;&#x20;RemoteForward 2020 localhost:22',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Fa√ßo a conex√£o inversa</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">root</span><span class="nd">@server2</span><span class="p">:</span><span class="o">~</span><span class="c1"># ssh reverseToServer3 </span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-53-generic x86_64)',
          'Last login: Wed Feb 22 15:26:18 2023 from 194.62.99.235',
          'root@server3:~#',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <h3 id="Pular">Pular<a class="anchor-link" href="#Pular"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 69" src={svg_paths.link_svg_path}/></a></h3>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Como dissem, faz√≠amos saltos mediante a flag <code>-J</code>, de maneira que com o comando <code>ssh -J root@194.62.99.222 root@10.7.2.228</code> pod√≠amos nos conectar ao <code>server2</code></p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Para configurar o arquivo de configura√ß√£o, h√° duas op√ß√µes</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>A primeira √© que, como j√° temos o <code>server1</code> salvo no arquivo de configura√ß√£o, apenas adicionamos o <code>server2</code>.</p>
      
      <section class="section-block-markdown-cell">
            <div class='highlight'><pre><code class="language-bash">Servidor2<br>HostName 10.7.2.228<br>Usu√°rio root</code></pre></div>
            </section>
      <p>E a seguir poder√≠amos nos conectar mediante</p>
      <div class='highlight'><pre><code class="language-bash">ssh -J server1 server2</code></pre></div>
      <p>Vamos a test√°-lo</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;Host server2</span><span class="se">\n</span><span class="s2">    HostName 10.7.2.228</span><span class="se">\n</span><span class="s2">    User root</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="o">~/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">config</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <section class="section-block-markdown-cell">
      <p>Vemos o arquivo de configura√ß√£o</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">cat</span> <span class="o">~/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">config</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          '# Read more about SSH config files: https://linux.die.net/man/5/ssh_config',
          'Host 192.168.1.138',
          '&#x20;&#x20;&#x20;&#x20;HostName 192.168.1.138',
          '&#x20;&#x20;&#x20;&#x20;User maximo.fernandez',
          'Host server1',
          '&#x20;&#x20;&#x20;&#x20;HostName 194.62.99.222',
          '&#x20;&#x20;&#x20;&#x20;User root',
          'Host proxyServer1',
          '&#x20;&#x20;&#x20;&#x20;HostName 194.62.99.222',
          '&#x20;&#x20;&#x20;&#x20;User root',
          '&#x20;&#x20;&#x20;&#x20;DynamicForward 9999',
          'Host tunelToServer2',
          '&#x20;&#x20;&#x20;&#x20;HostName 194.62.99.222',
          '&#x20;&#x20;&#x20;&#x20;User root',
          '&#x20;&#x20;&#x20;&#x20;LocalForward 127.0.0.1:2020 10.7.2.228:22',
          'Host server2ByTunel',
          '&#x20;&#x20;&#x20;&#x20;HostName localhost',
          '&#x20;&#x20;&#x20;&#x20;User root',
          '&#x20;&#x20;&#x20;&#x20;Port 2020',
          'Host server2',
          '&#x20;&#x20;&#x20;&#x20;HostName 10.7.2.228',
          '&#x20;&#x20;&#x20;&#x20;User root',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Agora nos conectamos atrav√©s dos saltos</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="o">-</span><span class="n">J</span> <span class="n">server1</span> <span class="n">server2</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-60-generic x86_64)',
          'Last login: Fri Feb 24 12:05:16 2023 from 10.7.0.168',
          'root@server2:~#',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Esta foi a primeira op√ß√£o: salvar cada servidor e definir os salts; mas uma segunda op√ß√£o √© salvar todos os salts em uma √∫nica configura√ß√£o, que ficaria assim</p>
      
      <section class="section-block-markdown-cell">
            <div class='highlight'><pre><code class="language-bash">Servidor de salto2<br>HostName 10.7.2.228<br>Usu√°rio root<br>ProxyJump root@194.62.99.222</code></pre></div>
            </section>
      <p>E j√° s√≥ faltaria conectar-se atrav√©s de</p>
      <div class='highlight'><pre><code class="language-text">ssh server2jumping</code></pre></div>
      <p>Vamos a testar</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;Host server2jumping</span><span class="se">\n</span><span class="s2">    HostName 10.7.2.228</span><span class="se">\n</span><span class="s2">    User root</span><span class="se">\n</span><span class="s2">    ProxyJump root@194.62.99.222&quot;</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="o">~/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">config</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <section class="section-block-markdown-cell">
      <p>Vamos ver o arquivo de configura√ß√£o</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">cat</span> <span class="o">~/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">config</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          '# Read more about SSH config files: https://linux.die.net/man/5/ssh_config',
          'Host 192.168.1.138',
          '&#x20;&#x20;&#x20;&#x20;HostName 192.168.1.138',
          '&#x20;&#x20;&#x20;&#x20;User maximo.fernandez',
          'Host server1',
          '&#x20;&#x20;&#x20;&#x20;HostName 194.62.99.222',
          '&#x20;&#x20;&#x20;&#x20;User root',
          'Host proxyServer1',
          '&#x20;&#x20;&#x20;&#x20;HostName 194.62.99.222',
          '&#x20;&#x20;&#x20;&#x20;User root',
          '&#x20;&#x20;&#x20;&#x20;DynamicForward 9999',
          'Host tunelToServer2',
          '&#x20;&#x20;&#x20;&#x20;HostName 194.62.99.222',
          '&#x20;&#x20;&#x20;&#x20;User root',
          '&#x20;&#x20;&#x20;&#x20;LocalForward 127.0.0.1:2020 10.7.2.228:22',
          'Host server2ByTunel',
          '&#x20;&#x20;&#x20;&#x20;HostName localhost',
          '&#x20;&#x20;&#x20;&#x20;User root',
          '&#x20;&#x20;&#x20;&#x20;Port 2020',
          'Host server2',
          '&#x20;&#x20;&#x20;&#x20;HostName 10.7.2.228',
          '&#x20;&#x20;&#x20;&#x20;User root',
          'Host server2jumping',
          '&#x20;&#x20;&#x20;&#x20;HostName 10.7.2.228',
          '&#x20;&#x20;&#x20;&#x20;User root',
          '&#x20;&#x20;&#x20;&#x20;ProxyJump root@194.62.99.222',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Agora tentamos nos conectar</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="n">server2jumping</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-60-generic x86_64)',
          'Last login: Fri Feb 24 12:06:22 2023 from 10.7.0.168',
          'root@server2:~#',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <h2 id="Arquivo de configura√ß√£o SSH do sistema">Arquivo de configura√ß√£o <code>SSH</code> do sistema<a class="anchor-link" href="#Arquivo de configura√ß√£o SSH do sistema"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 70" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Antes vimos o arquivo de configura√ß√£o do <code>SSH</code> do usu√°rio, onde guardamos configura√ß√µes de m√°quinas para as quais quer√≠amos nos conectar por <code>SSH</code>, mas h√° outro arquivo de configura√ß√£o do <code>SSH</code>, neste caso do sistema, que se encontra em <code>/etc/ssh/ssh_config</code>, vamos v√™-lo.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">cat</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssh</span><span class="o">/</span><span class="n">sshd_config</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          '#	$OpenBSD: sshd_config,v 1.103 2018/04/09 20:41:22 tj Exp $',
          '# This is the sshd server system-wide configuration file.  See',
          '# sshd_config(5) for more information.',
          '# This sshd was compiled with PATH=/usr/bin:/bin:/usr/sbin:/sbin',
          '# The strategy used for options in the default sshd_config shipped with',
          '# OpenSSH is to specify options with their default value where',
          '# possible, but leave them commented.  Uncommented options override the',
          '# default value.',
          'Include /etc/ssh/sshd_config.d/*.conf',
          '#Port 22',
          '#AddressFamily any',
          '#ListenAddress 0.0.0.0',
          '#ListenAddress ::',
          '#HostKey /etc/ssh/ssh_host_rsa_key',
          '#HostKey /etc/ssh/ssh_host_ecdsa_key',
          '#HostKey /etc/ssh/ssh_host_ed25519_key',
          '# Ciphers and keying',
          '#RekeyLimit default none',
          '# Logging',
          '#SyslogFacility AUTH',
          '#LogLevel INFO',
          '# Authentication:',
          '#LoginGraceTime 2m',
          '#PermitRootLogin prohibit-password',
          '#StrictModes yes',
          '#MaxAuthTries 6',
          '#MaxSessions 10',
          '#PubkeyAuthentication yes',
          '# Expect .ssh/authorized_keys2 to be disregarded by default in future.',
          '#AuthorizedKeysFile	.ssh/authorized_keys .ssh/authorized_keys2',
          '#AuthorizedPrincipalsFile none',
          '#AuthorizedKeysCommand none',
          '#AuthorizedKeysCommandUser nobody',
          '# For this to work you will also need host keys in /etc/ssh/ssh_known_hosts',
          '#HostbasedAuthentication no',
          '# Change to yes if you don&#x27;t trust ~/.ssh/known_hosts for',
          '# HostbasedAuthentication',
          '#IgnoreUserKnownHosts no',
          '# Don&#x27;t read the user&#x27;s ~/.rhosts and ~/.shosts files',
          '#IgnoreRhosts yes',
          '# To disable tunneled clear text passwords, change to no here!',
          '#PasswordAuthentication yes',
          '#PermitEmptyPasswords no',
          '# Change to yes to enable challenge-response passwords (beware issues with',
          '# some PAM modules and threads)',
          'ChallengeResponseAuthentication no',
          '# Kerberos options',
          '#KerberosAuthentication no',
          '#KerberosOrLocalPasswd yes',
          '#KerberosTicketCleanup yes',
          '#KerberosGetAFSToken no',
          '# GSSAPI options',
          '#GSSAPIAuthentication no',
          '#GSSAPICleanupCredentials yes',
          '#GSSAPIStrictAcceptorCheck yes',
          '#GSSAPIKeyExchange no',
          '# Set this to &#x27;yes&#x27; to enable PAM authentication, account processing,',
          '# and session processing. If this is enabled, PAM authentication will',
          '# be allowed through the ChallengeResponseAuthentication and',
          '# PasswordAuthentication.  Depending on your PAM configuration,',
          '# PAM authentication via ChallengeResponseAuthentication may bypass',
          '# the setting of &quot;PermitRootLogin without-password&quot;.',
          '# If you just want the PAM account and session checks to run without',
          '# PAM authentication, then enable this but set PasswordAuthentication',
          '# and ChallengeResponseAuthentication to &#x27;no&#x27;.',
          'UsePAM yes',
          '#AllowAgentForwarding yes',
          '#AllowTcpForwarding yes',
          '#GatewayPorts no',
          'X11Forwarding yes',
          '#X11DisplayOffset 10',
          '#X11UseLocalhost yes',
          '#PermitTTY yes',
          'PrintMotd no',
          '#PrintLastLog yes',
          '#TCPKeepAlive yes',
          '#PermitUserEnvironment no',
          '#Compression delayed',
          '#ClientAliveInterval 0',
          '#ClientAliveCountMax 3',
          '#UseDNS no',
          '#PidFile /var/run/sshd.pid',
          '#MaxStartups 10:30:100',
          '#PermitTunnel no',
          '#ChrootDirectory none',
          '#VersionAddendum none',
          '# no default banner path',
          '#Banner none',
          '# Allow client to pass locale environment variables',
          'AcceptEnv LANG LC_*',
          '# override default of no subsystems',
          'Subsystem	sftp	/usr/lib/openssh/sftp-server',
          '# Example of overriding settings on a per-user basis',
          '#Match User anoncvs',
          '#	X11Forwarding no',
          '#	AllowTcpForwarding no',
          '#	PermitTTY no',
          '#	ForceCommand cvs server',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Com este arquivo, podemos alterar a configura√ß√£o de como o <code>SSH</code> funciona no nosso computador. Por exemplo, podemos ver uma linha comentada que diz</p>
      <div class='highlight'><pre><code class="language-bash">#Porta 22</code></pre></div>
      <p>Se a descomentar e mudar o n√∫mero <code>SSH</code>, deixar√° de usar a porta 22, que √© sua porta padr√£o, e usar√° o n√∫mero da porta especificada ali.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h2 id="C√≥pia de arquivos por SSH">C√≥pia de arquivos por <code>SSH</code><a class="anchor-link" href="#C√≥pia de arquivos por SSH"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 71" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Podemos copiar arquivos por <code>SSH</code> mediante o comando <code>scp</code> (c√≥pia segura). Para isso, a sintaxe √©</p>
      <div class='highlight'><pre><code class="language-bash">scp &amp;ltcaminho arquivo local&amp;gt &amp;ltusu√°rio&amp;gt@&amp;ltIP&amp;gt:&amp;ltcaminho para salvar&amp;gt</code></pre></div>
      <p>o</p>
      <div class='highlight'><pre><code class="language-bash">scp &amp;ltuser&amp;gt@&amp;ltip&amp;gt:&amp;ltpath to remote file&amp;gt &amp;ltpath to save&amp;gt</code></pre></div>
      <p>Da primeira forma, copiamos um arquivo do nosso computador para outro e, da segunda, de outro para o nosso.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Por exemplo, vamos fazer um <code>ls</code> do <code>server1</code></p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="o">-</span><span class="n">t</span> <span class="n">server1</span> <span class="s2">&quot;ls&quot;</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'snap',
          'Connection to 194.62.99.222 closed.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Vamos ver agora o que temos localmente que possamos passar</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ls</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          '2021-02-11-Introduccion-a-Python.ipynb         html_files',
          '2021-04-23-Calculo-matricial-con-Numpy.ipynb   html.ipynb',
          '2021-06-15-Manejo-de-datos-con-Pandas.ipynb    introduccion_python',
          '2022-09-12-Introduccion-a-la-terminal.ipynb    mi_paquete_de_python',
          '2023-01-22-Docker.ipynb		        movies.csv',
          '2023-02-01-Bash-scripting.ipynb	        movies.dat',
          '2023-02-04-Blip-2.ipynb		        notebooks_translated',
          '2023-XX-XX-SSH.ipynb			        __pycache__',
          'california_housing_train.csv		        scripts_bash',
          'command-line-cheat-sheet.pdf		        ssh.ipynb',
          'CSS.ipynb				        test.ipynb',
          '&#x27;Expresiones regulares.ipynb&#x27;',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Vamos enviar ao servidor o arquivo <code>html.ipynb</code> j√° que ocupa pouco</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">scp</span> <span class="n">html</span><span class="o">.</span><span class="n">ipynb</span> <span class="n">server1</span><span class="p">:</span><span class="o">/</span><span class="n">root</span><span class="o">/</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'html.ipynb                                    100%   14KB 229.0KB/s   00:00',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Voltamos a ver o que h√° dentro de <code>server1</code></p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="o">-</span><span class="n">t</span> <span class="n">server1</span> <span class="s2">&quot;ls&quot;</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'html.ipynb  snap',
          'Connection to 194.62.99.222 closed.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Foi copiado</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <h2 id="Sincroniza√ß√£o de arquivos por SSH">Sincroniza√ß√£o de arquivos por <code>SSH</code><a class="anchor-link" href="#Sincroniza√ß√£o de arquivos por SSH"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 72" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>O problema do comando <code>scp</code> √© que, se algo der errado durante a c√≥pia e o arquivo n√£o for completamente transferido, ao tentar novamente ser√° necess√°rio come√ßar do zero. Isso √© especialmente problem√°tico com arquivos muito grandes.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Para resolver isso, pode-se usar o <code>rsync</code>, a sintaxe √©</p>
      <div class='highlight'><pre><code class="language-bash">rsync --partial --progress --rsh=ssh &lt;caminho arquivo local&gt; &lt;usu√°rio&gt;@&lt;IP&gt;:&lt;caminho para salvar&gt;</code></pre></div>
      <p>o</p>
      <div class='highlight'><pre><code class="language-bash">rsync --partial --progress --rsh=ssh &lt;user&gt;@&lt;ip&gt;:&lt;caminho para o arquivo remoto&gt; &lt;caminho para salvar&gt;</code></pre></div>
      <p>Assim como antes, da primeira forma copia um arquivo do nosso computador para outro e a segunda de outro para o nosso. A flag <code>--partial</code> √© para indicar que arquivos parcialmente copiados devem ser salvos, ou seja, se a c√≥pia for interrompida antes de terminar, o que j√° foi copiado ser√° mantido. A flag <code>--progress</code> √© para indicar que deve mostrar o progresso da c√≥pia. A flag <code>--rsh=ssh</code> √© para indicar que a transfer√™ncia de arquivos deve ser feita por <code>SSH</code>.</p>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Passamos um arquivo</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">rsync</span> <span class="o">--</span><span class="n">partial</span> <span class="o">--</span><span class="n">progress</span> <span class="o">-</span><span class="n">rsh</span><span class="o">=</span><span class="n">ssh</span> <span class="mi">2021</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">15</span><span class="o">-</span><span class="n">Manejo</span><span class="o">-</span><span class="n">de</span><span class="o">-</span><span class="n">datos</span><span class="o">-</span><span class="n">con</span><span class="o">-</span><span class="n">Pandas</span><span class="o">.</span><span class="n">ipynb</span>  <span class="n">server1</span><span class="p">:</span><span class="o">/</span><span class="n">root</span><span class="o">/</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'sending incremental file list',
          '2021-06-15-Manejo-de-datos-con-Pandas.ipynb',
          '&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;608.34K 100%  197.78MB/s    0:00:00 (xfr#1, to-chk=0/1)',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>E vemos se foi copiado</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="o">-</span><span class="n">t</span> <span class="n">server1</span> <span class="s2">&quot;ls&quot;</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          '2021-06-15-Manejo-de-datos-con-Pandas.ipynb  html.ipynb  snap',
          'Connection to 194.62.99.222 closed.',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <h2 id="Montar pastas remotas localmente">Montar pastas remotas localmente<a class="anchor-link" href="#Montar pastas remotas localmente"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 73" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>No caso de quisermos ter uma pasta de outra m√°quina como se estivesse no nosso computador, temos que usar <code>sshfs</code>.</p>
      <p>Primeiro √© necess√°rio instal√°-lo por meio de</p>
      <div class='highlight'><pre><code class="language-bash">sudo apt install sshfs</code></pre></div>
      <p>E uma vez instalado, √© usado com a sintaxe</p>
      <div class='highlight'><pre><code class="language-bash">sshfs &amp;ltuser&amp;gt@&amp;ltip&amp;gt:&amp;ltcaminho remoto&amp;gt &amp;ltcaminho local para montar&amp;gt</code></pre></div>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Vamos a montar a pasta <code>/root</code> do <code>server1</code>, mas para isso primeiro vamos criar uma pasta onde ela ser√° montada.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">mkdir</span> <span class="n">server1folder</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <section class="section-block-markdown-cell">
      <p>Vemos que, dentro da pasta que montamos, n√£o h√° nada</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ls</span> <span class="n">server1folder</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <section class="section-block-markdown-cell">
      <p>Agora montamos a pasta do servidor</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!!</span><span class="n">sshfs</span> <span class="n">server1</span><span class="p">:</span><span class="o">/</span><span class="n">root</span><span class="o">/</span> <span class="n">server1folder</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <section class="section-block-markdown-cell">
      <p>Voltamos a ver o que h√° dentro</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ls</span> <span class="n">server1folder</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          '2021-06-15-Manejo-de-datos-con-Pandas.ipynb  html.ipynb  snap',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>
      
      <section class="section-block-markdown-cell">
      <p>Quando j√° n√£o quisermos ter a pasta montada, podemos desmont√°-la atrav√©s de <code>fusermount -u server1folder</code></p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!!</span><span class="n">fusermount</span> <span class="o">-</span><span class="n">u</span> <span class="n">server1folder</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <section class="section-block-markdown-cell">
      <p>Voltamos a olhar o que h√° dentro para ver se n√£o h√° nada</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ls</span> <span class="n">server1folder</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <section class="section-block-markdown-cell">
      <h2 id="Depurar a conex√£o SSH">Depurar a conex√£o <code>SSH</code><a class="anchor-link" href="#Depurar a conex√£o SSH"><img decoding="async" class="link-img" width="24px" height="24px" alt="link image 74" src={svg_paths.link_svg_path}/></a></h2>
      </section>
      
      <section class="section-block-markdown-cell">
      <p>Podemos depurar a conex√£o <code>SSH</code> adicionando de <code>-v</code> at√© <code>-vvvv</code> √† conex√£o, quanto mais <code>v</code>s colocarmos, maior ser√° o n√≠vel de informa√ß√£o.</p>
      </section>
      
      <CodeBlockInputCell
        text={[
      '<span></span><span class="err">!</span><span class="n">ssh</span> <span class="o">-</span><span class="n">v</span> <span class="n">server1</span>',
        ]}
        languaje='python'
      ></CodeBlockInputCell>
      
      <CodeBlockOutputCell
        text={[
          'OpenSSH_8.2p1 Ubuntu-4ubuntu0.5, OpenSSL 1.1.1f  31 Mar 2020',
          'debug1: Reading configuration data /home/wallabot/.ssh/config',
          'debug1: /home/wallabot/.ssh/config line 6: Applying options for server1',
          'debug1: Reading configuration data /etc/ssh/ssh_config',
          'debug1: /etc/ssh/ssh_config line 19: include /etc/ssh/ssh_config.d/*.conf matched no files',
          'debug1: /etc/ssh/ssh_config line 21: Applying options for *',
          'debug1: Connecting to 194.62.99.222 [194.62.99.222] port 22.',
          'debug1: Connection established.',
          'debug1: identity file /home/wallabot/.ssh/id_rsa type 0',
          'debug1: identity file /home/wallabot/.ssh/id_rsa-cert type -1',
          'debug1: identity file /home/wallabot/.ssh/id_dsa type -1',
          'debug1: identity file /home/wallabot/.ssh/id_dsa-cert type -1',
          'debug1: identity file /home/wallabot/.ssh/id_ecdsa type -1',
          'debug1: identity file /home/wallabot/.ssh/id_ecdsa-cert type -1',
          'debug1: identity file /home/wallabot/.ssh/id_ecdsa_sk type -1',
          'debug1: identity file /home/wallabot/.ssh/id_ecdsa_sk-cert type -1',
          'debug1: identity file /home/wallabot/.ssh/id_ed25519 type -1',
          'debug1: identity file /home/wallabot/.ssh/id_ed25519-cert type -1',
          'debug1: identity file /home/wallabot/.ssh/id_ed25519_sk type -1',
          'debug1: identity file /home/wallabot/.ssh/id_ed25519_sk-cert type -1',
          'debug1: identity file /home/wallabot/.ssh/id_xmss type -1',
          'debug1: identity file /home/wallabot/.ssh/id_xmss-cert type -1',
          'debug1: Local version string SSH-2.0-OpenSSH_8.2p1 Ubuntu-4ubuntu0.5',
          'debug1: Remote protocol version 2.0, remote software version OpenSSH_8.9p1 Ubuntu-3',
          'debug1: match: OpenSSH_8.9p1 Ubuntu-3 pat OpenSSH* compat 0x04000000',
          'debug1: Authenticating to 194.62.99.222:22 as &#x27;root&#x27;',
          'debug1: SSH2_MSG_KEXINIT sent',
          'debug1: SSH2_MSG_KEXINIT received',
          'debug1: kex: algorithm: curve25519-sha256',
          'debug1: kex: host key algorithm: ecdsa-sha2-nistp256',
          'debug1: kex: server-&amp;gt;client cipher: chacha20-poly1305@openssh.com MAC: &amp;lt;implicit&amp;gt; compression: none',
          'debug1: kex: client-&amp;gt;server cipher: chacha20-poly1305@openssh.com MAC: &amp;lt;implicit&amp;gt; compression: none',
          'debug1: expecting SSH2_MSG_KEX_ECDH_REPLY',
          'debug1: Server host key: ecdsa-sha2-nistp256 SHA256:jwpQt2a69LQcuvvYPPKL32bBwTi1Je/ZmUdr4zEiD1Y',
          'debug1: Host &#x27;194.62.99.222&#x27; is known and matches the ECDSA host key.',
          'debug1: Found key in /home/wallabot/.ssh/known_hosts:14',
          'debug1: rekey out after 134217728 blocks',
          'debug1: SSH2_MSG_NEWKEYS sent',
          'debug1: expecting SSH2_MSG_NEWKEYS',
          'debug1: SSH2_MSG_NEWKEYS received',
          'debug1: rekey in after 134217728 blocks',
          'debug1: Will attempt key: /home/wallabot/.ssh/id_rsa RSA SHA256:ID3HcrbyPBGjFx/qeiJK50eqihLGrpDVu02oRSyKGh4 agent',
          'debug1: Will attempt key: wallabot@wallabot RSA SHA256:Qlq6hXbToInW+efEK666BFT26EeUSpBhzcqxTLrDBpQ agent',
          'debug1: Will attempt key: /home/wallabot/.ssh/id_dsa',
          'debug1: Will attempt key: /home/wallabot/.ssh/id_ecdsa',
          'debug1: Will attempt key: /home/wallabot/.ssh/id_ecdsa_sk',
          'debug1: Will attempt key: /home/wallabot/.ssh/id_ed25519',
          'debug1: Will attempt key: /home/wallabot/.ssh/id_ed25519_sk',
          'debug1: Will attempt key: /home/wallabot/.ssh/id_xmss',
          'debug1: SSH2_MSG_EXT_INFO received',
          'debug1: kex_input_ext_info: server-sig-algs=&amp;lt;ssh-ed25519,sk-ssh-ed25519@openssh.com,ssh-rsa,rsa-sha2-256,rsa-sha2-512,ssh-dss,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,sk-ecdsa-sha2-nistp256@openssh.com,webauthn-sk-ecdsa-sha2-nistp256@openssh.com&amp;gt;',
          'debug1: kex_input_ext_info: publickey-hostbound@openssh.com (unrecognised)',
          'debug1: SSH2_MSG_SERVICE_ACCEPT received',
          'debug1: Authentications that can continue: publickey',
          'debug1: Next authentication method: publickey',
          'debug1: Offering public key: /home/wallabot/.ssh/id_rsa RSA SHA256:ID3HcrbyPBGjFx/qeiJK50eqihLGrpDVu02oRSyKGh4 agent',
          'debug1: Authentications that can continue: publickey',
          'debug1: Offering public key: wallabot@wallabot RSA SHA256:Qlq6hXbToInW+efEK666BFT26EeUSpBhzcqxTLrDBpQ agent',
          'debug1: Server accepts key: wallabot@wallabot RSA SHA256:Qlq6hXbToInW+efEK666BFT26EeUSpBhzcqxTLrDBpQ agent',
          'debug1: Authentication succeeded (publickey).',
          'Authenticated to 194.62.99.222 ([194.62.99.222]:22).',
          'debug1: channel 0: new [client-session]',
          'debug1: Requesting no-more-sessions@openssh.com',
          'debug1: Entering interactive session.',
          'debug1: pledge: network',
          'debug1: client_input_global_request: rtype hostkeys-00@openssh.com want_reply 0',
          'debug1: Remote: /root/.ssh/authorized_keys:1: key options: agent-forwarding port-forwarding pty user-rc x11-forwarding',
          'debug1: Remote: /root/.ssh/authorized_keys:1: key options: agent-forwarding port-forwarding pty user-rc x11-forwarding',
          'debug1: Sending environment.',
          'debug1: Sending env LANG = es_ES.UTF-8',
          'Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.15.0-60-generic x86_64)',
          '* Documentation:  https://help.ubuntu.com',
          '* Management:     https://landscape.canonical.com',
          '* Support:        https://ubuntu.com/advantage',
          '&#x20;&#x20;System information as of Fri Feb 24 01:25:10 PM UTC 2023',
          '&#x20;&#x20;System load:           0.0',
          '&#x20;&#x20;Usage of /:            15.2% of 24.53GB',
          '&#x20;&#x20;Memory usage:          34%',
          '&#x20;&#x20;Swap usage:            0%',
          '&#x20;&#x20;Processes:             89',
          '&#x20;&#x20;Users logged in:       0',
          '&#x20;&#x20;IPv4 address for eth0: 194.62.99.222',
          '&#x20;&#x20;IPv4 address for eth1: 10.7.0.168',
          '&#x20;&#x20;IPv6 address for eth2: 2a04:3542:8000:1000:d48a:cbff:fefb:5b1',
          '* Strictly confined Kubernetes makes edge and IoT secure. Learn how MicroK8s',
          '&#x20;&#x20;&#x20;just raised the bar for easy, resilient and secure K8s cluster deployment.',
          '&#x20;&#x20;&#x20;https://ubuntu.com/engage/secure-kubernetes-at-the-edge',
          '43 updates can be applied immediately.',
          'To see these additional updates run: apt list --upgradable',
          'Last login: Fri Feb 24 13:10:05 2023 from 188.127.184.59',
          ']0;root@server1: ~root@server1:~# ^C',
          ']0;root@server1: ~root@server1:~#',
        ]}
        languaje='python'
      ></CodeBlockOutputCell>





















































































































    </div>

  </section>

</PostLayout>
