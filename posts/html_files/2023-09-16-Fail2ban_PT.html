<section class="section-block-markdown-cell">
<h1 id="Fail2ban">Fail2ban<a class="anchor-link" href="#Fail2ban">¶</a></h1>
</section>
<section class="section-block-markdown-cell">
<blockquote>
<p>Aviso: Este post foi traduzido para o português usando um modelo de tradução automática. Por favor, me avise se encontrar algum erro.</p>
</blockquote>
</section>
<section class="section-block-markdown-cell">
<p>Com o Fail2ban podemos bloquear IPs que tentem se conectar a um dispositivo nosso, aqui vou explicar como configurar o bloqueio quando tentam se conectar por ssh</p>
</section>
<section class="section-block-markdown-cell">
<h2 id="Instalacao">Instalação<a class="anchor-link" href="#Instalacao">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<p>A instalação é muito simples, basta fazer</p>
<p>``` bash</p>
<p>sudo apt updatesudo apt install fail2ban```</p>
</section>
<section class="section-block-markdown-cell">
<h2 id="Arquivo de configuracao">Arquivo de configuração<a class="anchor-link" href="#Arquivo de configuracao">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<p>Uma vez instalado, modificamos o arquivo de configuração fazendo</p>
<p>``` bash</p>
<p>sudo nano /etc/fail2ban/jail.conf```</p>
</section>
<section class="section-block-markdown-cell">
<p>Descemos até a parte onde está <code>[sshd]</code>, no meu caso deixei assim</p>
<p>``` bash</p>
<p>[sshd]bantime  = 172800porta    = sshlogpath  = %(sshd_log)sbackend  = %(sshd_backend)smaxretry = 3```</p>
<p>O que ele faz é que se alguém fizer 3 tentativas de conexão, ele bane esse IP por 48 horas (172800 segundos).</p>
</section>
<section class="section-block-markdown-cell">
<h2 id="Revisar os logs">Revisar os logs<a class="anchor-link" href="#Revisar os logs">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<p>Podemos verificar através dos logs se algum IP foi bloqueado com</p>
<p>``` bash</p>
<p>cat /var/log/fail2ban.log```</p>
</section>