<section class="section-block-markdown-cell">
<h1 id="Regular-expressions">Regular expressions<a class="anchor-link" href="#Regular-expressions">¶</a></h1>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>This notebook has been automatically translated to make it accessible to more people, please let me know if you see any typos.</p>
<h2 id="Methods">Methods<a class="anchor-link" href="#Methods">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<h3 id="Findall">Findall<a class="anchor-link" href="#Findall">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>With the <code>findall()</code> method we can find all matches of a pattern in a string</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">"Hola, soy un string"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"Hola, soy"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['Hola, soy']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h3 id="Search">Search<a class="anchor-link" href="#Search">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>But if we want to find the position where a pattern is located, we can use the <code>search()</code> method to search for a pattern in a string. This method returns a Match object if it finds a match, otherwise it returns None.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s2">"soy"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>&lt;re.Match object; span=(6, 9), match='soy'&gt;
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h3 id="Match">Match<a class="anchor-link" href="#Match">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>We can also use the <code>match()</code> method that looks for the pattern <strong>at the beginning</strong> of the string.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">"Hola"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">"soy"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>&lt;re.Match object; span=(0, 4), match='Hola'&gt;
None
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h3 id="Span">Span<a class="anchor-link" href="#Span">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>If we want to get the position of the match, we can use the <code>span()</code> method which returns a tuple with the start and end position of the match.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">"Hola"</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">())</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>(0, 4)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h3 id="Group">Group<a class="anchor-link" href="#Group">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>Knowing the position of the match, we can use the <code>group()</code> method to get the substring that matches the pattern.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">"Hola"</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">())</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>Hola
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We could also use the start and end of the match to make a slice of the string.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">"Hola"</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">string</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">])</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>Hola
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h3 id="Split">Split<a class="anchor-link" href="#Split">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>With the <code>split()</code> method we can split a string into a list of substrings using a pattern as a separator.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">split</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"soy"</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">split</span><span class="p">)</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['Hola, ', ' un string']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>The sentence has been divided into two strings using "soy" as separator.</p>
</section>
<section class="section-block-markdown-cell">
<h3 id="Sub">Sub<a class="anchor-link" href="#Sub">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>With the <code>sub()</code> method we can replace all matches of a pattern with another substring.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">sub</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">"soy"</span><span class="p">,</span> <span class="s2">"eres"</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>Hola, eres un string
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>It has replaced all "I am" matches with "you are".</p>
</section>
<section class="section-block-markdown-cell">
<h2 id="Patterns">Patterns<a class="anchor-link" href="#Patterns">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<h3 id="The-.-character">The <code>.</code> character<a class="anchor-link" href="#The-.-character">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>With the <code>.</code> character we can search for any character, any character in our string will be found.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">"Hola, soy un string"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"."</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['H', 'o', 'l', 'a', ',', ' ', 's', 'o', 'y', ' ', 'u', 'n', ' ', 's', 't', 'r', 'i', 'n', 'g']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>If for example we want sequences of two characters we would search with two <code>.</code>s followed by `.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string1</span> <span class="o">=</span> <span class="s2">"Hola, soy un string"</span>
<span class="n">string2</span> <span class="o">=</span> <span class="s2">"Hola, soy un string2"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">".."</span><span class="p">,</span> <span class="n">string1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">".."</span><span class="p">,</span> <span class="n">string2</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['Ho', 'la', ', ', 'so', 'y ', 'un', ' s', 'tr', 'in']
['Ho', 'la', ', ', 'so', 'y ', 'un', ' s', 'tr', 'in', 'g2']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>As we can see <code>string1</code> has an odd number of characters, so the last <code>g</code> is not taken, but <code>string2</code> has an even number of characters, so it takes all characters.</p>
</section>
<section class="section-block-markdown-cell">
<p>Let's look at this another way, let's change each sequence of three characters by a <code>$</code> symbol.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">string1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">"..."</span><span class="p">,</span> <span class="s2">"$  "</span><span class="p">,</span> <span class="n">string1</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>Hola, soy un string
$  $  $  $  $  $  g
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>I have printed two spaces after each <code>$</code> so that you can see the change, you can see how the last character does not convert it.</p>
</section>
<section class="section-block-markdown-cell">
<h3 id="Predefined-and-constructed-classes">Predefined and constructed classes<a class="anchor-link" href="#Predefined-and-constructed-classes">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<h4 id="Digit">Digit<a class="anchor-link" href="#Digit">¶</a></h4>
</section>
<section class="section-block-markdown-cell">
<p>If we want to find the digits we need to use <code>d</code>.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">"Hola, soy un string con 123 digitos"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['1', '2', '3']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>As before, if for example we want two digits, we put <code>d</code> twice</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d\d"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['12']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h4 id="Letter">Letter<a class="anchor-link" href="#Letter">¶</a></h4>
</section>
<section class="section-block-markdown-cell">
<p>If we want to find letters we need to use <code>w</code>. Word<code>means all letters from</code>a<code>to</code>z<code>, from</code>A<code>to</code>Z<code>, numbers from</code>0<code>to</code>9<code>and</code>_`.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">"Hola, soy un_string con, 123 digitos"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\w"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['H', 'o', 'l', 'a', 's', 'o', 'y', 'u', 'n', '_', 's', 't', 'r', 'i', 'n', 'g', 'c', 'o', 'n', '1', '2', '3', 'd', 'i', 'g', 'i', 't', 'o', 's']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>As we can see, it takes everything except the spaces and the comma.</p>
</section>
<section class="section-block-markdown-cell">
<h4 id="Spaces">Spaces<a class="anchor-link" href="#Spaces">¶</a></h4>
</section>
<section class="section-block-markdown-cell">
<p>If we want to find spaces we need `s</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">"Hola, soy un_string con, 123 digitos"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">"\s"</span><span class="p">,</span> <span class="s2">"*"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>Hola,*soy*un_string*con,*123*digitos
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Regular expressions consider line breaks as spaces.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">"""Hola, soy un string </span>
<span class="s2">con un salto de línea"""</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">"\s"</span><span class="p">,</span> <span class="s2">"*"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>Hola,*soy*un*string**con*un*salto*de*línea
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h4 id="Ranks">Ranks<a class="anchor-link" href="#Ranks">¶</a></h4>
</section>
<section class="section-block-markdown-cell">
<p>If we want to search a range we use <code>[]</code>, for example, if we want the numbers from 4 to 8 we use</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">"1234567890"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"[4-8]"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['4', '5', '6', '7', '8']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We can extend the search range</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">"1234567890"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"[2-57-9]"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['2', '3', '4', '5', '7', '8', '9']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>If we also want to find a specific character, we enter the character followed by ``.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">"1234567890."</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"[2-57-9\.]"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['2', '3', '4', '5', '7', '8', '9', '.']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h4 id="Bracket-%5B-and-bracket-%5D">Bracket <code>[</code> and bracket <code>]</code><a class="anchor-link" href="#Bracket-%5B-and-bracket-%5D">¶</a></h4>
</section>
<section class="section-block-markdown-cell">
<p>As we have seen, if we want to find ranges we use <code>[]</code>, but what if we want to find only the <code>[</code> or the <code>]</code>? For that we have to use <code>[]</code> and <code>[</code>]`.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">"[1234567890]"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\["</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\]"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['[']
[']']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h3 id="Delimiters-+,-*,-?,-%60?">Delimiters <code>+</code>, <code>*</code>, <code>?</code>, `?<a class="anchor-link" href="#Delimiters-+,-*,-?,-%60?">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<h4 id="Star-*-(none-or-all)">Star <code>*</code> (none or all)<a class="anchor-link" href="#Star-*-(none-or-all)">¶</a></h4>
</section>
<section class="section-block-markdown-cell">
<p>The <code>*</code> delimiter indicates that you want to search for none or all of them, not one by one as before.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">"Hola, soy un string con 12 123 digitos"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d*"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['1', '2', '1', '2', '3']
['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '12', '', '123', '', '', '', '', '', '', '', '', '']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>As you can see, putting the <code>*</code> has found all the positions where there are zero characters or all characters</p>
</section>
<section class="section-block-markdown-cell">
<h4 id="Plus-+-(one-or-more)">Plus <code>+</code> (one or more)<a class="anchor-link" href="#Plus-+-(one-or-more)">¶</a></h4>
</section>
<section class="section-block-markdown-cell">
<p>With the delimiter <code>+</code> you indicate that you want to search for one or more</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">"Hola, soy un string con 1 12 123 digitos"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d+"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['1', '12', '123']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h4 id="Optional-?-(zero-or-one)">Optional <code>?</code> (zero or one)<a class="anchor-link" href="#Optional-?-(zero-or-one)">¶</a></h4>
</section>
<section class="section-block-markdown-cell">
<p>The <code>?</code> delimiter indicates that you want to search for zero or one.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">"Hola, soy un string con 1 12 123 digitos"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">"\d?"</span><span class="p">,</span> <span class="s2">"-"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>-H-o-l-a-,- -s-o-y- -u-n- -s-t-r-i-n-g- -c-o-n- -- --- ---- -d-i-g-i-t-o-s-
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h3 id="Counters">Counters<a class="anchor-link" href="#Counters">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>When we want to find something that appears x times we use the counters with the braces <code>{}</code>. For example, if we want to find a sequence in which there are at least two digits</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">"Hola, soy un string con 1 12 123 1234 1234digitos"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d</span><span class="si">{2}</span><span class="s2">"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['12', '12', '12', '34', '12', '34']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>As you can see you have found the sequences <code>12</code> and <code>34</code>.</p>
</section>
<section class="section-block-markdown-cell">
<p>The counters accept an upper and lower dimension <code>{inf, sup}</code>.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">"Hola, soy un string con 1 12 123 1234 1234digitos"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,5}"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['12', '123', '1234', '1234']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>If the upper dimension is not defined, it means that you want at least the number of elements indicated, but with no upper limit.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">"Hola, soy un string con 1 12 123 1234 12345464168415641646451563416 digitos"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['12', '123', '1234', '12345464168415641646451563416']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>If we want to use the notation of upper and lower dimension, but we want a fixed number, we have to put that number in both dimensions</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s2">"Hola, soy un string con 1 12 123 1234 12345464168415641646451563416 digitos"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,3}"</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['12', '123', '123', '123', '454', '641', '684', '156', '416', '464', '515', '634', '16']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h3 id="Classes">Classes<a class="anchor-link" href="#Classes">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>You can create classes using <code>[]</code> brackets. Actually we saw that this was used for ranges, but, once you define what you want inside, you can consider it as a class and operate with the <code>[]</code>.</p>
</section>
<section class="section-block-markdown-cell">
<p>For example, suppose we have a telephone number, which can be given in one of the following ways</p>
<ul>
<li>666-66-66-66</li>
<li>666-666-666</li>
<li>666 666 666</li>
<li>666 66 66 66</li>
<li>666666666</li>
</ul>
<p>There are many ways to give a number, so let's see how to create a class to define the delimiter</p>
</section>
<section class="section-block-markdown-cell">
<p>First we are going to tell it to look for all number sequences in which there are at least two numbers.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string1</span> <span class="o">=</span> <span class="s2">"666-66-66-66"</span>
<span class="n">string2</span> <span class="o">=</span> <span class="s2">"666-666-666"</span>
<span class="n">string3</span> <span class="o">=</span> <span class="s2">"666 66 66 66"</span>
<span class="n">string4</span> <span class="o">=</span> <span class="s2">"666 666 666"</span>
<span class="n">string5</span> <span class="o">=</span> <span class="s2">"666666666"</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string1: </span><span class="si">{</span><span class="n">string1</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}"</span><span class="p">,</span> <span class="n">string1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string2: </span><span class="si">{</span><span class="n">string2</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}"</span><span class="p">,</span> <span class="n">string2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string3: </span><span class="si">{</span><span class="n">string3</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}"</span><span class="p">,</span> <span class="n">string3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string4: </span><span class="si">{</span><span class="n">string4</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}"</span><span class="p">,</span> <span class="n">string4</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string5: </span><span class="si">{</span><span class="n">string5</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}"</span><span class="p">,</span> <span class="n">string5</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>string1: 666-66-66-66 --&gt; ['666', '66', '66', '66']
string2: 666-666-666 --&gt; ['666', '666', '666']
string3: 666 66 66 66 --&gt; ['666', '66', '66', '66']
string4: 666 666 666 --&gt; ['666', '666', '666']
string5: 666666666 --&gt; ['666666666']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Now we define to find the separator as a <code>-</code> or a space</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string1</span> <span class="o">=</span> <span class="s2">"666-66-66-66"</span>
<span class="n">string2</span> <span class="o">=</span> <span class="s2">"666-666-666"</span>
<span class="n">string3</span> <span class="o">=</span> <span class="s2">"666 66 66 66"</span>
<span class="n">string4</span> <span class="o">=</span> <span class="s2">"666 666 666"</span>
<span class="n">string5</span> <span class="o">=</span> <span class="s2">"666666666"</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string1: </span><span class="si">{</span><span class="n">string1</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"[-\s]"</span><span class="p">,</span> <span class="n">string1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string2: </span><span class="si">{</span><span class="n">string2</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"[-\s]"</span><span class="p">,</span> <span class="n">string2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string3: </span><span class="si">{</span><span class="n">string3</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"[-\s]"</span><span class="p">,</span> <span class="n">string3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string4: </span><span class="si">{</span><span class="n">string4</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"[-\s]"</span><span class="p">,</span> <span class="n">string4</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string5: </span><span class="si">{</span><span class="n">string5</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"[-\s]"</span><span class="p">,</span> <span class="n">string5</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>string1: 666-66-66-66 --&gt; ['-', '-', '-']
string2: 666-666-666 --&gt; ['-', '-']
string3: 666 66 66 66 --&gt; [' ', ' ', ' ']
string4: 666 666 666 --&gt; [' ', ' ']
string5: 666666666 --&gt; []
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>As you can see in the last string it has not found, so we add a <code>?</code> to find when there is zero or one.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string1</span> <span class="o">=</span> <span class="s2">"666-66-66-66"</span>
<span class="n">string2</span> <span class="o">=</span> <span class="s2">"666-666-666"</span>
<span class="n">string3</span> <span class="o">=</span> <span class="s2">"666 66 66 66"</span>
<span class="n">string4</span> <span class="o">=</span> <span class="s2">"666 666 666"</span>
<span class="n">string5</span> <span class="o">=</span> <span class="s2">"666666666"</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string1: </span><span class="si">{</span><span class="n">string1</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"[-\s]?"</span><span class="p">,</span> <span class="n">string1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string2: </span><span class="si">{</span><span class="n">string2</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"[-\s]?"</span><span class="p">,</span> <span class="n">string2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string3: </span><span class="si">{</span><span class="n">string3</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"[-\s]?"</span><span class="p">,</span> <span class="n">string3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string4: </span><span class="si">{</span><span class="n">string4</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"[-\s]?"</span><span class="p">,</span> <span class="n">string4</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string5: </span><span class="si">{</span><span class="n">string5</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"[-\s]?"</span><span class="p">,</span> <span class="n">string5</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>string1: 666-66-66-66 --&gt; ['', '', '', '-', '', '', '-', '', '', '-', '', '', '']
string2: 666-666-666 --&gt; ['', '', '', '-', '', '', '', '-', '', '', '', '']
string3: 666 66 66 66 --&gt; ['', '', '', ' ', '', '', ' ', '', '', ' ', '', '', '']
string4: 666 666 666 --&gt; ['', '', '', ' ', '', '', '', ' ', '', '', '', '']
string5: 666666666 --&gt; ['', '', '', '', '', '', '', '', '', '']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Now we are looking for everything to be together</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string1</span> <span class="o">=</span> <span class="s2">"666-66-66-66"</span>
<span class="n">string2</span> <span class="o">=</span> <span class="s2">"666-666-666"</span>
<span class="n">string3</span> <span class="o">=</span> <span class="s2">"666 66 66 66"</span>
<span class="n">string4</span> <span class="o">=</span> <span class="s2">"666 666 666"</span>
<span class="n">string5</span> <span class="o">=</span> <span class="s2">"666666666"</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string1: </span><span class="si">{</span><span class="n">string1</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?"</span><span class="p">,</span> <span class="n">string1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string2: </span><span class="si">{</span><span class="n">string2</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?"</span><span class="p">,</span> <span class="n">string2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string3: </span><span class="si">{</span><span class="n">string3</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?"</span><span class="p">,</span> <span class="n">string3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string4: </span><span class="si">{</span><span class="n">string4</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?"</span><span class="p">,</span> <span class="n">string4</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string5: </span><span class="si">{</span><span class="n">string5</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?"</span><span class="p">,</span> <span class="n">string5</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>string1: 666-66-66-66 --&gt; ['666-66-66-66']
string2: 666-666-666 --&gt; []
string3: 666 66 66 66 --&gt; ['666 66 66 66']
string4: 666 666 666 --&gt; []
string5: 666666666 --&gt; ['666666666']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>As we see in <code>string2</code> and <code>string4</code>, it finds nothing. We have set the filter <code>[\d{2,}[\s]?</code> 4 times, i.e. we want a sequence of at least two numbers, followed by zero or a hyphen or space separator that repeats 4 times. But in the last sequence there is no need for the <code>[\d{2,}[\s]?</code>, since it will never end a number with a space or a hyphen.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string1</span> <span class="o">=</span> <span class="s2">"666-66-66-66"</span>
<span class="n">string2</span> <span class="o">=</span> <span class="s2">"666-666-666"</span>
<span class="n">string3</span> <span class="o">=</span> <span class="s2">"666 66 66 66"</span>
<span class="n">string4</span> <span class="o">=</span> <span class="s2">"666 666 666"</span>
<span class="n">string5</span> <span class="o">=</span> <span class="s2">"666666666"</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string1: </span><span class="si">{</span><span class="n">string1</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}"</span><span class="p">,</span> <span class="n">string1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string2: </span><span class="si">{</span><span class="n">string2</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}"</span><span class="p">,</span> <span class="n">string2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string3: </span><span class="si">{</span><span class="n">string3</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}"</span><span class="p">,</span> <span class="n">string3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string4: </span><span class="si">{</span><span class="n">string4</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}"</span><span class="p">,</span> <span class="n">string4</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string5: </span><span class="si">{</span><span class="n">string5</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}"</span><span class="p">,</span> <span class="n">string5</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>string1: 666-66-66-66 --&gt; ['666-66-66-66']
string2: 666-666-666 --&gt; []
string3: 666 66 66 66 --&gt; ['666 66 66 66']
string4: 666 666 666 --&gt; []
string5: 666666666 --&gt; ['666666666']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>It is still not found for <code>string2</code> and <code>string4</code>. This is because the last thing in the filter is a <code>d{2,}</code>, i.e. after the third separator we are expecting at least 2 numbers, but that in <code>string2</code> and <code>string4</code> doesn't happen, so we put the following</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string1</span> <span class="o">=</span> <span class="s2">"666-66-66-66"</span>
<span class="n">string2</span> <span class="o">=</span> <span class="s2">"666-666-666"</span>
<span class="n">string3</span> <span class="o">=</span> <span class="s2">"666 66 66 66"</span>
<span class="n">string4</span> <span class="o">=</span> <span class="s2">"666 666 666"</span>
<span class="n">string5</span> <span class="o">=</span> <span class="s2">"666666666"</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string1: </span><span class="si">{</span><span class="n">string1</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?\d*"</span><span class="p">,</span> <span class="n">string1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string2: </span><span class="si">{</span><span class="n">string2</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?\d*"</span><span class="p">,</span> <span class="n">string2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string3: </span><span class="si">{</span><span class="n">string3</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?\d*"</span><span class="p">,</span> <span class="n">string3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string4: </span><span class="si">{</span><span class="n">string4</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?\d*"</span><span class="p">,</span> <span class="n">string4</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string5: </span><span class="si">{</span><span class="n">string5</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}[-\s]?\d{2,}[-\s]?\d{2,}[-\s]?\d*"</span><span class="p">,</span> <span class="n">string5</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>string1: 666-66-66-66 --&gt; ['666-66-66-66']
string2: 666-666-666 --&gt; ['666-666-666']
string3: 666 66 66 66 --&gt; ['666 66 66 66']
string4: 666 666 666 --&gt; ['666 666 666']
string5: 666666666 --&gt; ['666666666']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h3 id="The-delimiter-?-as-a-quick-delimiter">The delimiter <code>?</code> as a quick delimiter<a class="anchor-link" href="#The-delimiter-?-as-a-quick-delimiter">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>The above example can be filtered by <code>d+?[- ]</code>.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string1</span> <span class="o">=</span> <span class="s2">"666-66-66-66"</span>
<span class="n">string2</span> <span class="o">=</span> <span class="s2">"666-666-666"</span>
<span class="n">string3</span> <span class="o">=</span> <span class="s2">"666 66 66 66"</span>
<span class="n">string4</span> <span class="o">=</span> <span class="s2">"666 666 666"</span>
<span class="n">string5</span> <span class="o">=</span> <span class="s2">"666666666"</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string1: </span><span class="si">{</span><span class="n">string1</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d+?[- ]"</span><span class="p">,</span> <span class="n">string1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string2: </span><span class="si">{</span><span class="n">string2</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d+?[- ]"</span><span class="p">,</span> <span class="n">string2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string3: </span><span class="si">{</span><span class="n">string3</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d+?[- ]"</span><span class="p">,</span> <span class="n">string3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string4: </span><span class="si">{</span><span class="n">string4</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d+?[- ]"</span><span class="p">,</span> <span class="n">string4</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string5: </span><span class="si">{</span><span class="n">string5</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d+?[- ]"</span><span class="p">,</span> <span class="n">string5</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>string1: 666-66-66-66 --&gt; ['666-', '66-', '66-']
string2: 666-666-666 --&gt; ['666-', '666-']
string3: 666 66 66 66 --&gt; ['666 ', '66 ', '66 ']
string4: 666 666 666 --&gt; ['666 ', '666 ']
string5: 666666666 --&gt; []
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>If the <code>?</code> delimiter were not present, we would have <code>\d+[- ]</code>, which means a sequence of one or more numbers followed by a space or a hyphen. But what the <code>?</code> delimiter does is to make this search faster.</p>
</section>
<section class="section-block-markdown-cell">
<h3 id="The-denier">The denier<a class="anchor-link" href="#The-denier">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>Before we have seen that with <code>d</code> we found digits, so with <code>D</code> we find everything that are not digits.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string1</span> <span class="o">=</span> <span class="s2">"E3s4t6e e1s2t3r5i6n7g8 t9i0e4n2e1 d4i5g7i9t0o5s2"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\D"</span><span class="p">,</span> <span class="n">string1</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['E', 's', 't', 'e', ' ', 'e', 's', 't', 'r', 'i', 'n', 'g', ' ', 't', 'i', 'e', 'n', 'e', ' ', 'd', 'i', 'g', 'i', 't', 'o', 's']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>The same happens with letters, if we write <code>W</code> it will find everything that is not letters.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string1</span> <span class="o">=</span> <span class="s2">"Letras ab27_ no letras ,.:;´ç"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\W"</span><span class="p">,</span> <span class="n">string1</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>[' ', ' ', ' ', ' ', ',', '.', ':', ';', '´']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>If we put <code>S</code> we will find everything other than spaces.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\S"</span><span class="p">,</span> <span class="n">string1</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['L', 'e', 't', 'r', 'a', 's', 'a', 'b', '2', '7', '_', 'n', 'o', 'l', 'e', 't', 'r', 'a', 's', ',', '.', ':', ';', '´', 'ç']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>But in case we have a class or something else, we can deny by <code>^</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string1</span> <span class="o">=</span> <span class="s2">"1234567890"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"[^5-9]"</span><span class="p">,</span> <span class="n">string1</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['1', '2', '3', '4', '0']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Going back to the example of the phone numbers from before, we can filter them by the following</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string1</span> <span class="o">=</span> <span class="s2">"666-66-66-66"</span>
<span class="n">string2</span> <span class="o">=</span> <span class="s2">"666-666-666"</span>
<span class="n">string3</span> <span class="o">=</span> <span class="s2">"666 66 66 66"</span>
<span class="n">string4</span> <span class="o">=</span> <span class="s2">"666 666 666"</span>
<span class="n">string5</span> <span class="o">=</span> <span class="s2">"666666666"</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string1: </span><span class="si">{</span><span class="n">string1</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}\D?\d{2,}\D?\d{2,}\D?\d*"</span><span class="p">,</span> <span class="n">string1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string2: </span><span class="si">{</span><span class="n">string2</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}\D?\d{2,}\D?\d{2,}\D?\d*"</span><span class="p">,</span> <span class="n">string2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string3: </span><span class="si">{</span><span class="n">string3</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}\D?\d{2,}\D?\d{2,}\D?\d*"</span><span class="p">,</span> <span class="n">string3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string4: </span><span class="si">{</span><span class="n">string4</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}\D?\d{2,}\D?\d{2,}\D?\d*"</span><span class="p">,</span> <span class="n">string4</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"string5: </span><span class="si">{</span><span class="n">string5</span><span class="si">}</span><span class="s2"> --&gt;"</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d{2,}\D?\d{2,}\D?\d{2,}\D?\d*"</span><span class="p">,</span> <span class="n">string5</span><span class="p">))</span>
<span class="n">string5</span> <span class="o">=</span> <span class="s2">"666 666 666"</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>string1: 666-66-66-66 --&gt; ['666-66-66-66']
string2: 666-666-666 --&gt; ['666-666-666']
string3: 666 66 66 66 --&gt; ['666 66 66 66']
string4: 666 666 666 --&gt; ['666 666 666']
string5: 666666666 --&gt; ['666666666']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>What we are doing is asking for sequences of at least two digits followed by one or no non-digits.</p>
</section>
<section class="section-block-markdown-cell">
<h3 id="The-beginning-%5E-and-end-of-line-$.">The beginning <code>^</code> and end of line <code>$</code>.<a class="anchor-link" href="#The-beginning-%5E-and-end-of-line-$.">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>With <code>^</code> we can search for the beginning of a line, for example, if we want to find a digit only at the beginning of a line</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string1</span> <span class="o">=</span> <span class="s2">"linea 1"</span>
<span class="n">string2</span> <span class="o">=</span> <span class="s2">"2ª linea"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"^\d"</span><span class="p">,</span> <span class="n">string1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"^\d"</span><span class="p">,</span> <span class="n">string2</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>[]
['2']
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>As you can see there is only one digit at the beginning of the line in <code>string2</code>.</p>
</section>
<section class="section-block-markdown-cell">
<p>Likewise, the end of a line can be found with <code>$</code>. If we want to find a digit only at the end of a line</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">string1</span> <span class="o">=</span> <span class="s2">"linea 1"</span>
<span class="n">string2</span> <span class="o">=</span> <span class="s2">"2ª linea"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d$"</span><span class="p">,</span> <span class="n">string1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\d$"</span><span class="p">,</span> <span class="n">string2</span><span class="p">))</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>['1']
[]
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>This only occurs in <code>string1</code>.</p>
</section>
<section class="section-block-markdown-cell">
<h2 id="Practical-examples">Practical examples<a class="anchor-link" href="#Practical-examples">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<h3 id="Logs">Logs<a class="anchor-link" href="#Logs">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>If in the following log we want to find only the <code>WARN</code>s</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">log</span> <span class="o">=</span> <span class="s2">"""[LOG ENTRY] [ERROR] The system is unstable</span>
<span class="s2">[LOG ENTRY] [WARN] The system may be down</span>
<span class="s2">[LOG ENTRY] [WARN] Microsoft just bought Github</span>
<span class="s2">[LOG DATA] [LOG] Everything is OK</span>
<span class="s2">[LOG ENTRY] [LOG] [user:@beco] Logged in</span>
<span class="s2">[LOG ENTRY] [LOG] [user:@beco] Clicked here</span>
<span class="s2">[LOG DATA] [LOG] [user:@celismx] Did something</span>
<span class="s2">[LOG ENTRY] [LOG] [user:@beco] Rated the app</span>
<span class="s2">[LOG ENTRY] [LOG] [user:@beco] Logged out</span>
<span class="s2">[LOG LINE] [LOG] [user:@celismx] Logged in"""</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\[LOG.*\[WARN\].*"</span><span class="p">,</span> <span class="n">log</span><span class="p">)</span>
<span class="n">result</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt-output-prompt">Out[35]:</div>
<div class="output-text-output-subareaoutput_execute_result">
<pre>['[LOG ENTRY] [WARN] The system may be down',
 '[LOG ENTRY] [WARN] Microsoft just bought Github']</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h3 id="Phone-number">Phone number<a class="anchor-link" href="#Phone-number">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>Within a number we can find letters such as <code>e</code> for extension, <code>#</code> also for extension, or <code>p</code> to pause if a computer calls. We can also find the <code>+</code> to indicate a country prefix and separators such as spaces, <code>-</code>, <code>.</code>, <code>.</code>, <code>.</code>, <code>.</code>, <code>.</code>, <code>.</code>, <code>.</code>, <code>.</code>.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">tel</span> <span class="o">=</span> <span class="s2">"""555658</span>
<span class="s2">56-58-11</span>
<span class="s2">56.58.11</span>
<span class="s2">56.78-98</span>
<span class="s2">65 09 87</span>
<span class="s2">76y87r98</span>
<span class="s2">45y78-56</span>
<span class="s2">78.87 65</span>
<span class="s2">78 54-56</span>
<span class="s2">+521565811</span>
<span class="s2">58-11-11#246</span>
<span class="s2">55256048p123</span>
<span class="s2">55256048e123"""</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\+?\d{2,3}[^\da-zA-Z</span><span class="se">\n</span><span class="s2">]?\d{2,3}[^\da-zA-Z</span><span class="se">\n</span><span class="s2">]?\d{2,3}[#pe]?\d*"</span><span class="p">,</span> <span class="n">tel</span><span class="p">)</span>
<span class="n">result</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt-output-prompt">Out[36]:</div>
<div class="output-text-output-subareaoutput_execute_result">
<pre>['555658',
 '56-58-11',
 '56.58.11',
 '56.78-98',
 '65 09 87',
 '78.87 65',
 '78 54-56',
 '+521565811',
 '58-11-11#246',
 '55256048p123',
 '55256048e123']</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Here is an explanation</p>
<ul>
<li><code>+?</code>: Beginning with the character <code>+</code> and containing either zero or one</li>
<li>``d{2,3}`: To be followed by 2 to 3 digits</li>
<li>Next there can be zero or a character that is neither a digit, nor a letter from <code>a</code> to <code>z</code>, nor a letter from <code>A</code> to <code>Z</code>, nor a line break.</li>
<li>``d{2,3}`: To be followed by 2 to 3 digits</li>
<li>Next there can be zero or a character that is neither a digit, nor a letter from <code>a</code> to <code>z</code>, nor a letter from <code>A</code> to <code>Z</code>, nor a line break.</li>
<li>``d{2,3}`: To be followed by 2 to 3 digits</li>
<li><code>[#pe]?</code>: Then there can be zero or one character either <code>#</code>, or <code>p</code>, or <code>e</code>.</li>
<li>Lastly, let there be zero or all numbers.</li>
</ul>
</section>
<section class="section-block-markdown-cell">
<h3 id="URLs">URLs<a class="anchor-link" href="#URLs">¶</a></h3>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">urls</span> <span class="o">=</span> <span class="s2">"""url: https://www.instagram.com/p/BXB4zsUlW5Z/?taken-by=beco.mx</span>
<span class="s2">url: http://instagram.com/p/blablablah</span>
<span class="s2">url: http://itam.mx/test</span>
<span class="s2">http://instagram.com/p/blablablah</span>
<span class="s2">https://www.vanguarsoft.com.ve</span>
<span class="s2">http://platzi.com</span>
<span class="s2">https://traetelo.net</span>
<span class="s2">https://traetelo.net/images archivo.jsp</span>
<span class="s2">url: https://subdominio.traetelo.net</span>
<span class="s2">url: https://www.instagram.com/p/BXB4zsUlW5Z/?taken-by=beco.mx</span>
<span class="s2">url: http://instagram.com/p/blablablah</span>
<span class="s2">url: http://itam.mx/test</span>
<span class="s2">http://instagram.com/p/blablablah</span>
<span class="s2">https://www.google.com.co/</span>
<span class="s2">https://sub.dominio.de.alguien.com/archivo.html</span>
<span class="s2">https://en.wikipedia.org/wiki/.org</span>
<span class="s2">https://cdn-microsoft.org/image/seixo2t9sjl_22.jpg</span>
<span class="s2">https://hola.pizza</span>
<span class="s2">https://platzi.com/clases/1301-expresiones-regulares/11860-urls9102/ clase</span>


<span class="s2">https://api.giphy.com/v1/gifs/search?q=Rick and Morty&amp;limit=10&amp;api_key=DG3hItPp5HIRNC0nit3AOR7eQZAe</span>

<span class="s2">http://localhost:3000/something?color1=red&amp;color2=blue</span>
<span class="s2">http://localhost:3000/display/post?size=small</span>
<span class="s2"> http://localhost:3000/?name=satyam</span>
<span class="s2"> http://localhost:3000/scanned?orderid=234</span>
<span class="s2"> http://localhost:3000/getUsers?userId=12354411&amp;name=Billy</span>
<span class="s2"> http://localhost:3000/getUsers?userId=12354411</span>
<span class="s2">http://localhost:3000/search?city=Barcelona</span>

<span class="s2">www.sitiodeejemplo.net/pagina.php?nombredevalor1=valor1&amp;nombredevalor2=valor2"""</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"https?:\/\/[\w\-\.]+\.\w{2,6}\/?\S*"</span><span class="p">,</span> <span class="n">urls</span><span class="p">)</span>
<span class="n">result</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt-output-prompt">Out[37]:</div>
<div class="output-text-output-subareaoutput_execute_result">
<pre>['https://www.instagram.com/p/BXB4zsUlW5Z/?taken-by=beco.mx',
 'http://instagram.com/p/blablablah',
 'http://itam.mx/test',
 'http://instagram.com/p/blablablah',
 'https://www.vanguarsoft.com.ve',
 'http://platzi.com',
 'https://traetelo.net',
 'https://traetelo.net/images',
 'https://subdominio.traetelo.net',
 'https://www.instagram.com/p/BXB4zsUlW5Z/?taken-by=beco.mx',
 'http://instagram.com/p/blablablah',
 'http://itam.mx/test',
 'http://instagram.com/p/blablablah',
 'https://www.google.com.co/',
 'https://sub.dominio.de.alguien.com/archivo.html',
 'https://en.wikipedia.org/wiki/.org',
 'https://cdn-microsoft.org/image/seixo2t9sjl_22.jpg',
 'https://hola.pizza',
 'https://platzi.com/clases/1301-expresiones-regulares/11860-urls9102/',
 'https://api.giphy.com/v1/gifs/search?q=Rick']</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Here is an explanation</p>
<ul>
<li><code>http</code>: We want it to start with <code>http</code>.</li>
<li><code>s?</code>: There may or may not be an <code>s</code> in the following.</li>
<li><code>:</code>://<code>: Followed by</code>://`.</li>
<li>`[*]: Followed by one or more letters, gions or periods</li>
<li>Next, a point.</li>
<li>``w{2,6}`: Between 2 and 6 letters for the tld</li>
<li><code>/?</code>: Followed by zero or a <code>/</code>.</li>
<li>None or everything that is not a space.</li>
</ul>
</section>
<section class="section-block-markdown-cell">
<h3 id="Mails">Mails<a class="anchor-link" href="#Mails">¶</a></h3>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">mails</span> <span class="o">=</span> <span class="s2">"""esto.es_un.mail@mail.com</span>
<span class="s2">esto.es_un.mail+complejo@mail.com</span>
<span class="s2">dominio.com</span>
<span class="s2">rodrigo.jimenez@yahoo.com.mx</span>
<span class="s2">ruben@starbucks.com</span>
<span class="s2">esto_no$es_email@dominio.com</span>
<span class="s2">no_se_de_internet3@hotmail.com"""</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"[\w\._]{5,30}\+?[\w\._]{0,10}@[\w\.-]{2,}\.\w{2,6}"</span><span class="p">,</span> <span class="n">mails</span><span class="p">)</span>
<span class="n">result</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt-output-prompt">Out[38]:</div>
<div class="output-text-output-subareaoutput_execute_result">
<pre>['esto.es_un.mail@mail.com',
 'esto.es_un.mail+complejo@mail.com',
 'rodrigo.jimenez@yahoo.com.mx',
 'ruben@starbucks.com',
 'es_email@dominio.com',
 'no_se_de_internet3@hotmail.com']</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Here is an explanation</p>
<ul>
<li>{5,30}`: We want it to start with between 5 and 30 (which is the minimum and maximum that gmail supports) letters, dots or underscores.</li>
<li><code>+?</code>: Followed by zero or a <code>+</code>.</li>
<li>{0,10}`: Then between 0 and 10 letters, dots or underscores.</li>
<li><code>@</code>: The <code>@</code>: The <code>@</code>: The <code>@</code>: The <code>@</code></li>
<li>{[{2,}`: Between 2 and infinite letters, dots and dashes (domain)</li>
<li><code>.</code>: Followed by a `.</li>
<li>``w{2,6}`: And finally between 2 and 6 letters for the tld</li>
</ul>
</section>
<section class="section-block-markdown-cell">
<h3 id="Locations">Locations<a class="anchor-link" href="#Locations">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>There are two possible ways to give locations, so we analyze both of them</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">loc</span> <span class="o">=</span> <span class="s2">"""-99.205646,19.429707,2275.10</span>
<span class="s2">-99.205581, 19.429652,2275.10</span>
<span class="s2">-99.204654,19.428952,2275.58"""</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\-?\d{1,3}\.\d{1,6},\s?\-?\d{1,3}\.\d{1,6},.*"</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>
<span class="n">result</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt-output-prompt">Out[39]:</div>
<div class="output-text-output-subareaoutput_execute_result">
<pre>['-99.205646,19.429707,2275.10',
 '-99.205581, 19.429652,2275.10',
 '-99.204654,19.428952,2275.58']</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Here is an explanation</p>
<ul>
<li>We want it to start with zero or a minus sign.</li>
<li>Followed by between one and three numbers</li>
<li>Next, a point.</li>
<li>``d{1,6}`: After one to six numbers</li>
<li><code>,</code>: Then a <code>,</code>: Then a <code>,</code>: Then a <code>,</code>: Then a <code>,</code>: Then a <code>,</code></li>
<li>``s?`: After zero or a space</li>
<li>``-?`: Zero or a minus sign</li>
<li><code></code>d{1,3}`: Then between one and three numbers</li>
<li>Next, a point.</li>
<li>Followed by between one and six numbers.</li>
<li><code>,</code>: Then a comma</li>
<li><code>.*</code>: Lastly none or all types of characters</li>
</ul>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">loc</span> <span class="o">=</span> <span class="s2">"""-99 12' 34.08"W, 19 34' 56.98"N</span>
<span class="s2">-34 54' 32.00"E, -3 21' 67.00"S"""</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"\-?\d{1,3}\s\d{1,2}'\s\d{1,2}\.\d{2,2}</span><span class="se">\"</span><span class="s2">[WE],\s?\-?\d{1,3}\s\d{1,2}'\s\d{1,2}\.\d{2,2}</span><span class="se">\"</span><span class="s2">[SN]"</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>
<span class="n">result</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt-output-prompt">Out[40]:</div>
<div class="output-text-output-subareaoutput_execute_result">
<pre>['-99 12\' 34.08"W, 19 34\' 56.98"N', '-34 54\' 32.00"E, -3 21\' 67.00"S']</pre>
</div>
</div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>-99 12' 34.08"W, 19 34' 56.98"N
-34 54' 32.00"E, -3 21' 67.00"S
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Here is an explanation</p>
<ul>
<li>We want it to start with zero or a minus sign.</li>
<li>Followed by between one and three numbers</li>
<li><code>s</code>: Then a space</li>
<li>``d{1,2}`: Segment of one to two numbers</li>
<li><code>'</code>: Then a <code>'</code>: Then a <code>'</code>.</li>
<li>Followed by a space.</li>
<li><code>``d{1,2}</code>: Then between one and two numbers</li>
<li>After a period</li>
<li>``d{2,2}`: Followed by two numbers</li>
<li><code>"</code>: Then a <code>"</code>: Then a <code>"</code>: Then a <code>"</code>: Then a <code>"</code>: Then a <code>"</code>.</li>
<li><code>[WE]</code>: Then the letter <code>W</code> or the letter <code>E</code>.</li>
<li><code>,</code>: After a comma</li>
<li>Followed by a zero or a space</li>
<li>``-?`: After zero or a minus sign</li>
<li><code></code>d{1,3}`: Then between one and three numbers</li>
<li>Followed by a space.</li>
<li><code>``d{1,2}</code>: Then between one and two numbers</li>
<li><code>'</code>: Then a <code>'</code>: After a <code>'</code></li>
<li><code>s</code>: Then a space</li>
<li>``d{1,2}`: Next between one and two numbers</li>
<li>Followed by a period</li>
<li>``d{2,2}`: After two numbers</li>
<li><code></code> "<code>: Followed by</code> "<code>: Followed by</code> "`.</li>
<li><code>[SN]</code>: And finally the letter <code>S</code> or the letter <code>N</code>.</li>
</ul>
</section>
<section class="section-block-markdown-cell">
<h3 id="Names">Names<a class="anchor-link" href="#Names">¶</a></h3>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">nombres</span> <span class="o">=</span> <span class="s2">"""Camilo Sarmiento Gálvez</span>
<span class="s2">Alejandro Pliego Abasto</span>
<span class="s2">Milagros Reyes Japón</span>
<span class="s2">Samuel París Arrabal</span>
<span class="s2">Juan Pablo Tafalla</span>
<span class="s2">Axel Gálvez Velázquez</span>
<span class="s2">Óscar Montreal Aparicio</span>
<span class="s2">Jacobo Pozo Tassis</span>
<span class="s2">Guillermo Ordóñez Espiga</span>
<span class="s2">Eduardo Pousa Curbelo</span>
<span class="s2">Ivanna Bienvenida Kevin</span>
<span class="s2">Ada Tasis López</span>
<span class="s2">Luciana Sáenz García</span>
<span class="s2">Florencia Sainz Márquz</span>
<span class="s2">Catarina Cazalla Lombarda</span>
<span class="s2">Paloma Gallo Perro</span>
<span class="s2">Margarita Quesada Florez</span>
<span class="s2">Vicente Fox Quesada</span>
<span class="s2">Iris Graciani</span>
<span class="s2">Asunción Carballar</span>
<span class="s2">Constanza Muñoz</span>
<span class="s2">Manuel Andres García Márquez"""</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">"[A-ZÁÉÍÓÚ][a-záéíóú]+\s[A-ZÁÉÍÓÚ][a-záéíóú]+\s[A-ZÁÉÍÓÚ][a-záéíóú]+"</span><span class="p">,</span> <span class="n">nombres</span><span class="p">)</span>
<span class="n">result</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt-output-prompt">Out[42]:</div>
<div class="output-text-output-subareaoutput_execute_result">
<pre>['Camilo Sarmiento Gálvez',
 'Alejandro Pliego Abasto',
 'Milagros Reyes Japón',
 'Samuel París Arrabal',
 'Juan Pablo Tafalla',
 'Axel Gálvez Velázquez',
 'Óscar Montreal Aparicio',
 'Jacobo Pozo Tassis',
 'Espiga\nEduardo Pousa',
 'Curbelo\nIvanna Bienvenida',
 'Kevin\nAda Tasis',
 'López\nLuciana Sáenz',
 'García\nFlorencia Sainz',
 'Márquz\nCatarina Cazalla',
 'Lombarda\nPaloma Gallo',
 'Perro\nMargarita Quesada',
 'Florez\nVicente Fox',
 'Quesada\nIris Graciani',
 'Asunción Carballar\nConstanza',
 'Manuel Andres García']</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Here is an explanation</p>
<ul>
<li><code>[A-ZÁÉÍÓÚ]</code>: We want it to start with a capital letter, including accents.</li>
<li><code>[a-záééíóú]+</code>: Followed by one or more lowercase letters, enclosed by spaces</li>
<li>Followed by a space.</li>
<li><code>[A-ZÁÉÍÓÓÚ]</code>: followed by an uppercase letter, including accents</li>
<li><code>[a-záééíóú]+</code>: Followed by one or more lowercase letters, enclosed by spaces</li>
<li>Followed by a space.</li>
<li><code>[A-ZÁÉÍÓÓÚ]</code>: followed by an uppercase letter, including accents</li>
<li><code>[a-záééíóú]+</code>: Followed by one or more lowercase letters, enclosed by spaces</li>
</ul>
</section>
<section class="section-block-markdown-cell">
<h2 id="Search-and-replace">Search and replace<a class="anchor-link" href="#Search-and-replace">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<p>We are going to download a file with a lot of historical films.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># download file from url</span>
<span class="kn">import</span> <span class="nn">urllib.request</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">"https://static.platzi.com/media/tmp/class-files/github/moviedemo/moviedemo-master/movies.dat"</span>
<span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s2">"movies.dat"</span><span class="p">)</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-text-output-error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">HTTPError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[43], line 4</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> <span class="ansi-bold" style="color: rgb(0,0,255)">urllib</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">request</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span> url <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(175,0,0)">"</span><span style="color: rgb(175,0,0)">https://static.platzi.com/media/tmp/class-files/github/moviedemo/moviedemo-master/movies.dat</span><span style="color: rgb(175,0,0)">"</span>
<span class="ansi-green-fg">----&gt; 4</span> urllib<span style="color: rgb(98,98,98)">.</span>request<span style="color: rgb(98,98,98)">.</span>urlretrieve(url, <span style="color: rgb(175,0,0)">"</span><span style="color: rgb(175,0,0)">movies.dat</span><span style="color: rgb(175,0,0)">"</span>)

File <span class="ansi-green-fg">~/miniconda3/envs/mybase/lib/python3.11/urllib/request.py:241</span>, in <span class="ansi-cyan-fg">urlretrieve</span><span class="ansi-blue-fg">(url, filename, reporthook, data)</span>
<span class="ansi-green-intense-fg ansi-bold">    224</span> <span style="color: rgb(175,0,0)">"""</span>
<span class="ansi-green-intense-fg ansi-bold">    225</span> <span style="color: rgb(175,0,0)">Retrieve a URL into a temporary location on disk.</span>
<span class="ansi-green-intense-fg ansi-bold">    226</span> 
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">    237</span> <span style="color: rgb(175,0,0)">data file as well as the resulting HTTPMessage object.</span>
<span class="ansi-green-intense-fg ansi-bold">    238</span> <span style="color: rgb(175,0,0)">"""</span>
<span class="ansi-green-intense-fg ansi-bold">    239</span> url_type, path <span style="color: rgb(98,98,98)">=</span> _splittype(url)
<span class="ansi-green-fg">--&gt; 241</span> <span class="ansi-bold" style="color: rgb(0,135,0)">with</span> contextlib<span style="color: rgb(98,98,98)">.</span>closing(urlopen(url, data)) <span class="ansi-bold" style="color: rgb(0,135,0)">as</span> fp:
<span class="ansi-green-intense-fg ansi-bold">    242</span>     headers <span style="color: rgb(98,98,98)">=</span> fp<span style="color: rgb(98,98,98)">.</span>info()
<span class="ansi-green-intense-fg ansi-bold">    244</span>     <span style="color: rgb(95,135,135)"># Just return the local path and the "headers" for file://</span>
<span class="ansi-green-intense-fg ansi-bold">    245</span>     <span style="color: rgb(95,135,135)"># URLs. No sense in performing a copy unless requested.</span>

File <span class="ansi-green-fg">~/miniconda3/envs/mybase/lib/python3.11/urllib/request.py:216</span>, in <span class="ansi-cyan-fg">urlopen</span><span class="ansi-blue-fg">(url, data, timeout, cafile, capath, cadefault, context)</span>
<span class="ansi-green-intense-fg ansi-bold">    214</span> <span class="ansi-bold" style="color: rgb(0,135,0)">else</span>:
<span class="ansi-green-intense-fg ansi-bold">    215</span>     opener <span style="color: rgb(98,98,98)">=</span> _opener
<span class="ansi-green-fg">--&gt; 216</span> <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> opener<span style="color: rgb(98,98,98)">.</span>open(url, data, timeout)

File <span class="ansi-green-fg">~/miniconda3/envs/mybase/lib/python3.11/urllib/request.py:525</span>, in <span class="ansi-cyan-fg">OpenerDirector.open</span><span class="ansi-blue-fg">(self, fullurl, data, timeout)</span>
<span class="ansi-green-intense-fg ansi-bold">    523</span> <span class="ansi-bold" style="color: rgb(0,135,0)">for</span> processor <span class="ansi-bold" style="color: rgb(175,0,255)">in</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>process_response<span style="color: rgb(98,98,98)">.</span>get(protocol, []):
<span class="ansi-green-intense-fg ansi-bold">    524</span>     meth <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(0,135,0)">getattr</span>(processor, meth_name)
<span class="ansi-green-fg">--&gt; 525</span>     response <span style="color: rgb(98,98,98)">=</span> meth(req, response)
<span class="ansi-green-intense-fg ansi-bold">    527</span> <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> response

File <span class="ansi-green-fg">~/miniconda3/envs/mybase/lib/python3.11/urllib/request.py:634</span>, in <span class="ansi-cyan-fg">HTTPErrorProcessor.http_response</span><span class="ansi-blue-fg">(self, request, response)</span>
<span class="ansi-green-intense-fg ansi-bold">    631</span> <span style="color: rgb(95,135,135)"># According to RFC 2616, "2xx" code indicates that the client's</span>
<span class="ansi-green-intense-fg ansi-bold">    632</span> <span style="color: rgb(95,135,135)"># request was successfully received, understood, and accepted.</span>
<span class="ansi-green-intense-fg ansi-bold">    633</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> <span class="ansi-bold" style="color: rgb(175,0,255)">not</span> (<span style="color: rgb(98,98,98)">200</span> <span style="color: rgb(98,98,98)">&lt;</span><span style="color: rgb(98,98,98)">=</span> code <span style="color: rgb(98,98,98)">&lt;</span> <span style="color: rgb(98,98,98)">300</span>):
<span class="ansi-green-fg">--&gt; 634</span>     response <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>parent<span style="color: rgb(98,98,98)">.</span>error(
<span class="ansi-green-intense-fg ansi-bold">    635</span>         <span style="color: rgb(175,0,0)">'</span><span style="color: rgb(175,0,0)">http</span><span style="color: rgb(175,0,0)">'</span>, request, response, code, msg, hdrs)
<span class="ansi-green-intense-fg ansi-bold">    637</span> <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> response

File <span class="ansi-green-fg">~/miniconda3/envs/mybase/lib/python3.11/urllib/request.py:563</span>, in <span class="ansi-cyan-fg">OpenerDirector.error</span><span class="ansi-blue-fg">(self, proto, *args)</span>
<span class="ansi-green-intense-fg ansi-bold">    561</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> http_err:
<span class="ansi-green-intense-fg ansi-bold">    562</span>     args <span style="color: rgb(98,98,98)">=</span> (<span style="color: rgb(0,135,0)">dict</span>, <span style="color: rgb(175,0,0)">'</span><span style="color: rgb(175,0,0)">default</span><span style="color: rgb(175,0,0)">'</span>, <span style="color: rgb(175,0,0)">'</span><span style="color: rgb(175,0,0)">http_error_default</span><span style="color: rgb(175,0,0)">'</span>) <span style="color: rgb(98,98,98)">+</span> orig_args
<span class="ansi-green-fg">--&gt; 563</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>_call_chain(<span style="color: rgb(98,98,98)">*</span>args)

File <span class="ansi-green-fg">~/miniconda3/envs/mybase/lib/python3.11/urllib/request.py:496</span>, in <span class="ansi-cyan-fg">OpenerDirector._call_chain</span><span class="ansi-blue-fg">(self, chain, kind, meth_name, *args)</span>
<span class="ansi-green-intense-fg ansi-bold">    494</span> <span class="ansi-bold" style="color: rgb(0,135,0)">for</span> handler <span class="ansi-bold" style="color: rgb(175,0,255)">in</span> handlers:
<span class="ansi-green-intense-fg ansi-bold">    495</span>     func <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(0,135,0)">getattr</span>(handler, meth_name)
<span class="ansi-green-fg">--&gt; 496</span>     result <span style="color: rgb(98,98,98)">=</span> func(<span style="color: rgb(98,98,98)">*</span>args)
<span class="ansi-green-intense-fg ansi-bold">    497</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> result <span class="ansi-bold" style="color: rgb(175,0,255)">is</span> <span class="ansi-bold" style="color: rgb(175,0,255)">not</span> <span class="ansi-bold" style="color: rgb(0,135,0)">None</span>:
<span class="ansi-green-intense-fg ansi-bold">    498</span>         <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> result

File <span class="ansi-green-fg">~/miniconda3/envs/mybase/lib/python3.11/urllib/request.py:643</span>, in <span class="ansi-cyan-fg">HTTPDefaultErrorHandler.http_error_default</span><span class="ansi-blue-fg">(self, req, fp, code, msg, hdrs)</span>
<span class="ansi-green-intense-fg ansi-bold">    642</span> <span class="ansi-bold" style="color: rgb(0,135,0)">def</span> <span style="color: rgb(0,0,255)">http_error_default</span>(<span style="color: rgb(0,135,0)">self</span>, req, fp, code, msg, hdrs):
<span class="ansi-green-fg">--&gt; 643</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">raise</span> HTTPError(req<span style="color: rgb(98,98,98)">.</span>full_url, code, msg, hdrs, fp)

<span class="ansi-red-fg">HTTPError</span>: HTTP Error 403: Forbidden</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Let's print the first 10 lines to analyze it.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"movies.dat"</span><span class="p">,</span> <span class="s2">"r"</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">file</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">""</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">break</span>

<span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>1::Toy Story (1995)::Adventure|Animation|Children|Comedy|Fantasy
2::Jumanji (1995)::Adventure|Children|Fantasy
3::Grumpier Old Men (1995)::Comedy|Romance
4::Waiting to Exhale (1995)::Comedy|Drama|Romance
5::Father of the Bride Part II (1995)::Comedy
6::Heat (1995)::Action|Crime|Thriller
7::Sabrina (1995)::Comedy|Romance
8::Tom and Huck (1995)::Adventure|Children
9::Sudden Death (1995)::Action
10::GoldenEye (1995)::Action|Adventure|Thriller
11::American President, The (1995)::Comedy|Drama|Romance
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>As you can see, we have an ID, followed by <code>::</code>, then the name of the movie, in parentheses the year, followed by <code>::</code> and then genres separated by <code>|</code>.</p>
</section>
<section class="section-block-markdown-cell">
<p>We can make a cleaning of the file very easy by means of regular expressions, the <code>compile</code> and <code>match</code> functions and the use of groupings with parenthesis. When making groupings, we select which areas of the text we want to keep and then work with them as we want, let's see it with an example</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">"^\d+::([\w\s:,\(\)\.\-'&amp;¡!/¿?ÁÉÍÓÚáéíóú\+*\$#°\'</span><span class="se">\"</span><span class="s2">\[\]@·]+)\s\((\d{4,4})\)::(.*)$"</span><span class="p">)</span>

<span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"movies.dat"</span><span class="p">,</span> <span class="s2">"r"</span><span class="p">)</span>
<span class="n">file_filtered</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"movies.csv"</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span>
<span class="n">file_filtered</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">"title,year,genders</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
<span class="n">sep</span> <span class="o">=</span> <span class="s2">";;"</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
        <span class="n">file_filtered</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="si">}{</span><span class="n">sep</span><span class="si">}{</span><span class="n">result</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="si">}{</span><span class="n">sep</span><span class="si">}{</span><span class="n">result</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">""</span><span class="p">)</span>
<span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">file_filtered</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Let's see what we have done, first we have defined a pattern with the following:</p>
<ul>
<li><code>^</code>: We want it to start with the beginning of the line.</li>
<li>Next one or more numbers</li>
<li><code>::</code>: Followed by <code>::</code></li>
<li>`([(([([([([([([([("("("("("("": This is the first grouping, we look for any word, space or character in the square brackets that appears one or more times.</li>
<li>``s`: Next a space</li>
<li><code></code>: The tightening of a parenthesis</li>
<li>(4,4})`: Here is the second grouping, we are looking for four numbers.</li>
<li>After the closing of a parenthesis</li>
<li><code>::</code>: Next <code>::</code></li>
<li><code>(.*)</code>: The third grouping, any character that appears none or all times.</li>
<li><code>$</code>: Lastly the end of the line</li>
</ul>
<p>Inside the <code>for</code> we analyze line by line if the pattern we have defined is found, and if it is found we write the three patterns in the <code>csv</code> separated by <code>sep</code>, which in our case we have defined as <code>;;</code>. This separator has been defined, because there are movie titles that have <code>,</code>s.</p>
</section>
<section class="section-block-markdown-cell">
<p>We read the <code>csv</code> with <code>Pandas</code>.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"movies.csv"</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">";;"</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">"python"</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt-output-prompt">Out[100]:</div>
<div class="output-html-rendered-html-output-subareaoutput_execute_result"><div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th></th>
<th>title,year,genders</th>
</tr>
</thead>
<tbody>
<tr>
<th>Toy Story</th>
<th>1995</th>
<td>Adventure|Animation|Children|Comedy|Fantasy</td>
</tr>
<tr>
<th>Jumanji</th>
<th>1995</th>
<td>Adventure|Children|Fantasy</td>
</tr>
<tr>
<th>Grumpier Old Men</th>
<th>1995</th>
<td>Comedy|Romance</td>
</tr>
<tr>
<th>Waiting to Exhale</th>
<th>1995</th>
<td>Comedy|Drama|Romance</td>
</tr>
<tr>
<th>Father of the Bride Part II</th>
<th>1995</th>
<td>Comedy</td>
</tr>
</tbody>
</table>
</div></div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h2 id="Cheatsheet">Cheatsheet<a class="anchor-link" href="#Cheatsheet">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<p>Here you have a <a href="https://cheatography.com/davechild/cheat-sheets/regular-expressions/pdf/">cheatsheet</a> with a lot of patterns</p>
</section>
<section class="section-block-markdown-cell">
<p><img alt="davechild_regular-expressions" src="http://maximofn.com/wp-content/uploads/2024/02/davechild_regular-expressions-scaled.webp"/></p>
</section>
