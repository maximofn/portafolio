<p>
	<!-- Custom stylesheet, it must be in the same directory as the html file -->
	<!-- Loading mathjax macro --><!-- Load mathjax --><!-- MathJax configuration -->
<p>
<style>
	/* Media query para pantallas grandes */
	@media screen and (min-width: 1000px) {
		.container {
			flex-wrap: nowrap;
			display: flex;
			justify-content: space-between;
			height: 100vh; /* altura del viewport */
		}
		
		.indice {
			width: 25%; /* Ancho del índice en pantallas grandes */
			border-right: 1px solid #ccc;
			max-height: calc(100vh - 40px); /* Ajustar según tus necesidades. Aquí estamos restando el doble del padding para mantener todo visible */
			padding: 20px;
			box-sizing: border-box;
			overflow-y: auto; /* desplazamiento vertical cuando sea necesario */
		}
		
		.contenido {
			width: 70%; /* Ancho del contenido en pantallas grandes */
			max-height: calc(100vh - 40px); /* Ajustar según tus necesidades. Aquí estamos restando el doble del padding para mantener todo visible */
			padding: 20px;
			box-sizing: border-box;
			overflow-y: auto; /* desplazamiento vertical cuando sea necesario */
		}
	}
</style>
<!-- Open div notebook -->
<div id="notebook" class="border-box-sizing" tabindex="-1">
	<!-- Open div notebook container -->
	<div id="notebook-container" class="container">
		<!-- Open div indice -->
		<div class="indice">
			<!-- Open div index header -->
			<div class="cell border-box-sizing text_cell rendered">
				<h2 class="prompt input_prompt">
					<span style="
					color: var(--darkreader-text--heading-color, var(--darkreader-text--heading-2-color,
					var(--darkreader-text--headings-color)));
					font-family: var(--fontFamily); font-size: var(--fontSize);
					font-style: var(--fontStyle, inherit);
					font-weight: var(--fontWeight);
					letter-spacing: var(--letterSpacing);
					text-transform: var(--textTransform);
					background-color: transparent;
					--darkreader-inline-color: var(--darkreader-text--darkreader-text--heading-color,
					var(--darkreader-text--darkreader-text--heading-2-color, var(--darkreader-text--darkreader-text--headings-color)));
					--darkreader-inline-bgcolor: transparent;"
					data-darkreader-inline-color="" data-darkreader-inline-bgcolor="">
						Índice
					</span>
					<a class="anchor-link" style="
					font-family: var(--fontFamily);
					font-size: var(--fontSize);
					font-style: var(--fontStyle, inherit);
					font-weight: var(--fontWeight);
					letter-spacing: var(--letterSpacing);
					text-transform: var(--textTransform);
					background-color: transparent;
					--darkreader-inline-bgcolor: transparent;"
					href="#Índice" data-darkreader-inline-bgcolor="">
					</a>
				</h2>
			<!-- Close div index header -->
			</div>
			<!-- Index body -->
			<div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h2 id="Chroma-index">
									<a class="anchor-link" href="#Chroma">
										<p style="margin-left: 0px; font-size: 12px; line-height: 1.5;">Chroma</p>
									</a>
								</h2>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h2 id="Instalación-index">
									<a class="anchor-link" href="#Instalación">
										<p style="margin-left: 0px; font-size: 12px; line-height: 1.5;">Instalación</p>
									</a>
								</h2>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h2 id="Uso-rápido-index">
									<a class="anchor-link" href="#Uso-rápido">
										<p style="margin-left: 0px; font-size: 12px; line-height: 1.5;">Uso rápido</p>
									</a>
								</h2>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h2 id="Bases-de-datos-persistentes-index">
									<a class="anchor-link" href="#Bases-de-datos-persistentes">
										<p style="margin-left: 0px; font-size: 12px; line-height: 1.5;">Bases de datos persistentes</p>
									</a>
								</h2>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h2 id="Colecciones-index">
									<a class="anchor-link" href="#Colecciones">
										<p style="margin-left: 0px; font-size: 12px; line-height: 1.5;">Colecciones</p>
									</a>
								</h2>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h3 id="Crear-colecciones-index">
									<a class="anchor-link" href="#Crear-colecciones">
										<p style="margin-left: 40px; font-size: 12px; line-height: 1.5;">Crear colecciones</p>
									</a>
								</h3>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h3 id="Recuperar-colecciones-index">
									<a class="anchor-link" href="#Recuperar-colecciones">
										<p style="margin-left: 40px; font-size: 12px; line-height: 1.5;">Recuperar colecciones</p>
									</a>
								</h3>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h3 id="Recuperar-o-crear-colecciones-index">
									<a class="anchor-link" href="#Recuperar-o-crear-colecciones">
										<p style="margin-left: 40px; font-size: 12px; line-height: 1.5;">Recuperar o crear colecciones</p>
									</a>
								</h3>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h3 id="Borrar-colecciones-index">
									<a class="anchor-link" href="#Borrar-colecciones">
										<p style="margin-left: 40px; font-size: 12px; line-height: 1.5;">Borrar colecciones</p>
									</a>
								</h3>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h3 id="Obtener-items-de-las-colecciones-index">
									<a class="anchor-link" href="#Obtener-items-de-las-colecciones">
										<p style="margin-left: 40px; font-size: 12px; line-height: 1.5;">Obtener items de las colecciones</p>
									</a>
								</h3>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h3 id="Obtener-el-número-total-de-items-de-las-colecciones-index">
									<a class="anchor-link" href="#Obtener-el-número-total-de-items-de-las-colecciones">
										<p style="margin-left: 40px; font-size: 12px; line-height: 1.5;">Obtener el número total de items de las colecciones</p>
									</a>
								</h3>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h3 id="Cambiar-la-función-de-similitud-index">
									<a class="anchor-link" href="#Cambiar-la-función-de-similitud">
										<p style="margin-left: 40px; font-size: 12px; line-height: 1.5;">Cambiar la función de similitud</p>
									</a>
								</h3>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h3 id="Añadir-datos-a-la-colección-index">
									<a class="anchor-link" href="#Añadir-datos-a-la-colección">
										<p style="margin-left: 40px; font-size: 12px; line-height: 1.5;">Añadir datos a la colección</p>
									</a>
								</h3>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h4 id="Añadir-documentos-index">
									<a class="anchor-link" href="#Añadir-documentos">
										<p style="margin-left: 80px; font-size: 12px; line-height: 1.5;">Añadir documentos</p>
									</a>
								</h4>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h4 id="Añadir-embeddings-index">
									<a class="anchor-link" href="#Añadir-embeddings">
										<p style="margin-left: 80px; font-size: 12px; line-height: 1.5;">Añadir embeddings</p>
									</a>
								</h4>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h4 id="Añadir-documentos-y-embeddings-index">
									<a class="anchor-link" href="#Añadir-documentos-y-embeddings">
										<p style="margin-left: 80px; font-size: 12px; line-height: 1.5;">Añadir documentos y embeddings</p>
									</a>
								</h4>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h3 id="Consultas-index">
									<a class="anchor-link" href="#Consultas">
										<p style="margin-left: 40px; font-size: 12px; line-height: 1.5;">Consultas</p>
									</a>
								</h3>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h4 id="Consultas-por-documentos-index">
									<a class="anchor-link" href="#Consultas-por-documentos">
										<p style="margin-left: 80px; font-size: 12px; line-height: 1.5;">Consultas por documentos</p>
									</a>
								</h4>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h4 id="Varias-consultas-a-la-vez-index">
									<a class="anchor-link" href="#Varias-consultas-a-la-vez">
										<p style="margin-left: 80px; font-size: 12px; line-height: 1.5;">Varias consultas a la vez</p>
									</a>
								</h4>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h4 id="Consultas-por-embeddings-index">
									<a class="anchor-link" href="#Consultas-por-embeddings">
										<p style="margin-left: 80px; font-size: 12px; line-height: 1.5;">Consultas por embeddings</p>
									</a>
								</h4>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h3 id="Recuperar-documentos-por-`ID`-index">
									<a class="anchor-link" href="#Recuperar-documentos-por-`ID`">
										<p style="margin-left: 40px; font-size: 12px; line-height: 1.5;">Recuperar documentos por <code><b>ID</b></code></p>
									</a>
								</h3>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h3 id="Filtrado-index">
									<a class="anchor-link" href="#Filtrado">
										<p style="margin-left: 40px; font-size: 12px; line-height: 1.5;">Filtrado</p>
									</a>
								</h3>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h4 id="Filtrado-por-metadata-index">
									<a class="anchor-link" href="#Filtrado-por-metadata">
										<p style="margin-left: 80px; font-size: 12px; line-height: 1.5;">Filtrado por metadata</p>
									</a>
								</h4>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h4 id="Filtrado-por-el-contenido-del-documento-index">
									<a class="anchor-link" href="#Filtrado-por-el-contenido-del-documento">
										<p style="margin-left: 80px; font-size: 12px; line-height: 1.5;">Filtrado por el contenido del documento</p>
									</a>
								</h4>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h3 id="Actualizar-datos-index">
									<a class="anchor-link" href="#Actualizar-datos">
										<p style="margin-left: 40px; font-size: 12px; line-height: 1.5;">Actualizar datos</p>
									</a>
								</h3>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h3 id="Actualizar-o-añadir-datos-index">
									<a class="anchor-link" href="#Actualizar-o-añadir-datos">
										<p style="margin-left: 40px; font-size: 12px; line-height: 1.5;">Actualizar o añadir datos</p>
									</a>
								</h3>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h3 id="Eliminar-datos-index">
									<a class="anchor-link" href="#Eliminar-datos">
										<p style="margin-left: 40px; font-size: 12px; line-height: 1.5;">Eliminar datos</p>
									</a>
								</h3>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h2 id="Embeddings-index">
									<a class="anchor-link" href="#Embeddings">
										<p style="margin-left: 0px; font-size: 12px; line-height: 1.5;">Embeddings</p>
									</a>
								</h2>
							</div>
						</div>
					</div>
				</div>
				<!-- Open div header -->
				<div class="cell border-box-sizing text_cell rendered">
					<div class="prompt input_prompt">
						<div class="inner_cell">
							<div class="text_cell_render border-box-sizing rendered_html">
								<h2 id="Multimodalidad-index">
									<a class="anchor-link" href="#Multimodalidad">
										<p style="margin-left: 0px; font-size: 12px; line-height: 1.5;">Multimodalidad</p>
									</a>
								</h2>
							</div>
						</div>
					</div>
				</div>
			</div>
		<!-- Close div indice -->
		</div>
 
		<!-- Content -->
		<div class="contenido">
		<div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;"><a href="https://colab.research.google.com/github/maximofn/portafolio/blob/main/posts/2024-02-18-Bases-de-datos-vectoriales.ipynb" target="_blank"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"/></a></p>
						</div>
					</div>
				</div>
			</div>
			<!-- Open div header -->
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<h1 id="Bases-de-datos-vectoriales">
								<a class="anchor-link" href="#Bases-de-datos-vectoriales">
									<p style="margin-left: 0px">Bases de datos vectoriales</p>
								</a>
							</h1>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Hemos visto en el post de <a href="https://www.maximofn.com/embeddings" target="_blank">embeddings</a> que los embeddings son una forma de representar palabras en un espacio vectorial. En este post vamos a ver cómo podemos almacenar esos embeddings en bases de datos vectoriales y cómo podemos hacer consultas sobre ellas.</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Cuando tenemos una consulta, podemos crear el embedding de la consulta, buscar en la base de datos vectorial los embeddings que más se parezcan a la consulta y devolver los documentos que correspondan a esos embeddings o una explicaión sobre esos documentos.</p>
						</div>
					</div>
				</div>
			</div>
	
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;"><p align="center"><img src="http://maximofn.com/wp-content/uploads/2024/02/vector_database.svg" alt="vector database"></p></p>
						</div>
					</div>
				</div>
			</div>
	
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Es decir, vamos a generar una base de datos de información, vamos a crear embeddings de esa información y la vamos a guardar en una base de datos vectorial. Luego cuando un usuario haga una consulta, convertiremos la consulta a embeddings, buscaremos en la base de datos los embeddings con mayor similitud y devolveremos los documentos que correspondan a esos embeddings.</p>
						</div>
					</div>
				</div>
			</div>
	
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Además de los documentos, en la base de datos se puede guardar información adicional que llamaremos metadata. Por ejemplo, si estamos trabajando con un conjunto de noticias, podemos guardar el título, la fecha, el autor, etc. de la noticia.</p>
						</div>
					</div>
				</div>
			</div>
			<!-- Open div header -->
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<h2 id="Chroma">
								<a class="anchor-link" href="#Chroma">
									<p style="margin-left: 10px">Chroma</p>
								</a>
							</h2>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">En este post vamos a ver <a href="https://www.trychroma.com/" target="_blank">crhoma</a>, ya que es la base de <a href="https://blog.langchain.dev/langchain-state-of-ai-2023/#most-used-vectorstores" target="_blank">datos vectorial más usada</a>, como se puede ver en este reporte del <a href="https://blog.langchain.dev/langchain-state-of-ai-2023" target="_blank">langchain state of ai 2023</a>.</p>
						</div>
					</div>
				</div>
			</div>
	
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;"><p align="center"><img src="https://blog.langchain.dev/content/images/size/w1000/2023/12/Top-vectorstores--1-.png" alt="Most Used Vectorstores"></p></p>
						</div>
					</div>
				</div>
			</div>
			<!-- Open div header -->
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<h2 id="Instalación">
								<a class="anchor-link" href="#Instalación">
									<p style="margin-left: 10px">Instalación</p>
								</a>
							</h2>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">De modo que para instalar chroma con conda hay que hacer</p>
						</div>
					</div>
				</div>
			</div>
	
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 80px;"><code>conda install conda-forge::chromadb<br></code></p>
						</div>
					</div>
				</div>
			</div>
	
	
	
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">O si se quiere instalar con pip</p>
						</div>
					</div>
				</div>
			</div>
	
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 80px;"><code>pip install chromadb<br></code></p>
						</div>
					</div>
				</div>
			</div>
	
	
			<!-- Open div header -->
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<h2 id="Uso-rápido">
								<a class="anchor-link" href="#Uso-rápido">
									<p style="margin-left: 10px">Uso rápido</p>
								</a>
							</h2>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Para una aplicación rápida, primero importamos chroma</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #833aa0;">import</span> <span style="color: #4fcd7d;">chromadb</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">A continuación creamos un cliente de chroma</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">chroma_client</span> <span>=</span> <span style="color: #6b97e8;">chromadb</span><span>.</span><span style="color: #6b97e8;">Client</span><span style="color: #e3e11d;">()</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Creamos una colección. Una colección es el lugar donde se guardarán los embeddings, los embeddings y la metadata.</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span> <span>=</span> <span style="color: #6b97e8;">chroma_client</span><span>.</span><span style="color: #6b97e8;">create_collection</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">name</span><span>=</span><span style="color: #7e7a34;">&quot;my_collection&quot;</span><span style="color: #e3e11d;">)</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Como vemos sale un mensaje indicando que no se ha introducido una función de embeddings y por lo tanto usará por defecto <code><b>all-MiniLM-L6-v2</b></code>, que es similar al modelo <code><b>paraphrase-MiniLM-L6-v2</b></code> que usamos en el post de <a href="https://maximofn.com/embeddings/" target="_blank">embeddings</a>.</p>
						</div>
					</div>
				</div>
			</div>
	
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Más adelante veremos esto, pero podemos elegir cómo vamos a generar los embeddings.</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Ahora añadimos documentos, ids y metadata a la colección</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">add</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">documents</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;This is a python docs&quot;</span><span style="color: #e3e11d;">,</span> <span style="color: #7e7a34;">&quot;This is JavaScript docs&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">metadatas</span><span>=</span><span style="color: #e3e11d;">[{</span><span style="color: #7e7a34;">&quot;source&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;Python source&quot;</span><span style="color: #e3e11d;">},</span> <span style="color: #e3e11d;">{</span><span style="color: #7e7a34;">&quot;source&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;JavaScript source&quot;</span><span style="color: #e3e11d;">}],</span></p>
<p>    <span style="color: #6b97e8;">ids</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;id1&quot;</span><span style="color: #e3e11d;">,</span> <span style="color: #7e7a34;">&quot;id2&quot;</span><span style="color: #e3e11d;">]</span></p>
<p><span style="color: #e3e11d;">)</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Ahora podemos hacer una consulta</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">results</span> <span>=</span> <span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">query</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">query_texts</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;This is a query of Python&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">n_results</span><span>=</span><span style="color: #7e7a38;">2</span></p>
<p><span style="color: #e3e11d;">)</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">results</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
				<div class="output_wrapper">
					<div class="output">
						<div class="output_area">
							<div class="prompt" style="margin-left: 20px;">Output:</div>
							<div class="output_subarea output_stream output_stdout output_text">
								<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': [['id1', 'id2']],</p><p> 'distances': [[0.6205940246582031, 1.4631636142730713]],</p><p> 'metadatas': [[{'source': 'Python source'}, {'source': 'JavaScript source'}]],</p><p> 'embeddings': None,</p><p> 'documents': [['This is a python docs', 'This is JavaScript docs']],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Como vemos la distancia al id1 es menor a la distancia al id2, por lo que parece que el documento 1 es más apropiado para responder la consulta</p>
						</div>
					</div>
				</div>
			</div>
			<!-- Open div header -->
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<h2 id="Bases-de-datos-persistentes">
								<a class="anchor-link" href="#Bases-de-datos-persistentes">
									<p style="margin-left: 10px">Bases de datos persistentes</p>
								</a>
							</h2>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">La base de datos que hemos creado antes es temporal, en cuanto cerremos el notebook desaparecerá. Por lo que para crear una base de datos persistente hay que pasarle a chroma el path donde guardarla</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Primero vamos a crear la carpeta donde guardar la base de datos</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #833aa0;">from</span> <span style="color: #4fcd7d;">pathlib</span> <span style="color: #833aa0;">import</span> <span style="color: #6b97e8;">Path</span></p>
<p></p>
<p><span style="color: #6b97e8;">chroma_path</span> <span>=</span> <span style="color: #6b97e8;">Path</span><span style="color: #e3e11d;">(</span><span style="color: #7e7a34;">&quot;chromadb&quot;</span><span style="color: #e3e11d;">)</span></p>
<p><span style="color: #6b97e8;">chroma_path</span><span>.</span><span style="color: #6b97e8;">mkdir</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">exist_ok</span><span>=</span><span style="color: #7f6e38;">True</span><span style="color: #e3e11d;">)</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Ahora creamos un cliente en la carpeta que hemos creado</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">chroma_client_persistent</span> <span>=</span> <span style="color: #6b97e8;">chromadb</span><span>.</span><span style="color: #6b97e8;">PersistentClient</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">path</span> <span>=</span> <span style="color: #dfd84a;">str</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">chroma_path</span><span style="color: #e3e11d;">))</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
			<!-- Open div header -->
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<h2 id="Colecciones">
								<a class="anchor-link" href="#Colecciones">
									<p style="margin-left: 10px">Colecciones</p>
								</a>
							</h2>
						</div>
					</div>
				</div>
			</div>
			<!-- Open div header -->
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<h3 id="Crear-colecciones">
								<a class="anchor-link" href="#Crear-colecciones">
									<p style="margin-left: 20px">Crear colecciones</p>
								</a>
							</h3>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">A la hora de crear una colección hay que especificar un nombre. El nombre tiene que tener las siguientes consideraciones:</p>
						</div>
					</div>
				</div>
			</div>
	
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">
								<ul>
									<li>La longitud del nombre debe tener entre 3 y 63 caracteres.</li>
									<li>El nombre debe comenzar y terminar con una letra minúscula o un dígito y puede contener puntos, guiones y guiones bajos en el medio.</li>
									<li>El nombre no debe contener dos puntos consecutivos.</li>
									<li>El nombre no debe ser una dirección IP válida.</li>
								</ul>
							</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">

						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">

						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">

						</div>
					</div>
				</div>
			</div>
	
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">También podemos darle una función de embedding. En caso de no darle una usará por defecto la función <code><b>all-MiniLM-L6-v2</b></code></p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span> <span>=</span> <span style="color: #6b97e8;">chroma_client</span><span>.</span><span style="color: #6b97e8;">create_collection</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">name</span><span>=</span><span style="color: #7e7a34;">&quot;my_other_collection&quot;</span><span style="color: #e3e11d;">)</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Como se puede ver, se ha creado una segunda colección para el mismo cliente <code><b>chroma_client</b></code>, por lo que para un solo cliente podemos tener varias colecciones.</p>
						</div>
					</div>
				</div>
			</div>
			<!-- Open div header -->
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<h3 id="Recuperar-colecciones">
								<a class="anchor-link" href="#Recuperar-colecciones">
									<p style="margin-left: 20px">Recuperar colecciones</p>
								</a>
							</h3>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Si queremos recuperar una colección de un cliente lo podemos hacer con el método <code><b>get_collection</b></code></p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span> <span>=</span> <span style="color: #6b97e8;">chroma_client</span><span>.</span><span style="color: #6b97e8;">get_collection</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">name</span> <span>=</span> <span style="color: #7e7a34;">&quot;my_collection&quot;</span><span style="color: #e3e11d;">)</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
			<!-- Open div header -->
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<h3 id="Recuperar-o-crear-colecciones">
								<a class="anchor-link" href="#Recuperar-o-crear-colecciones">
									<p style="margin-left: 20px">Recuperar o crear colecciones</p>
								</a>
							</h3>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Podemos obtener colecciones y que en caso de que no existan las cree con el método <code><b>get_or_create_collection</b></code></p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span> <span>=</span> <span style="color: #6b97e8;">chroma_client</span><span>.</span><span style="color: #6b97e8;">get_or_create_collection</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">name</span> <span>=</span> <span style="color: #7e7a34;">&quot;my_tird_collection&quot;</span><span style="color: #e3e11d;">)</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
			<!-- Open div header -->
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<h3 id="Borrar-colecciones">
								<a class="anchor-link" href="#Borrar-colecciones">
									<p style="margin-left: 20px">Borrar colecciones</p>
								</a>
							</h3>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Podemos borrar una colección con el método <code><b>delete_collection</b></code></p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">chroma_client</span><span>.</span><span style="color: #6b97e8;">delete_collection</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">name</span><span>=</span><span style="color: #7e7a34;">&quot;my_tird_collection&quot;</span><span style="color: #e3e11d;">)</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
			<!-- Open div header -->
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<h3 id="Obtener-items-de-las-colecciones">
								<a class="anchor-link" href="#Obtener-items-de-las-colecciones">
									<p style="margin-left: 20px">Obtener items de las colecciones</p>
								</a>
							</h3>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Podemos obtener los 10 primeros items de la colección con el método <code><b>peek</b></code></p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span> <span>=</span> <span style="color: #6b97e8;">chroma_client</span><span>.</span><span style="color: #6b97e8;">get_collection</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">name</span> <span>=</span> <span style="color: #7e7a34;">&quot;my_collection&quot;</span><span style="color: #e3e11d;">)</span></p>
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">peek</span><span style="color: #e3e11d;">()</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
				<div class="output_wrapper">
					<div class="output">
						<div class="output_area">
							<div class="prompt" style="margin-left: 20px;">Output:</div>
							<div class="output_subarea output_stream output_stdout output_text">
								<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': ['id1', 'id2'],</p><p> 'embeddings': [[-0.06924048811197281,</p><p>   0.061624377965927124,</p><p>   -0.090973399579525,</p><p>   0.013923337683081627,</p><p>   0.006247623357921839,</p><p>   -0.1078396588563919,</p><p>   -0.012472339905798435,</p><p>   0.03485661745071411,</p><p>   -0.06300634145736694,</p><p>   -0.00880391988903284,</p><p>   0.06879935413599014,</p><p>   0.0564003586769104,</p><p>   0.07040536403656006,</p><p>   -0.020754728466272354,</p><p>   -0.04048658534884453,</p><p>   -0.006666888482868671,</p><p>   -0.0953674241900444,</p><p>   0.049781784415245056,</p><p>   0.021780474111437798,</p><p>   -0.06344643980264664,</p><p>   0.06119797006249428,</p><p>   0.0834411084651947,</p><p>   -0.034758951514959335,</p><p>   0.0029120452236384153,</p><p>   ...</p><p>   -0.013378280214965343]],</p><p> 'metadatas': [{'source': 'Python source'}, {'source': 'JavaScript source'}],</p><p> 'documents': ['This is a python docs', 'This is JavaScript docs'],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">En este caso solo se han obtenido dos, porque nuestra colección solo tiene dos documentos</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Si se quiere obtener otra cantidad de items se puede especificar con el argumento <code><b>limit</b></code></p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">peek</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">limit</span><span>=</span><span style="color: #7e7a38;">1</span><span style="color: #e3e11d;">)</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
				<div class="output_wrapper">
					<div class="output">
						<div class="output_area">
							<div class="prompt" style="margin-left: 20px;">Output:</div>
							<div class="output_subarea output_stream output_stdout output_text">
								<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': ['id1'],</p><p> 'embeddings': [[-0.06924048811197281,</p><p>   0.061624377965927124,</p><p>   -0.090973399579525,</p><p>   0.013923337683081627,</p><p>   0.006247623357921839,</p><p>   -0.1078396588563919,</p><p>   -0.012472339905798435,</p><p>   0.03485661745071411,</p><p>   -0.06300634145736694,</p><p>   -0.00880391988903284,</p><p>   0.06879935413599014,</p><p>   0.0564003586769104,</p><p>   0.07040536403656006,</p><p>   -0.020754728466272354,</p><p>   -0.04048658534884453,</p><p>   -0.006666888482868671,</p><p>   -0.0953674241900444,</p><p>   0.049781784415245056,</p><p>   0.021780474111437798,</p><p>   -0.06344643980264664,</p><p>   0.06119797006249428,</p><p>   0.0834411084651947,</p><p>   -0.034758951514959335,</p><p>   0.0029120452236384153,</p><p>   ...</p><p>   0.012315398082137108]],</p><p> 'metadatas': [{'source': 'Python source'}],</p><p> 'documents': ['This is a python docs'],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- Open div header -->
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<h3 id="Obtener-el-número-total-de-items-de-las-colecciones">
								<a class="anchor-link" href="#Obtener-el-número-total-de-items-de-las-colecciones">
									<p style="margin-left: 20px">Obtener el número total de items de las colecciones</p>
								</a>
							</h3>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Podemos obtener el número total de items de la colección con el método <code><b>count</b></code></p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">count</span><span style="color: #e3e11d;">()</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
				<div class="output_wrapper">
					<div class="output">
						<div class="output_area">
							<div class="prompt" style="margin-left: 20px;">Output:</div>
							<div class="output_subarea output_stream output_stdout output_text">
								<pre style="margin-left: 60px; line-height: 0%;"><p>2</p></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- Open div header -->
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<h3 id="Cambiar-la-función-de-similitud">
								<a class="anchor-link" href="#Cambiar-la-función-de-similitud">
									<p style="margin-left: 20px">Cambiar la función de similitud</p>
								</a>
							</h3>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Antes, cuando hicimos una consulta obtuvimos la similitud de los embeddings con nuestra consulta, ya que por defecto en una colección se usa la función de distancia, pero podemos especificar qué función de similitud queremos usar. Las posiilidades son</p>
						</div>
					</div>
				</div>
			</div>
	
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">
								<ul>
									<li>Squared L2 (<code><b>l2</b></code>)</li>
									<li>Inner product (<code><b>ip</b></code>)</li>
									<li>Cosine similarity (<code><b>cosine</b></code>)</li>
								</ul>
							</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">

						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">

						</div>
					</div>
				</div>
			</div>
	
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">En el post <a href="http://maximofn.com/embeddings-similarity/" target="_blank">Medida de similitud entre embeddings</a> vimos L2 y cosine similarity, por si quieres profundizar en ellas.</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Por lo que podemos crear colecciones con otra función de similitud con el argumento <code><b>metadata={"hnsw:space": <funtion>}</b></code></p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span> <span>=</span> <span style="color: #6b97e8;">chroma_client</span><span>.</span><span style="color: #6b97e8;">create_collection</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">name</span><span>=</span><span style="color: #7e7a34;">&quot;colection_cosine&quot;</span><span style="color: #e3e11d;">,</span> <span style="color: #6b97e8;">metadata</span><span>=</span><span style="color: #e3e11d;">{</span><span style="color: #7e7a34;">&quot;hnsw:space&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;cosine&quot;</span><span style="color: #e3e11d;">})</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
			<!-- Open div header -->
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<h3 id="Añadir-datos-a-la-colección">
								<a class="anchor-link" href="#Añadir-datos-a-la-colección">
									<p style="margin-left: 20px">Añadir datos a la colección</p>
								</a>
							</h3>
						</div>
					</div>
				</div>
			</div>
			<!-- Open div header -->
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<h4 id="Añadir-documentos">
								<a class="anchor-link" href="#Añadir-documentos">
									<p style="margin-left: 30px">Añadir documentos</p>
								</a>
							</h4>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Vamos a volver a ver los datos que tenemos en la colección con el método <code><b>peek</b></code></p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">peek</span><span style="color: #e3e11d;">()</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
				<div class="output_wrapper">
					<div class="output">
						<div class="output_area">
							<div class="prompt" style="margin-left: 20px;">Output:</div>
							<div class="output_subarea output_stream output_stdout output_text">
								<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': [],</p><p> 'embeddings': [],</p><p> 'metadatas': [],</p><p> 'documents': [],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Como vemos está vacío, eso es porque la última colección que hemos creado ha sido la de la función de similitud <code><b>cosine</b></code>, pero no le hemos añadido datos. Veamos como es así obteniendo el nombre de la colección</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">name</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
				<div class="output_wrapper">
					<div class="output">
						<div class="output_area">
							<div class="prompt" style="margin-left: 20px;">Output:</div>
							<div class="output_subarea output_stream output_stdout output_text">
								<pre style="margin-left: 60px; line-height: 0%;"><p>'colection_cosine'</p></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Por lo que nos volvemos a traer la primera colección que hemos creado, que sí le hemos introducido datos</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span> <span>=</span> <span style="color: #6b97e8;">chroma_client</span><span>.</span><span style="color: #6b97e8;">get_collection</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">name</span> <span>=</span> <span style="color: #7e7a34;">&quot;my_collection&quot;</span><span style="color: #e3e11d;">)</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Ahora ya podemos añadir datos a la collección con el método <code><b>add</b></code></p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">add</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">documents</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;This is a Mojo docs&quot;</span><span style="color: #e3e11d;">,</span> <span style="color: #7e7a34;">&quot;This is Rust docs&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">metadatas</span><span>=</span><span style="color: #e3e11d;">[{</span><span style="color: #7e7a34;">&quot;source&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;Mojo source&quot;</span><span style="color: #e3e11d;">},</span> <span style="color: #e3e11d;">{</span><span style="color: #7e7a34;">&quot;source&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;Rust source&quot;</span><span style="color: #e3e11d;">}],</span></p>
<p>    <span style="color: #6b97e8;">ids</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;id3&quot;</span><span style="color: #e3e11d;">,</span> <span style="color: #7e7a34;">&quot;id4&quot;</span><span style="color: #e3e11d;">]</span></p>
<p><span style="color: #e3e11d;">)</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Como se puede ver los <code><b>ID</b></code>s son consecutivos y no tienen el mismo valor que ya tenían antes, ya que los <code><b>ID</b></code>s tienen que ser únicos.</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Si intentamos añadir datos repitiendo <code><b>ID</b></code>s, nos idiciará que ya existían datos con esas <code><b>ID</b></code>s</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">add</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">documents</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;This is a Pytorch docs&quot;</span><span style="color: #e3e11d;">,</span> <span style="color: #7e7a34;">&quot;This is TensorRT docs&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">metadatas</span><span>=</span><span style="color: #e3e11d;">[{</span><span style="color: #7e7a34;">&quot;source&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;Pytorch source&quot;</span><span style="color: #e3e11d;">},</span> <span style="color: #e3e11d;">{</span><span style="color: #7e7a34;">&quot;source&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;TensorRT source&quot;</span><span style="color: #e3e11d;">}],</span></p>
<p>    <span style="color: #6b97e8;">ids</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;id3&quot;</span><span style="color: #e3e11d;">,</span> <span style="color: #7e7a34;">&quot;id4&quot;</span><span style="color: #e3e11d;">]</span></p>
<p><span style="color: #e3e11d;">)</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
				<div class="output_wrapper">
					<div class="output">
						<div class="output_area">
							<div class="prompt" style="margin-left: 20px;">Output:</div>
							<div class="output_subarea output_stream output_stdout output_text">
								<pre style="margin-left: 60px; line-height: 0%;"><p>Add of existing embedding ID: id3</p><p>Add of existing embedding ID: id4</p><p>Insert of existing embedding ID: id3</p><p>Insert of existing embedding ID: id4</p></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">No hemos podido añadir los documentos de Pytorch y TensorRT</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Veamos los datos de la colección</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">peek</span><span style="color: #e3e11d;">()</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
				<div class="output_wrapper">
					<div class="output">
						<div class="output_area">
							<div class="prompt" style="margin-left: 20px;">Output:</div>
							<div class="output_subarea output_stream output_stdout output_text">
								<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': ['id1', 'id2', 'id3', 'id4'],</p><p> 'embeddings': [[-0.06924048811197281,</p><p>   0.061624377965927124,</p><p>   -0.090973399579525,</p><p>   0.013923337683081627,</p><p>   0.006247623357921839,</p><p>   -0.1078396588563919,</p><p>   -0.012472339905798435,</p><p>   0.03485661745071411,</p><p>   -0.06300634145736694,</p><p>   -0.00880391988903284,</p><p>   0.06879935413599014,</p><p>   0.0564003586769104,</p><p>   0.07040536403656006,</p><p>   -0.020754728466272354,</p><p>   -0.04048658534884453,</p><p>   -0.006666888482868671,</p><p>   -0.0953674241900444,</p><p>   0.049781784415245056,</p><p>   0.021780474111437798,</p><p>   -0.06344643980264664,</p><p>   0.06119797006249428,</p><p>   0.0834411084651947,</p><p>   -0.034758951514959335,</p><p>   0.0029120452236384153,</p><p>   ...</p><p>  {'source': 'JavaScript source'},</p><p>  {'source': 'Mojo source'},</p><p>  {'source': 'Rust source'}],</p><p> 'documents': ['This is a python docs',</p><p>  'This is JavaScript docs',</p><p>  'This is a Mojo docs',</p><p>  'This is Rust docs'],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Como vemos se han mantenido los contenidos originales de <code><b>ID3</b></code> e <code><b>ID4</b></code></p>
						</div>
					</div>
				</div>
			</div>
			<!-- Open div header -->
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<h4 id="Añadir-embeddings">
								<a class="anchor-link" href="#Añadir-embeddings">
									<p style="margin-left: 30px">Añadir embeddings</p>
								</a>
							</h4>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Podemos añadir embeddings directamente sin añadir documentos. Aunque esto no tiene mucho sentido, ya que si solo añadimos los embeddings, cuando queramos hacer una consulta no habrá documentos que recuperar</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Obtenemos unos embeddings para poder crear otros con las mismas dimensiones</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">embedding1</span> <span>=</span> <span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">peek</span><span style="color: #e3e11d;">(</span><span style="color: #7e7a38;">1</span><span style="color: #e3e11d;">)[</span><span style="color: #8d783e;">&#39;embeddings&#39;</span><span style="color: #e3e11d;">]</span></p>
<p><span style="color: #dfd84a;">len</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">embedding1</span><span style="color: #e3e11d;">),</span> <span style="color: #dfd84a;">len</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">embedding1</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a38;">0</span><span style="color: #e3e11d;">])</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
				<div class="output_wrapper">
					<div class="output">
						<div class="output_area">
							<div class="prompt" style="margin-left: 20px;">Output:</div>
							<div class="output_subarea output_stream output_stdout output_text">
								<pre style="margin-left: 60px; line-height: 0%;"><p>(1, 384)</p></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Creamos unos embeddings nuevos con todo unos para saber que son los que hemos creado</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">new_embedding</span> <span>=</span> <span style="color: #e3e11d;">[</span><span style="color: #7e7a38;">1</span><span style="color: #e3e11d;">]</span> <span>*</span> <span style="color: #dfd84a;">len</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">embedding1</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a38;">0</span><span style="color: #e3e11d;">])</span></p>
<p><span style="color: #6b97e8;">new_embedding</span> <span>=</span> <span style="color: #e3e11d;">[</span><span style="color: #6b97e8;">new_embedding</span><span style="color: #e3e11d;">]</span></p>
<p><span style="color: #dfd84a;">len</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">new_embedding</span><span style="color: #e3e11d;">),</span> <span style="color: #dfd84a;">len</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">new_embedding</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a38;">0</span><span style="color: #e3e11d;">])</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
				<div class="output_wrapper">
					<div class="output">
						<div class="output_area">
							<div class="prompt" style="margin-left: 20px;">Output:</div>
							<div class="output_subarea output_stream output_stdout output_text">
								<pre style="margin-left: 60px; line-height: 0%;"><p>(1, 384)</p></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Ahora añadimos los nuevos embeddings</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">add</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">embeddings</span><span>=</span><span style="color: #6b97e8;">new_embedding</span><span style="color: #e3e11d;">,</span></p>
<p>    <span style="color: #6b97e8;">metadatas</span><span>=</span><span style="color: #e3e11d;">[{</span><span style="color: #7e7a34;">&quot;source&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;Only embeddings&quot;</span><span style="color: #e3e11d;">}],</span></p>
<p>    <span style="color: #6b97e8;">ids</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;id5&quot;</span><span style="color: #e3e11d;">]</span></p>
<p><span style="color: #e3e11d;">)</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Vamos a ver los datos de la colección</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">peek</span><span style="color: #e3e11d;">()[</span><span style="color: #8d783e;">&#39;embeddings&#39;</span><span style="color: #e3e11d;">][</span><span>-</span><span style="color: #7e7a38;">1</span><span style="color: #e3e11d;">]</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
				<div class="output_wrapper">
					<div class="output">
						<div class="output_area">
							<div class="prompt" style="margin-left: 20px;">Output:</div>
							<div class="output_subarea output_stream output_stdout output_text">
								<pre style="margin-left: 60px; line-height: 0%;"><p>[1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> ...,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0]</p></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">El último elemento de la condición tiene los embeddings que hemos añadido</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;"> > <b>Nota</b>: Si intentamos añadir embbedings con un tamaño diferente a los que ya hay en la colección, nos dará un error</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">new_embedding_differetn_size</span> <span>=</span> <span style="color: #e3e11d;">[</span><span style="color: #7e7a38;">1</span><span style="color: #e3e11d;">]</span> <span>*</span> <span style="color: #e3e11d;">(</span><span style="color: #dfd84a;">len</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">embedding1</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a38;">0</span><span style="color: #e3e11d;">])</span><span>-</span><span style="color: #7e7a38;">1</span><span style="color: #e3e11d;">)</span></p>
<p><span style="color: #6b97e8;">new_embedding_differetn_size</span> <span>=</span> <span style="color: #e3e11d;">[</span><span style="color: #6b97e8;">new_embedding_differetn_size</span><span style="color: #e3e11d;">]</span></p>
<p><span style="color: #dfd84a;">len</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">new_embedding_differetn_size</span><span style="color: #e3e11d;">),</span> <span style="color: #dfd84a;">len</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">new_embedding_differetn_size</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a38;">0</span><span style="color: #e3e11d;">])</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
				<div class="output_wrapper">
					<div class="output">
						<div class="output_area">
							<div class="prompt" style="margin-left: 20px;">Output:</div>
							<div class="output_subarea output_stream output_stdout output_text">
								<pre style="margin-left: 60px; line-height: 0%;"><p>(1, 383)</p></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing text_cell rendered">
				<div class="prompt input_prompt">
					<div class="inner_cell">
						<div class="text_cell_render border-box-sizing rendered_html">
							<p style="margin-left: 0px;">Como se puede ver la dimensión del embedding es 383, en vez de 384</p>
						</div>
					</div>
				</div>
			</div>
			<div class="cell border-box-sizing code_cell rendered">
				<div class="input">
					<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
					<div class="inner_cell">
						<div class="input_area">
							<div class=" highlight hl-python3">
								<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">add</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">embeddings</span><span>=</span><span style="color: #6b97e8;">new_embedding_differetn_size</span><span style="color: #e3e11d;">,</span></p>
<p>    <span style="color: #6b97e8;">metadatas</span><span>=</span><span style="color: #e3e11d;">[{</span><span style="color: #7e7a34;">&quot;source&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;New embeddings different size&quot;</span><span style="color: #e3e11d;">}],</span></p>
<p>    <span style="color: #6b97e8;">ids</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;id6&quot;</span><span style="color: #e3e11d;">]</span></p>
<p><span style="color: #e3e11d;">)</span></p>
								</pre>
							</div>
						</div>
					</div>
				</div>
				<div class="output_wrapper">
					<div class="output">
						<div class="output_area">
							<div class="prompt" style="margin-left: 20px;">Output:</div>
							<div class="output_subarea output_text output_error">
								<pre style="margin-left: 60px; line-height: 0%;"><p><span style="color:red">---------------------------------------------------------------------------</span></p><p><span style="color:red">InvalidDimensionException</span>                 Traceback (most recent call last)</p><p>Cell <span style="color:green">In[28], line 1</span></p><p><span style="color:green">----&gt; 1</span> collection[38;5;241m.[39madd(</p><p><span style="color:green"><b>      2</b></span>     embeddings[38;5;241m=[39mnew_embedding_differetn_size,</p><p><span style="color:green"><b>      3</b></span>     metadatas[38;5;241m=[39m[{[38;5;124m"[39m[38;5;124msource[39m[38;5;124m"[39m: [38;5;124m"[39m[38;5;124mNew embeddings different size[39m[38;5;124m"[39m}],</p><p><span style="color:green"><b>      4</b></span>     ids[38;5;241m=[39m[[38;5;124m"[39m[38;5;124mid6[39m[38;5;124m"[39m]</p><p><span style="color:green"><b>      5</b></span> )</p><p></p><p>File <span style="color:green">~/miniforge3/envs/crhomadb/lib/python3.11/site-packages/chromadb/api/models/Collection.py:168</span>, in Collection.add<span style="color:blue">(self, ids, embeddings, metadatas, documents, images, uris)</span></p><p><span style="color:green"><b>    163</b></span>             [38;5;28;01mraise[39;00m [38;5;167;01mValueError[39;00m(</p><p><span style="color:green"><b>    164</b></span>                 [38;5;124m"[39m[38;5;124mYou must set a data loader on the collection if loading from URIs.[39m[38;5;124m"[39m</p><p><span style="color:green"><b>    165</b></span>             )</p><p><span style="color:green"><b>    166</b></span>         embeddings [38;5;241m=[39m [38;5;28mself[39m[38;5;241m.[39m_embed([38;5;28mself[39m[38;5;241m.[39m_data_loader(uris))</p><p><span style="color:green">--&gt; 168</span> [38;5;28mself[39m[38;5;241m.[39m_client[38;5;241m.[39m_add(ids, [38;5;28mself[39m[38;5;241m.[39mid, embeddings, metadatas, documents, uris)</p><p></p><p>File <span style="color:green">~/miniforge3/envs/crhomadb/lib/python3.11/site-packages/chromadb/telemetry/opentelemetry/__init__.py:127</span>, in trace_method.&lt;locals&gt;.decorator.&lt;locals&gt;.wrapper<span style="color:blue">(*args, **kwargs)</span></p><p><span style="color:green"><b>    125</b></span> [38;5;28;01mglobal[39;00m tracer, granularity</p><p><span style="color:green"><b>    126</b></span> [38;5;28;01mif[39;00m trace_granularity [38;5;241m&lt;[39m granularity:</p><p><span style="color:green">--&gt; 127</span>     [38;5;28;01mreturn[39;00m f([38;5;241m*[39margs, [38;5;241m*[39m[38;5;241m*[39mkwargs)</p><p><span style="color:green"><b>    128</b></span> [38;5;28;01mif[39;00m [38;5;129;01mnot[39;00m tracer:</p><p><span style="color:green"><b>    129</b></span>     [38;5;28;01mreturn[39;00m f([38;5;241m*[39margs, [38;5;241m*[39m[38;5;241m*[39mkwargs)</p><p></p><p>File <span style="color:green">~/miniforge3/envs/crhomadb/lib/python3.11/site-packages/chromadb/api/segment.py:375</span>, in SegmentAPI._add<span style="color:blue">(self, ids, collection_id, embeddings, metadatas, documents, uris)</span></p><p><span style="color:green"><b>    365</b></span> records_to_submit [38;5;241m=[39m []</p><p><span style="color:green"><b>    366</b></span> [38;5;28;01mfor[39;00m r [38;5;129;01min[39;00m _records(</p><p><span style="color:green"><b>    367</b></span>     t[38;5;241m.[39mOperation[38;5;241m.[39mADD,</p><p><span style="color:green"><b>    368</b></span>     ids[38;5;241m=[39mids,</p><p><span style="color:green">   (...)</span></p><p><span style="color:green"><b>    373</b></span>     uris[38;5;241m=[39muris,</p><p><span style="color:green"><b>    374</b></span> ):</p><p><span style="color:green">--&gt; 375</span>     [38;5;28mself[39m[38;5;241m.[39m_validate_embedding_record(coll, r)</p><p><span style="color:green"><b>    376</b></span>     records_to_submit[38;5;241m.[39mappend(r)</p><p><span style="color:green"><b>    377</b></span> [38;5;28mself[39m[38;5;241m.[39m_producer[38;5;241m.[39msubmit_embeddings(coll[[38;5;124m"[39m[38;5;124mtopic[39m[38;5;124m"[39m], records_to_submit)</p><p></p><p>File <span style="color:green">~/miniforge3/envs/crhomadb/lib/python3.11/site-packages/chromadb/telemetry/opentelemetry/__init__.py:127</span>, in trace_method.&lt;locals&gt;.decorator.&lt;locals&gt;.wrapper<span style="color:blue">(*args, **kwargs)</span></p><p><span style="color:green"><b>    125</b></span> [38;5;28;01mglobal[39;00m tracer, granularity</p><p><span style="color:green"><b>    126</b></span> [38;5;28;01mif[39;00m trace_granularity [38;5;241m&lt;[39m granularity:</p><p><span style="color:green">--&gt; 127</span>     [38;5;28;01mreturn[39;00m f([38;5;241m*[39margs, [38;5;241m*[39m[38;5;241m*[39mkwargs)</p><p><span style="color:green"><b>    128</b></span> [38;5;28;01mif[39;00m [38;5;129;01mnot[39;00m tracer:</p><p><span style="color:green"><b>    129</b></span>     [38;5;28;01mreturn[39;00m f([38;5;241m*[39margs, [38;5;241m*[39m[38;5;241m*[39mkwargs)</p><p></p><p>File <span style="color:green">~/miniforge3/envs/crhomadb/lib/python3.11/site-packages/chromadb/api/segment.py:799</span>, in SegmentAPI._validate_embedding_record<span style="color:blue">(self, collection, record)</span></p><p><span style="color:green"><b>    797</b></span> add_attributes_to_current_span({[38;5;124m"[39m[38;5;124mcollection_id[39m[38;5;124m"[39m: [38;5;28mstr[39m(collection[[38;5;124m"[39m[38;5;124mid[39m[38;5;124m"[39m])})</p><p><span style="color:green"><b>    798</b></span> [38;5;28;01mif[39;00m record[[38;5;124m"[39m[38;5;124membedding[39m[38;5;124m"[39m]:</p><p><span style="color:green">--&gt; 799</span>     [38;5;28mself[39m[38;5;241m.[39m_validate_dimension(collection, [38;5;28mlen[39m(record[[38;5;124m"[39m[38;5;124membedding[39m[38;5;124m"[39m]), update[38;5;241m=[39m[38;5;28;01mTrue[39;00m)</p><p></p><p>File <span style="color:green">~/miniforge3/envs/crhomadb/lib/python3.11/site-packages/chromadb/telemetry/opentelemetry/__init__.py:127</span>, in trace_method.&lt;locals&gt;.decorator.&lt;locals&gt;.wrapper<span style="color:blue">(*args, **kwargs)</span></p><p><span style="color:green"><b>    125</b></span> [38;5;28;01mglobal[39;00m tracer, granularity</p><p><span style="color:green"><b>    126</b></span> [38;5;28;01mif[39;00m trace_granularity [38;5;241m&lt;[39m granularity:</p><p><span style="color:green">--&gt; 127</span>     [38;5;28;01mreturn[39;00m f([38;5;241m*[39margs, [38;5;241m*[39m[38;5;241m*[39mkwargs)</p><p><span style="color:green"><b>    128</b></span> [38;5;28;01mif[39;00m [38;5;129;01mnot[39;00m tracer:</p><p><span style="color:green"><b>    129</b></span>     [38;5;28;01mreturn[39;00m f([38;5;241m*[39margs, [38;5;241m*[39m[38;5;241m*[39mkwargs)</p><p></p><p>File <span style="color:green">~/miniforge3/envs/crhomadb/lib/python3.11/site-packages/chromadb/api/segment.py:814</span>, in SegmentAPI._validate_dimension<span style="color:blue">(self, collection, dim, update)</span></p><p><span style="color:green"><b>    812</b></span>         [38;5;28mself[39m[38;5;241m.[39m_collection_cache[[38;5;28mid[39m][[38;5;124m"[39m[38;5;124mdimension[39m[38;5;124m"[39m] [38;5;241m=[39m dim</p><p><span style="color:green"><b>    813</b></span> [38;5;28;01melif[39;00m collection[[38;5;124m"[39m[38;5;124mdimension[39m[38;5;124m"[39m] [38;5;241m!=[39m dim:</p><p><span style="color:green">--&gt; 814</span>     [38;5;28;01mraise[39;00m InvalidDimensionException(</p><p><span style="color:green"><b>    815</b></span>         [38;5;124mf[39m[38;5;124m"[39m[38;5;124mEmbedding dimension [39m[38;5;132;01m{[39;00mdim[38;5;132;01m}[39;00m[38;5;124m does not match collection dimensionality [39m[38;5;132;01m{[39;00mcollection[[38;5;124m'[39m[38;5;124mdimension[39m[38;5;124m'[39m][38;5;132;01m}[39;00m[38;5;124m"[39m</p><p><span style="color:green"><b>    816</b></span>     )</p><p><span style="color:green"><b>    817</b></span> [38;5;28;01melse[39;00m:</p><p><span style="color:green"><b>    818</b></span>     [38;5;28;01mreturn[39;00m</p><p></p><p><span style="color:red">InvalidDimensionException</span>: Embedding dimension 383 does not match collection dimensionality 384</p></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Open div header -->
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<h4 id="Añadir-documentos-y-embeddings">
							<a class="anchor-link" href="#Añadir-documentos-y-embeddings">
								<p style="margin-left: 30px">Añadir documentos y embeddings</p>
							</a>
						</h4>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Chroma nos permite también añadir documentos y embeddings a la vez. De modo que si se hace esto, no creará los embeddings del documento</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">add</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">documents</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;This is a Pytorch docs&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">embeddings</span><span>=</span><span style="color: #6b97e8;">new_embedding</span><span style="color: #e3e11d;">,</span></p>
<p>    <span style="color: #6b97e8;">metadatas</span><span>=</span><span style="color: #e3e11d;">[{</span><span style="color: #7e7a34;">&quot;source&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;Pytorch source&quot;</span><span style="color: #e3e11d;">}],</span></p>
<p>    <span style="color: #6b97e8;">ids</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;id6&quot;</span><span style="color: #e3e11d;">]</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Si miramos los embeddings del último elemento de la colección, veremos que son los que hemos añadido</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">peek</span><span style="color: #e3e11d;">()[</span><span style="color: #8d783e;">&#39;embeddings&#39;</span><span style="color: #e3e11d;">][</span><span>-</span><span style="color: #7e7a38;">1</span><span style="color: #e3e11d;">]</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>[1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> ...,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0,</p><p> 1.0]</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Open div header -->
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<h3 id="Consultas">
							<a class="anchor-link" href="#Consultas">
								<p style="margin-left: 20px">Consultas</p>
							</a>
						</h3>
					</div>
				</div>
			</div>
		</div>
		<!-- Open div header -->
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<h4 id="Consultas-por-documentos">
							<a class="anchor-link" href="#Consultas-por-documentos">
								<p style="margin-left: 30px">Consultas por documentos</p>
							</a>
						</h4>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Para hacer una consulta usamos el método <code><b>query</b></code>. Con el parámetro <code><b>n_results</b></code> podemos especificar cuántos resultados queremos obtener</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">query</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">query_texts</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;python&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">n_results</span><span>=</span><span style="color: #7e7a38;">1</span><span style="color: #e3e11d;">,</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': [['id1']],</p><p> 'distances': [[0.5389559268951416]],</p><p> 'metadatas': [[{'source': 'Python source'}]],</p><p> 'embeddings': None,</p><p> 'documents': [['This is a python docs']],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Si en vez de <code><b>n_results = 1</b></code> ponemos un valor mayor, nos devolverá más resultados</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">query</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">query_texts</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;python&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">n_results</span><span>=</span><span style="color: #7e7a38;">10</span><span style="color: #e3e11d;">,</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': [['id1', 'id2', 'id4', 'id3', 'id5', 'id6']],</p><p> 'distances': [[0.5389559268951416,</p><p>   1.5743632316589355,</p><p>   1.578398585319519,</p><p>   1.59961998462677,</p><p>   384.56890869140625,</p><p>   384.56890869140625]],</p><p> 'metadatas': [[{'source': 'Python source'},</p><p>   {'source': 'JavaScript source'},</p><p>   {'source': 'Rust source'},</p><p>   {'source': 'Mojo source'},</p><p>   {'source': 'Only embeddings'},</p><p>   {'source': 'Pytorch source'}]],</p><p> 'embeddings': None,</p><p> 'documents': [['This is a python docs',</p><p>   'This is JavaScript docs',</p><p>   'This is Rust docs',</p><p>   'This is a Mojo docs',</p><p>   None,</p><p>   'This is a Pytorch docs']],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Podemos filtrar por un valor de metadato con el argumento <code><b>where</b></code></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">query</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">query_texts</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;python&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">n_results</span><span>=</span><span style="color: #7e7a38;">10</span><span style="color: #e3e11d;">,</span></p>
<p>    <span style="color: #6b97e8;">where</span><span>=</span><span style="color: #e3e11d;">{</span><span style="color: #7e7a34;">&quot;source&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;Python source&quot;</span><span style="color: #e3e11d;">}</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': [['id1']],</p><p> 'distances': [[0.5389559268951416]],</p><p> 'metadatas': [[{'source': 'Python source'}]],</p><p> 'embeddings': None,</p><p> 'documents': [['This is a python docs']],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Vemos que ya solo nos devuelve 1 resultado</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">También podemos filtrar por el contenido del documento con el argumento <code><b>where_document</b></code></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">query</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">query_texts</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;python&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">n_results</span><span>=</span><span style="color: #7e7a38;">10</span><span style="color: #e3e11d;">,</span></p>
<p>    <span style="color: #6b97e8;">where_document</span><span>=</span><span style="color: #e3e11d;">{</span><span style="color: #7e7a34;">&quot;$contains&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;python&quot;</span><span style="color: #e3e11d;">}</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': [['id1']],</p><p> 'distances': [[0.5389559268951416]],</p><p> 'metadatas': [[{'source': 'Python source'}]],</p><p> 'embeddings': None,</p><p> 'documents': [['This is a python docs']],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Más adelante veremos las posibilidades que tenemos aquí</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Cuando hacemos una consulta podemos decir qué datos queremos que nos devuelva, por ejemplo solo los embeddings, solo la metadata, o varios datos especificándoselo en una lista mediante el argumento <code><b>include</b></code></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">query</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">query_texts</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;python&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">n_results</span><span>=</span><span style="color: #7e7a38;">10</span><span style="color: #e3e11d;">,</span></p>
<p>    <span style="color: #6b97e8;">include</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;documents&quot;</span><span style="color: #e3e11d;">,</span> <span style="color: #7e7a34;">&quot;distances&quot;</span><span style="color: #e3e11d;">]</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': [['id1', 'id2', 'id4', 'id3', 'id5', 'id6']],</p><p> 'distances': [[0.5389559268951416,</p><p>   1.5743632316589355,</p><p>   1.578398585319519,</p><p>   1.59961998462677,</p><p>   384.56890869140625,</p><p>   384.56890869140625]],</p><p> 'metadatas': None,</p><p> 'embeddings': None,</p><p> 'documents': [['This is a python docs',</p><p>   'This is JavaScript docs',</p><p>   'This is Rust docs',</p><p>   'This is a Mojo docs',</p><p>   None,</p><p>   'This is a Pytorch docs']],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Vemos que ahora <code><b>metadatas</b></code> es <code><b>None</b></code></p>
					</div>
				</div>
			</div>
		</div>
		<!-- Open div header -->
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<h4 id="Varias-consultas-a-la-vez">
							<a class="anchor-link" href="#Varias-consultas-a-la-vez">
								<p style="margin-left: 30px">Varias consultas a la vez</p>
							</a>
						</h4>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Podemos hacerle a lacolección varias consultas a la vez, para ello, le pasamos una lista al parámetro <code><b>query_texts</b></code></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">query</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">query_texts</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;programming language&quot;</span><span style="color: #e3e11d;">,</span> <span style="color: #7e7a34;">&quot;high level&quot;</span><span style="color: #e3e11d;">,</span> <span style="color: #7e7a34;">&quot;multi propuse&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">n_results</span><span>=</span><span style="color: #7e7a38;">1</span><span style="color: #e3e11d;">,</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': [['id1'], ['id1'], ['id3']],</p><p> 'distances': [[1.152251958847046], [1.654376745223999], [1.6786067485809326]],</p><p> 'metadatas': [[{'source': 'Python source'}],</p><p>  [{'source': 'Python source'}],</p><p>  [{'source': 'Mojo source'}]],</p><p> 'embeddings': None,</p><p> 'documents': [['This is a python docs'],</p><p>  ['This is a python docs'],</p><p>  ['This is a Mojo docs']],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Para cada consulta me ha devuelto un resultado</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Esto es muy útil cuando la base de datos está alojada en un servidor y nos cobran por cada consulta que hacemos. Por lo que en vez de hacer una consulta por cada duda que tengamos, hacemos una consulta con todas</p>
					</div>
				</div>
			</div>
		</div>
		<!-- Open div header -->
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<h4 id="Consultas-por-embeddings">
							<a class="anchor-link" href="#Consultas-por-embeddings">
								<p style="margin-left: 30px">Consultas por embeddings</p>
							</a>
						</h4>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Cuando hacemos una consulta por documentos, lo que hace chroma es calcular el embedding del <code><b>query_texts</b></code> y buscar los documentos que más se parezcan a ese embedding. Pero si ya tenemos el embedding, podemos hacer la consulta directamente con el embedding</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Vamos primero a obtener el embedding de una consulta con la misma función de embedding de las coleccion</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">query_texts</span> <span>=</span> <span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;python language&quot;</span><span style="color: #e3e11d;">]</span></p>
<p><span style="color: #6b97e8;">query_embeddings</span> <span>=</span> <span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">_embedding_function</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">query_texts</span><span style="color: #e3e11d;">)</span></p>
<p><span style="color: #6b97e8;">query_embeddings</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>[[-0.04816831275820732,</p><p>  0.014662696048617363,</p><p>  -0.031021444126963615,</p><p>  0.008308809250593185,</p><p>  -0.07176128774881363,</p><p>  -0.10355626791715622,</p><p>  0.06690476089715958,</p><p>  0.04229631647467613,</p><p>  -0.03681119903922081,</p><p>  -0.04993892088532448,</p><p>  0.03186540678143501,</p><p>  0.015252595767378807,</p><p>  0.0642094686627388,</p><p>  0.018130118027329445,</p><p>  0.016300885006785393,</p><p>  -0.028082313016057014,</p><p>  -0.03994889184832573,</p><p>  0.023195551708340645,</p><p>  0.004547565709799528,</p><p>  -0.11764183640480042,</p><p>  0.019792592152953148,</p><p>  0.0496944822371006,</p><p>  -0.013253907673060894,</p><p>  0.03610404208302498,</p><p>  0.030529780313372612,</p><p>  -0.01815914921462536,</p><p>  -0.009753326885402203,</p><p>  0.03412770479917526,</p><p>  0.03020440600812435,</p><p>  ...</p><p>  0.02079579420387745,</p><p>  -0.00972712505608797,</p><p>  0.13462257385253906,</p><p>  0.15277136862277985,</p><p>  -0.028574923053383827]]</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Ahora podemos hacer la consulta con el embedding</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">query</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">query_embeddings</span><span>=</span><span style="color: #6b97e8;">query_embeddings</span><span style="color: #e3e11d;">,</span></p>
<p>    <span style="color: #6b97e8;">n_results</span><span>=</span><span style="color: #7e7a38;">1</span><span style="color: #e3e11d;">,</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': [['id1']],</p><p> 'distances': [[0.6297433376312256]],</p><p> 'metadatas': [[{'source': 'Python source'}]],</p><p> 'embeddings': None,</p><p> 'documents': [['This is a python docs']],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Al igual que antes podemos obtener más resultados aumentando el valor del parámetro <code><b>n_results</b></code>, y podemos filtrar con los parámetros <code><b>where</b></code> y <code><b>where_document</b></code>. También podemos hacer varias consultas de una vez, y podemos especificar qué datos queremos que nos devuelva con el parámetro <code><b>include</b></code></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"> > <b>Nota</b>: Si intentamos hacer una consulta con un embedding de diferente dimensión a los que ya hay en la colección, nos dará un error</p>
					</div>
				</div>
			</div>
		</div>
		<!-- Open div header -->
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<h3 id="Recuperar-documentos-por-`ID`">
							<a class="anchor-link" href="#Recuperar-documentos-por-`ID`">
								<p style="margin-left: 20px">Recuperar documentos por <code><b>ID</b></code></p>
							</a>
						</h3>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Si sabemos la <code><b>ID</b></code> de un documento, podemos recuperar el documento con el método <code><b>get</b></code></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">get</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">ids</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;id1&quot;</span><span style="color: #e3e11d;">],</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': ['id1'],</p><p> 'embeddings': None,</p><p> 'metadatas': [{'source': 'Python source'}],</p><p> 'documents': ['This is a python docs'],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">También se pueden recuperar varios documentos de una sola vez</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">get</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">ids</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;id1&quot;</span><span style="color: #e3e11d;">,</span> <span style="color: #7e7a34;">&quot;id2&quot;</span><span style="color: #e3e11d;">,</span> <span style="color: #7e7a34;">&quot;id3&quot;</span><span style="color: #e3e11d;">],</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': ['id1', 'id2', 'id3'],</p><p> 'embeddings': None,</p><p> 'metadatas': [{'source': 'Python source'},</p><p>  {'source': 'JavaScript source'},</p><p>  {'source': 'Mojo source'}],</p><p> 'documents': ['This is a python docs',</p><p>  'This is JavaScript docs',</p><p>  'This is a Mojo docs'],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Al igual que antes podemos filtrar con los argumentos <code><b>where</b></code> y <code><b>where_document</b></code>. También podemos hacer varias consultas de una vez, y podemos especificar qué datos queremos que nos devuelva con el parámetro <code><b>include</b></code></p>
					</div>
				</div>
			</div>
		</div>
		<!-- Open div header -->
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<h3 id="Filtrado">
							<a class="anchor-link" href="#Filtrado">
								<p style="margin-left: 20px">Filtrado</p>
							</a>
						</h3>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Como habíamos visto se pueden realizar filtrados por metadata con el parámetro <code><b>where</b></code>, y por el contenido del documento con el parámetro <code><b>where_document</b></code></p>
					</div>
				</div>
			</div>
		</div>
		<!-- Open div header -->
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<h4 id="Filtrado-por-metadata">
							<a class="anchor-link" href="#Filtrado-por-metadata">
								<p style="margin-left: 30px">Filtrado por metadata</p>
							</a>
						</h4>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Como los metadatos me introducian como un diccionario</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 80px;"><code>collection.add(<br>    documents=["This is a python docs", "This is JavaScript docs"],<br>    metadatas=[{"source": "Python source"}, {"source": "JavaScript source"}],<br>    ids=["id1", "id2"]<br>)<br></code></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Lo primero que tenemos que hacer es indicar la llave de la metadata por la que queremos filtrar. A continuación tenemos que poner un operador y el valor</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 80px;"><code>{<br>    "metadata_field": {<br>        <Operator>: <Value><br>    }<br>}<br></code></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Los posibles valores del oerador son</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">
							<ul>
								<li><b>$eq</b> - equal to (string, int, float)</li>
								<li><b>$ne</b> - not equal to (string, int, float)</li>
								<li><b>$gt</b> - greater than (int, float)</li>
								<li><b>$gte</b> - greater than or equal to (int, float)</li>
								<li><b>$lt</b> - less than (int, float)</li>
								<li><b>$lte</b> - less than or equal to (int, float)</li>
							</ul>
						</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">

					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">

					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">

					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">

					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">

					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Vamos a ver ahora una consulta</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">query</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">query_texts</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;python&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">n_results</span><span>=</span><span style="color: #7e7a38;">1</span><span style="color: #e3e11d;">,</span></p>
<p>    <span style="color: #6b97e8;">where</span><span>=</span></p>
<p>    <span style="color: #e3e11d;">{</span></p>
<p>        <span style="color: #7e7a34;">&quot;source&quot;</span><span style="color: #e3e11d;">:</span> </p>
<p>        <span style="color: #e3e11d;">{</span></p>
<p>            <span style="color: #7e7a34;">&quot;$eq&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;Python source&quot;</span></p>
<p>        <span style="color: #e3e11d;">}</span></p>
<p>    <span style="color: #e3e11d;">}</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': [['id1']],</p><p> 'distances': [[0.5389559268951416]],</p><p> 'metadatas': [[{'source': 'Python source'}]],</p><p> 'embeddings': None,</p><p> 'documents': [['This is a python docs']],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Si no ponemos operador, por defecto será <code><b>$eq</b></code>, es decir, esto</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 80px;"><code>{<br>    "metadata_field": {<br>        <"$eq">: <Value><br>    }<br>}<br></code></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Es lo mismo que esto</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 80px;"><code>{<br>    "metadata_field": <Value><br>}<br></code></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"> > <b>Nota</b>: Chroma solo buscará en los datos que tengan el metadato <code><b>source</b></code>, por ejemplo si se hace la búsqueda <code><b>where={"version": {"$ne": 1}}</b></code> solo devolverá los datos que en su metadata haya una key <code><b>version</b></code> y que no sea 1</p>
					</div>
				</div>
			</div>
		</div>
		<!-- Open div header -->
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<h4 id="Filtrado-por-el-contenido-del-documento">
							<a class="anchor-link" href="#Filtrado-por-el-contenido-del-documento">
								<p style="margin-left: 30px">Filtrado por el contenido del documento</p>
							</a>
						</h4>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">A la hora de filtrar por el contenido del documento tenemos dos posibles llaves <code><b>$contains</b></code> and <code><b>$not_contains</b></code></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Por ejemplo, buscamos los datos de la colección en los que aparece la palabra <code><b>python</b></code> en su documento</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">query</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">query_texts</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;python&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">n_results</span><span>=</span><span style="color: #7e7a38;">10</span><span style="color: #e3e11d;">,</span></p>
<p>    <span style="color: #6b97e8;">where_document</span><span>=</span><span style="color: #e3e11d;">{</span><span style="color: #7e7a34;">&quot;$contains&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;python&quot;</span><span style="color: #e3e11d;">}</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': [['id1']],</p><p> 'distances': [[0.5389559268951416]],</p><p> 'metadatas': [[{'source': 'Python source'}]],</p><p> 'embeddings': None,</p><p> 'documents': [['This is a python docs']],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Y todos los datos de la colección en los que no aparece la palabra <code><b>python</b></code> en su documento</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">query</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">query_texts</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;python&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">n_results</span><span>=</span><span style="color: #7e7a38;">10</span><span style="color: #e3e11d;">,</span></p>
<p>    <span style="color: #6b97e8;">where_document</span><span>=</span><span style="color: #e3e11d;">{</span><span style="color: #7e7a34;">&quot;$not_contains&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;python&quot;</span><span style="color: #e3e11d;">}</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': [['id2', 'id4', 'id3', 'id6']],</p><p> 'distances': [[1.5743632316589355,</p><p>   1.578398585319519,</p><p>   1.59961998462677,</p><p>   384.56890869140625]],</p><p> 'metadatas': [[{'source': 'JavaScript source'},</p><p>   {'source': 'Rust source'},</p><p>   {'source': 'Mojo source'},</p><p>   {'source': 'Pytorch source'}]],</p><p> 'embeddings': None,</p><p> 'documents': [['This is JavaScript docs',</p><p>   'This is Rust docs',</p><p>   'This is a Mojo docs',</p><p>   'This is a Pytorch docs']],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Adeás podemos usar los operadores lógicos <code><b>$and</b></code> y <code><b>$or</b></code> para hacer consultas más complejas</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 80px;"><code>{<br>    "$and": [<br>        {<br>            <Operator>: <Value><br>        },<br>        {<br>            <Operator>: <Value><br>        }<br>    ]<br>}<br></code></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 80px;"><code>{<br>    "$or": [<br>        {<br>            <Operator>: <Value><br>        },<br>        {<br>            <Operator>: <Value><br>        }<br>    ]<br>}<br></code></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Por ejemplo buscamos todos los documentos en los que aparecen las palabras <code><b>python</b></code> y <code><b>docs</b></code></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">query</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">query_texts</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;python&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">n_results</span><span>=</span><span style="color: #7e7a38;">10</span><span style="color: #e3e11d;">,</span></p>
<p>    <span style="color: #6b97e8;">where_document</span><span>=</span></p>
<p>    <span style="color: #e3e11d;">{</span></p>
<p>        <span style="color: #7e7a34;">&quot;$and&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #e3e11d;">[</span></p>
<p>            <span style="color: #e3e11d;">{</span><span style="color: #7e7a34;">&quot;$contains&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;python&quot;</span><span style="color: #e3e11d;">},</span></p>
<p>            <span style="color: #e3e11d;">{</span><span style="color: #7e7a34;">&quot;$contains&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;docs&quot;</span><span style="color: #e3e11d;">},</span></p>
<p>        <span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #e3e11d;">},</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': [['id1']],</p><p> 'distances': [[0.5389559268951416]],</p><p> 'metadatas': [[{'source': 'Python source'}]],</p><p> 'embeddings': None,</p><p> 'documents': [['This is a python docs']],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Open div header -->
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<h3 id="Actualizar-datos">
							<a class="anchor-link" href="#Actualizar-datos">
								<p style="margin-left: 20px">Actualizar datos</p>
							</a>
						</h3>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Cualquier item de un dato se puede actualizar con el método update</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">update</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">ids</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;id1&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">documents</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;This is a updated Python docs&quot;</span><span style="color: #e3e11d;">]</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Vamos a ver si se a actualizado</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">query</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">query_texts</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;python&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">n_results</span><span>=</span><span style="color: #7e7a38;">10</span><span style="color: #e3e11d;">,</span></p>
<p>    <span style="color: #6b97e8;">where_document</span><span>=</span><span style="color: #e3e11d;">{</span><span style="color: #7e7a34;">&quot;$contains&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;Python&quot;</span><span style="color: #e3e11d;">}</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': [['id1']],</p><p> 'distances': [[0.8247963190078735]],</p><p> 'metadatas': [[{'source': 'Python source'}]],</p><p> 'embeddings': None,</p><p> 'documents': [['This is a updated Python docs']],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"> > <b>Nota</b>: Si intentamos actualizar un <code><b>ID</b></code> que no existe, nos dará un error</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"> > <b>Nota</b>: Si intentamos actualizar un embeddings con otro de distinta dimension, nos dará un error</p>
					</div>
				</div>
			</div>
		</div>
		<!-- Open div header -->
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<h3 id="Actualizar-o-añadir-datos">
							<a class="anchor-link" href="#Actualizar-o-añadir-datos">
								<p style="margin-left: 20px">Actualizar o añadir datos</p>
							</a>
						</h3>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Con el método <code><b>upsert</b></code> podemos actualizar un dato si ya existe, o añadirlo si no existe</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">upsert</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">ids</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;id6&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">documents</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;This is a Pytorch docs&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">metadatas</span><span>=</span><span style="color: #e3e11d;">[{</span><span style="color: #7e7a34;">&quot;source&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;Pytorch source&quot;</span><span style="color: #e3e11d;">}],</span>   </p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Veamos si se a añadido a la colección</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">peek</span><span style="color: #e3e11d;">()</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': ['id1', 'id2', 'id3', 'id4', 'id5', 'id6'],</p><p> 'embeddings': [[-0.08374718576669693,</p><p>   0.01027572900056839,</p><p>   -0.04819200187921524,</p><p>   0.01758415624499321,</p><p>   0.013158757239580154,</p><p>   -0.11435151100158691,</p><p>   -0.024248722940683365,</p><p>   -0.01319972239434719,</p><p>   -0.09626100957393646,</p><p>   -0.010561048053205013,</p><p>   0.09369225800037384,</p><p>   0.06017905846238136,</p><p>   0.031283188611269,</p><p>   0.014855983667075634,</p><p>   -0.0015984248602762818,</p><p>   0.023238031193614006,</p><p>   -0.04709107056260109,</p><p>   -0.007838696241378784,</p><p>   0.012870412319898605,</p><p>   -0.028354981914162636,</p><p>   -0.007653804495930672,</p><p>   0.09018168598413467,</p><p>   0.060235824435949326,</p><p>   0.0005205210763961077,</p><p>   ...</p><p>   0.014388148672878742]],</p><p> 'metadatas': [{'source': 'Python source'},</p><p>  {'source': 'JavaScript source'},</p><p>  {'source': 'Mojo source'},</p><p>  {'source': 'Rust source'},</p><p>  {'source': 'Only embeddings'},</p><p>  {'source': 'Pytorch source'}],</p><p> 'documents': ['This is a updated Python docs',</p><p>  'This is JavaScript docs',</p><p>  'This is a Mojo docs',</p><p>  'This is Rust docs',</p><p>  None,</p><p>  'This is a Pytorch docs'],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Vemos que sí</p>
					</div>
				</div>
			</div>
		</div>
		<!-- Open div header -->
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<h3 id="Eliminar-datos">
							<a class="anchor-link" href="#Eliminar-datos">
								<p style="margin-left: 20px">Eliminar datos</p>
							</a>
						</h3>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Podemos eliminar datos de una colección con el método <code><b>delete</b></code></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Vamos a eliminar el dáto con <code><b>ID</b></code> <code><b>id5</b></code> que es el que añadimos con su embedding todo a unos</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">delete</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">ids</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;id5&quot;</span><span style="color: #e3e11d;">]</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Vamos a ver si se ha eliminado</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">peek</span><span style="color: #e3e11d;">()</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': ['id1', 'id2', 'id3', 'id4', 'id6'],</p><p> 'embeddings': [[-0.08374718576669693,</p><p>   0.01027572900056839,</p><p>   -0.04819200187921524,</p><p>   0.01758415624499321,</p><p>   0.013158757239580154,</p><p>   -0.11435151100158691,</p><p>   -0.024248722940683365,</p><p>   -0.01319972239434719,</p><p>   -0.09626100957393646,</p><p>   -0.010561048053205013,</p><p>   0.09369225800037384,</p><p>   0.06017905846238136,</p><p>   0.031283188611269,</p><p>   0.014855983667075634,</p><p>   -0.0015984248602762818,</p><p>   0.023238031193614006,</p><p>   -0.04709107056260109,</p><p>   -0.007838696241378784,</p><p>   0.012870412319898605,</p><p>   -0.028354981914162636,</p><p>   -0.007653804495930672,</p><p>   0.09018168598413467,</p><p>   0.060235824435949326,</p><p>   0.0005205210763961077,</p><p>   ...</p><p>   0.07033486664295197,</p><p>   0.014388148672878742]],</p><p> 'metadatas': [{'source': 'Python source'},</p><p>  {'source': 'JavaScript source'},</p><p>  {'source': 'Mojo source'},</p><p>  {'source': 'Rust source'},</p><p>  {'source': 'Pytorch source'}],</p><p> 'documents': ['This is a updated Python docs',</p><p>  'This is JavaScript docs',</p><p>  'This is a Mojo docs',</p><p>  'This is Rust docs',</p><p>  'This is a Pytorch docs'],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Vemos que ya no está</p>
					</div>
				</div>
			</div>
		</div>
		<!-- Open div header -->
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<h2 id="Embeddings">
							<a class="anchor-link" href="#Embeddings">
								<p style="margin-left: 10px">Embeddings</p>
							</a>
						</h2>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Como hemos dicho podemos usar distintas funciones de embeddings y si no se le especifica ninguna usará <code><b>all-MiniLM-L6-v2</b></code>. En la página de la <a href="https://docs.trychroma.com/embeddings" target="_blank">documentación de embeddings</a> de chroma podemos ver las distintas funciones de embeddings que podemos usar. Como esto es algo que puede ir cambiando, y además algunas son de pago y requieren api key, vamos a explicar solo cómo usar las de HuggingFace</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Primero establecemos la función de embedding</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #833aa0;">import</span> <span style="color: #4fcd7d;">chromadb.utils.embedding_functions</span> <span style="color: #a04cc1;">as</span> <span style="color: #4fcd7d;">embedding_functions</span></p>
<p></p>
<p><span style="color: #6b97e8;">huggingface_ef</span> <span>=</span> <span style="color: #6b97e8;">embedding_functions</span><span>.</span><span style="color: #6b97e8;">HuggingFaceEmbeddingFunction</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">api_key</span><span>=</span><span style="color: #7e7a34;">&quot;YOUR_API_KEY&quot;</span><span style="color: #e3e11d;">,</span></p>
<p>    <span style="color: #6b97e8;">model_name</span><span>=</span><span style="color: #7e7a34;">&quot;sentence-transformers/all-mpnet-base-v2&quot;</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">En mi caso uso <code><b>sentence-transformers/all-mpnet-base-v2</b></code> que es la más descargada de <code><b>sentence-transformers</b></code> en el momento de escribir este post</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Para ahora añadir la función de embedding a la colección, tenemos que añadir el argumento <code><b>metadata={"embedding": <function>}</b></code></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span> <span>=</span> <span style="color: #6b97e8;">chroma_client</span><span>.</span><span style="color: #6b97e8;">create_collection</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">name</span><span>=</span><span style="color: #7e7a34;">&quot;colection_huggingface&quot;</span><span style="color: #e3e11d;">,</span></p>
<p>    <span style="color: #6b97e8;">embedding_function</span><span>=</span><span style="color: #6b97e8;">huggingface_ef</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Podemos comprobar que hemos añadido la nueva función de embedding lo podemos hacer calculando los embeddings de una palabra</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">embedding</span> <span>=</span> <span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">_embedding_function</span><span style="color: #e3e11d;">([</span><span style="color: #7e7a34;">&quot;python&quot;</span><span style="color: #e3e11d;">])</span></p>
<p><span style="color: #dfd84a;">len</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">embedding</span><span style="color: #e3e11d;">),</span> <span style="color: #dfd84a;">len</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">embedding</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a38;">0</span><span style="color: #e3e11d;">])</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>(1, 768)</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">La longitud del embedding es de 768</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Si ahora calculamos el embedding con la función de embedding de la colección anterior</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span> <span>=</span> <span style="color: #6b97e8;">chroma_client</span><span>.</span><span style="color: #6b97e8;">get_collection</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">name</span> <span>=</span> <span style="color: #7e7a34;">&quot;my_collection&quot;</span><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">embedding</span> <span>=</span> <span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">_embedding_function</span><span style="color: #e3e11d;">([</span><span style="color: #7e7a34;">&quot;python&quot;</span><span style="color: #e3e11d;">])</span></p>
<p><span style="color: #dfd84a;">len</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">embedding</span><span style="color: #e3e11d;">),</span> <span style="color: #dfd84a;">len</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">embedding</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a38;">0</span><span style="color: #e3e11d;">])</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>(1, 384)</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Vemos que ahora la longitud del ambedding es 384, es decir, sí habíamos usado antes una nueva función de embedding</p>
					</div>
				</div>
			</div>
		</div>
		<!-- Open div header -->
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<h2 id="Multimodalidad">
							<a class="anchor-link" href="#Multimodalidad">
								<p style="margin-left: 10px">Multimodalidad</p>
							</a>
						</h2>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Podemos añadir embeddings de imágenes ya que chroma tiene incorporado <a href="https://github.com/mlfoundations/open_clip" target="_blank">OpenCLIP</a>. <a href="https://github.com/mlfoundations/open_clip" target="_blank">OpenCLIP</a> es una implementación open source de <a href="https://github.com/openai/CLIP" target="_blank">CLIP</a> (Contrastive Language-Image Pre-Training), que es una red neuronal de OpenAI la cual es capaz de dar una descripción de una imagen</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Para poder usar OpenCLIP, tenemos que instalarlo con pip</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 80px;"><code>pip install open-clip-torch<br></code></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Una vez instalado podemos usarlo para crear embeddings de la siguiente foto</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"><p align="center"><img src="http://maximofn.com/wp-content/uploads/2024/02/chromadb_dalle3.webp" alt="chroma db - python mixture"></p></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Que la tengo en mi path local <code><b>../images/chromadb_dalle3.webp</b></code></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #833aa0;">from</span> <span style="color: #4fcd7d;">chromadb.utils.embedding_functions</span> <span style="color: #833aa0;">import</span>  <span style="color: #6b97e8;">OpenCLIPEmbeddingFunction</span></p>
<p></p>
<p><span style="color: #6b97e8;">embedding_function</span> <span>=</span> <span style="color: #6b97e8;">OpenCLIPEmbeddingFunction</span><span style="color: #e3e11d;">()</span></p>
<p><span style="color: #6b97e8;">image</span> <span>=</span> <span style="color: #7e7a34;">&quot;../images/chromadb_dalle3.webp&quot;</span></p>
<p><span style="color: #6b97e8;">embedding</span> <span>=</span> <span style="color: #6b97e8;">embedding_function</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">image</span><span style="color: #e3e11d;">)</span></p>
<p><span style="color: #dfd84a;">len</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">embedding</span><span style="color: #e3e11d;">),</span> <span style="color: #dfd84a;">len</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">embedding</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a38;">0</span><span style="color: #e3e11d;">])</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>(30, 512)</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Como vemos crea un embeddings de tamaño 30x512</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Chroma también trae un cargador de imágenes</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #833aa0;">from</span> <span style="color: #4fcd7d;">chromadb.utils.data_loaders</span> <span style="color: #833aa0;">import</span> <span style="color: #6b97e8;">ImageLoader</span></p>
<p><span style="color: #6b97e8;">data_loader</span> <span>=</span> <span style="color: #6b97e8;">ImageLoader</span><span style="color: #e3e11d;">()</span></p>
<p><span style="color: #6b97e8;">data</span> <span>=</span> <span style="color: #6b97e8;">data_loader</span><span>.</span><span style="color: #6b97e8;">_load_image</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">image</span><span style="color: #e3e11d;">)</span></p>
<p><span style="color: #dfd84a;">type</span><span style="color: #e3e11d;">(</span><span style="color: #6b97e8;">data</span><span style="color: #e3e11d;">),</span> <span style="color: #6b97e8;">data</span><span>.</span><span style="color: #6b97e8;">shape</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>(numpy.ndarray, (1024, 1024, 3))</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Así que podemos crear una colección multimodal con esta función de embedding y el cargador de imágenes</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span> <span>=</span> <span style="color: #6b97e8;">chroma_client</span><span>.</span><span style="color: #6b97e8;">create_collection</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">name</span><span>=</span><span style="color: #7e7a34;">&quot;multimodal_collection&quot;</span><span style="color: #e3e11d;">,</span></p>
<p>    <span style="color: #6b97e8;">embedding_function</span><span>=</span><span style="color: #6b97e8;">embedding_function</span><span style="color: #e3e11d;">,</span></p>
<p>    <span style="color: #6b97e8;">data_loader</span><span>=</span><span style="color: #6b97e8;">data_loader</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Y podemos añadirle los embeddings de las imágenes</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">add</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">ids</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #8d783e;">&#39;id1&#39;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">images</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #6b97e8;">image</span><span style="color: #e3e11d;">]</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Vamos a ver qué ha guardado</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">peek</span><span style="color: #e3e11d;">()</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': ['id1'],</p><p> 'embeddings': [[-0.014372998848557472,</p><p>   0.0063015008345246315,</p><p>   -0.03794914484024048,</p><p>   -0.028725482523441315,</p><p>   -0.014304812066257,</p><p>   -0.04323698952794075,</p><p>   0.008670451119542122,</p><p>   -0.016066772863268852,</p><p>   -0.02365742437541485,</p><p>   0.07881983369588852,</p><p>   0.022775636985898018,</p><p>   0.004407387692481279,</p><p>   0.058205753564834595,</p><p>   -0.02389293536543846,</p><p>   -0.027586588636040688,</p><p>   0.05778728798031807,</p><p>   -0.2631031572818756,</p><p>   0.044124454259872437,</p><p>   0.010588622651994228,</p><p>   -0.035578884184360504,</p><p>   -0.041719693690538406,</p><p>   -0.0033654430881142616,</p><p>   -0.04731074720621109,</p><p>   -0.0019943572115153074,</p><p>   ...</p><p>   0.04397008568048477,</p><p>   0.04396628588438034]],</p><p> 'metadatas': [None],</p><p> 'documents': [None],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Chroma no almacena las imágenes, solo los embeddings, por lo que para no perder la relación entre los embeddings y las imágenes, podemos guardar la ruta de las imágenes en la metadata. Vamos a usar el método <code><b>update</b></code> para añadir la ruta de la imagen</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">update</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">ids</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #8d783e;">&#39;id1&#39;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">images</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #6b97e8;">image</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">metadatas</span><span>=</span><span style="color: #e3e11d;">[{</span><span style="color: #7e7a34;">&quot;source&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #6b97e8;">image</span><span style="color: #e3e11d;">}]</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Si volvemos a ver qué tiene guardado la colección</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">peek</span><span style="color: #e3e11d;">()</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': ['id1'],</p><p> 'embeddings': [[-0.014372998848557472,</p><p>   0.0063015008345246315,</p><p>   -0.03794914484024048,</p><p>   -0.028725482523441315,</p><p>   -0.014304812066257,</p><p>   -0.04323698952794075,</p><p>   0.008670451119542122,</p><p>   -0.016066772863268852,</p><p>   -0.02365742437541485,</p><p>   0.07881983369588852,</p><p>   0.022775636985898018,</p><p>   0.004407387692481279,</p><p>   0.058205753564834595,</p><p>   -0.02389293536543846,</p><p>   -0.027586588636040688,</p><p>   0.05778728798031807,</p><p>   -0.2631031572818756,</p><p>   0.044124454259872437,</p><p>   0.010588622651994228,</p><p>   -0.035578884184360504,</p><p>   -0.041719693690538406,</p><p>   -0.0033654430881142616,</p><p>   -0.04731074720621109,</p><p>   -0.0019943572115153074,</p><p>   ...</p><p>   0.04397008568048477,</p><p>   0.04396628588438034]],</p><p> 'metadatas': [{'source': '../images/chromadb_dalle3.webp'}],</p><p> 'documents': [None],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Como la colección es multimodal, podemos añadirle documentos igual que antes</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">add</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">ids</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #8d783e;">&#39;id2&#39;</span><span style="color: #e3e11d;">,</span> <span style="color: #8d783e;">&#39;id3&#39;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">documents</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;This is a python docs&quot;</span><span style="color: #e3e11d;">,</span> <span style="color: #7e7a34;">&quot;This is JavaScript docs&quot;</span><span style="color: #e3e11d;">],</span></p>
<p>    <span style="color: #6b97e8;">metadatas</span><span>=</span><span style="color: #e3e11d;">[{</span><span style="color: #7e7a34;">&quot;source&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;Python source&quot;</span><span style="color: #e3e11d;">},</span> <span style="color: #e3e11d;">{</span><span style="color: #7e7a34;">&quot;source&quot;</span><span style="color: #e3e11d;">:</span> <span style="color: #7e7a34;">&quot;JavaScript source&quot;</span><span style="color: #e3e11d;">}]</span></p>
<p><span style="color: #e3e11d;">)</span></p>
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">peek</span><span style="color: #e3e11d;">()</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': ['id1', 'id2', 'id3'],</p><p> 'embeddings': [[-0.014372998848557472,</p><p>   0.0063015008345246315,</p><p>   -0.03794914484024048,</p><p>   -0.028725482523441315,</p><p>   -0.014304812066257,</p><p>   -0.04323698952794075,</p><p>   0.008670451119542122,</p><p>   -0.016066772863268852,</p><p>   -0.02365742437541485,</p><p>   0.07881983369588852,</p><p>   0.022775636985898018,</p><p>   0.004407387692481279,</p><p>   0.058205753564834595,</p><p>   -0.02389293536543846,</p><p>   -0.027586588636040688,</p><p>   0.05778728798031807,</p><p>   -0.2631031572818756,</p><p>   0.044124454259872437,</p><p>   0.010588622651994228,</p><p>   -0.035578884184360504,</p><p>   -0.041719693690538406,</p><p>   -0.0033654430881142616,</p><p>   -0.04731074720621109,</p><p>   -0.0019943572115153074,</p><p>   ...</p><p>   -0.061795610934495926,</p><p>   -0.02433035336434841]],</p><p> 'metadatas': [{'source': '../images/chromadb_dalle3.webp'},</p><p>  {'source': 'Python source'},</p><p>  {'source': 'JavaScript source'}],</p><p> 'documents': [None, 'This is a python docs', 'This is JavaScript docs'],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Por último, podemos hacer consulatas con texto</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">query</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">query_texts</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #7e7a34;">&quot;persona trabajando en una mesa&quot;</span><span style="color: #e3e11d;">],</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': [['id2', 'id1', 'id3']],</p><p> 'distances': [[1.1276676654815674, 1.1777206659317017, 1.2047353982925415]],</p><p> 'metadatas': [[{'source': 'Python source'},</p><p>   {'source': '../images/chromadb_dalle3.webp'},</p><p>   {'source': 'JavaScript source'}]],</p><p> 'embeddings': None,</p><p> 'documents': [['This is a python docs', None, 'This is JavaScript docs']],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Con texto no nos ha dado la imagen como primer resultado, siuno la documentación de python</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Pero también podemos hacerlas con imágenes, en este caso la voy a hacer con esta imagen</p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;"><p align="center"><img src="http://maximofn.com/wp-content/uploads/2024/02/chromadb_elegant.png" alt="chroma logo"></p></p>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing code_cell rendered">
			<div class="input">
				<div class="prompt input_prompt" style="margin-left: 20px;">Code:</div>
				<div class="inner_cell">
					<div class="input_area">
						<div class=" highlight hl-python3">
							<pre class="python" style="margin-left: 40px; line-height: 0%;font-family:monospace;">
<p><span style="color: #6b97e8;">query_image</span> <span>=</span> <span style="color: #7e7a34;">&quot;http://maximofn.com/wp-content/uploads/2024/02/chromadb_elegant.png&quot;</span></p>
<p><span style="color: #6b97e8;">collection</span><span>.</span><span style="color: #6b97e8;">query</span><span style="color: #e3e11d;">(</span></p>
<p>    <span style="color: #6b97e8;">query_images</span><span>=</span><span style="color: #e3e11d;">[</span><span style="color: #6b97e8;">query_image</span><span style="color: #e3e11d;">],</span></p>
<p><span style="color: #e3e11d;">)</span></p>
							</pre>
						</div>
					</div>
				</div>
			</div>
			<div class="output_wrapper">
				<div class="output">
					<div class="output_area">
						<div class="prompt" style="margin-left: 20px;">Output:</div>
						<div class="output_subarea output_stream output_stdout output_text">
							<pre style="margin-left: 60px; line-height: 0%;"><p>{'ids': [['id1', 'id2', 'id3']],</p><p> 'distances': [[0.6684874296188354, 0.9450105428695679, 1.0639115571975708]],</p><p> 'metadatas': [[{'source': '../images/chromadb_dalle3.webp'},</p><p>   {'source': 'Python source'},</p><p>   {'source': 'JavaScript source'}]],</p><p> 'embeddings': None,</p><p> 'documents': [[None, 'This is a python docs', 'This is JavaScript docs']],</p><p> 'uris': None,</p><p> 'data': None}</p></pre>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="cell border-box-sizing text_cell rendered">
			<div class="prompt input_prompt">
				<div class="inner_cell">
					<div class="text_cell_render border-box-sizing rendered_html">
						<p style="margin-left: 0px;">Ahora sí da como primer resultado la imgen que habíamos guardado</p>
					</div>
				</div>
			</div>
		</div>
	</div>
<!-- Close class contenido -->
</div>
<!-- Close div notebook container -->
</div>
<!-- Close div notebook -->
</div>

