<section class="section-block-markdown-cell">
<h1 id="unittest Python">unittest Python<a class="anchor-link" href="#unittest Python">¶</a></h1>
</section>
<section class="section-block-markdown-cell">
<p>Para realizar este post vamos a crear una carpeta llamada <code>testing_python</code> donde vamos a crear todo el código</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">mkdir</span> <span class="n">testing_python</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Dentro de esa carpeta vamos a crear las carpetas <code>src</code> y <code>tests</code> donde vamos a poner el código fuente y los tests respectivamente</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">mkdir</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span>
<span class="err">!</span><span class="n">mkdir</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<h2 id="Librerias necesarias">Librerías necesarias<a class="anchor-link" href="#Librerias necesarias">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<p>Para hacer los tests vamos a usar la librería <code>unittest</code> que viene por defecto en Python, pero además vamos a instalar <code>coverage</code> para poder ver la cobertura de los tests. La instalamos con Conda</p>
<div class='highlight'><pre><code class="language-bash">conda install conda-forge::coverage
</code></pre></div>
<p>O con pip</p>
<div class='highlight'><pre><code class="language-bash">pip install coverage
</code></pre></div>
</section>
<section class="section-block-markdown-cell">
<h2 id="Primeros tests">Primeros tests<a class="anchor-link" href="#Primeros tests">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<p>Vamos a crear un primer archivo llamado <code>calculator.py</code> en la carpeta <code>src</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;def sum(a, b):&quot;</span>           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    return a + b&quot;</span>        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;def substract(a, b):&quot;</span>    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    return a - b&quot;</span>        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;def multiply(a, b):&quot;</span>     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    return a * b&quot;</span>        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;def divide(a, b):&quot;</span>       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    return a / b&quot;</span>        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">calculator</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Ahora creamos un archivo llamado <code>test_calculator.py</code> en la carpeta <code>tests</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span>  <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from src.calculator import sum, substract, multiply, divide&quot;</span>     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class TestCalculator(unittest.TestCase):&quot;</span>                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_sum(self):&quot;</span>                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(sum(2, 2), 4)&quot;</span>                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_substract(self):&quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(substract(2, 1), 1)&quot;</span>                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_multiply(self):&quot;</span>                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(multiply(2, 3), 6)&quot;</span>                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_divide(self):&quot;</span>                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(divide(6, 3), 2)&quot;</span>                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Ahora para ejecutarlo hacemos <code>python -m unittest tests/test_calculator.py discover -s tests</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>....
----------------------------------------------------------------------
Ran 4 tests in 0.000s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Como vemos, aparecen cuatro puntos por los dos tests que se han pasado y que han sido correctos</p>
</section>
<section class="section-block-markdown-cell">
<p>Vamos a modificar el archivo de test para provocar un error, vamos a hacer que al sumar 2 y 2 nos dé 5</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span>  <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from src.calculator import sum, substract, multiply, divide&quot;</span>     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class TestCalculator(unittest.TestCase):&quot;</span>                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_sum(self):&quot;</span>                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(sum(2, 2), 5)&quot;</span>                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_substract(self):&quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(substract(2, 1), 1)&quot;</span>                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_multiply(self):&quot;</span>                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(multiply(2, 3), 6)&quot;</span>                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_divide(self):&quot;</span>                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(divide(6, 3), 2)&quot;</span>                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Ahora corremos los test</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>...F
======================================================================
FAIL: test_sum (tests.test_calculator.TestCalculator)
----------------------------------------------------------------------
Traceback (most recent call last):
&#x20;&#x20;File &quot;/home/wallabot/Documentos/web/portafolio/posts/testing_python/tests/test_calculator.py&quot;, line 6, in test_sum
&#x20;&#x20;&#x20;&#x20;self.assertEqual(sum(2, 2), 5)
AssertionError: 4 != 5

----------------------------------------------------------------------
Ran 4 tests in 0.000s

FAILED (failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Como vemos, ahora nos sale una <code>F</code> que significa que ha fallado un test, además, nos da la siguiente información</p>
<section class="section-block-markdown-cell">
      <div class='highlight'><pre><code class="language-text">FAIL: test_sum (tests.test_calculator.TestCalculator)<br>----------------------------------------------------------------------<br>Traceback (most recent call last):<br>&#x20;File "/home/wallabot/Documentos/web/portafolio/posts/testing_python/tests/test_calculator.py", line 6, in test_sum<br>&#x20;&#x20;self.assertEqual(sum(2, 2), 5)<br>AssertionError: 4 != 5</code></pre></div>
      </section>
<p>Nos está diciendo que ha fallado el test <code>test_sum</code> en la línea 6, que es la que hemos modificado, y que el resultado esperado era 5 y el obtenido 4</p>
</section>
<section class="section-block-markdown-cell">
<p>Una cosa que no hemos dicho y que es importante, es que no hemos llamado a los métodos <code>test_sum</code> y <code>test_subtract</code> directamente, se han ejecutado automáticamente. Esto es debido a que los métodos que empiezan por <code>test_</code> son los que se ejecutan automáticamente</p>
</section>
<section class="section-block-markdown-cell">
<p>Una forma más sencilla de ejecutar los tests es usar el comando <code>discover</code> que busca todos los archivos que empiezan por <code>test_</code> en la carpeta que le pasemos por el parámetro <code>-s</code></p>
</section>
<section class="section-block-markdown-cell">
<p>Primero volvemos a escribir bien los test</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span>  <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from src.calculator import sum, substract, multiply, divide&quot;</span>     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class TestCalculator(unittest.TestCase):&quot;</span>                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_sum(self):&quot;</span>                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(sum(2, 2), 4)&quot;</span>                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_substract(self):&quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(substract(2, 1), 1)&quot;</span>                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_multiply(self):&quot;</span>                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(multiply(2, 3), 6)&quot;</span>                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_divide(self):&quot;</span>                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(divide(6, 3), 2)&quot;</span>                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Y ahora pasamos los tests mediante <code>discover</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span> <span class="o">-</span><span class="n">s</span> <span class="n">tests</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>....
----------------------------------------------------------------------
Ran 4 tests in 0.000s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Ha encontrado los test y los ha pasado correctamente</p>
</section>
<section class="section-block-markdown-cell">
<h2 id="Configuracion de los tests">Configuración de los tests<a class="anchor-link" href="#Configuracion de los tests">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<h3><code>setUp</code></h3>
</section>
<section class="section-block-markdown-cell">
<p>Con la librería <code>unittest</code> podemos configurar los tests, pero para verlo, primero vamos a crear un nuevo archivo de código llamado <code>bank_account.py</code> en la carpeta <code>src</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class BankAccount:&quot;</span>                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def __init__(self, balance=0):&quot;</span>          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.balance = balance&quot;</span>              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def deposit(self, amount):&quot;</span>              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        if amount &amp;gt; 0:&quot;</span>                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            self.balance += amount&quot;</span>          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        return self.balance&quot;</span>                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def withdraw(self, amount):&quot;</span>             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        if amount &amp;gt; 0:&quot;</span>                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            self.balance -= amount&quot;</span>          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        return self.balance&quot;</span>                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def get_balance(self):&quot;</span>                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        return self.balance&quot;</span>                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Ahora añadimos tests al nuevo código, creando un archivo llamado <code>test_bank_account.py</code> en la carpeta <code>tests</code></p>
</section>
<section class="section-block-markdown-cell">
<p>Vamos a crear primero la prueba de añadir depósito, es decir, el método <code>deposit</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from src.bank_account import BankAccount&quot;</span>    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class TestBankAccount(unittest.TestCase):&quot;</span>   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_deposit(self):&quot;</span>                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        account = BankAccount()&quot;</span>             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = account.deposit(1500)&quot;</span>  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 1500)&quot;</span>  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Pasamos los tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span> <span class="o">-</span><span class="n">s</span> <span class="n">tests</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>.....
----------------------------------------------------------------------
Ran 5 tests in 0.000s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Vemos que hay cinco puntos, pero nosotros solo hemos escrito un test, así que usamos el flag <code>-v</code> para ver más información</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span> <span class="o">-</span><span class="n">s</span> <span class="n">tests</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

----------------------------------------------------------------------
Ran 5 tests in 0.000s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Vemos que <code>discover</code> ha encontrado los tests <code>test_calculator</code> y <code>test_bank_account</code> y ha pasado los dos</p>
</section>
<section class="section-block-markdown-cell">
<p>Vamos a crear los tests para el resto de métodos</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from src.bank_account import BankAccount&quot;</span>    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class TestBankAccount(unittest.TestCase):&quot;</span>   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_deposit(self):&quot;</span>                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        account = BankAccount(balance=1000)&quot;</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = account.deposit(500)&quot;</span>   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 1500)&quot;</span>  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_withdraw(self):&quot;</span>                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        account = BankAccount(balance=1000)&quot;</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = account.withdraw(200)&quot;</span>  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 800)&quot;</span>   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_get_balance(self):&quot;</span>             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        account = BankAccount(balance=1000)&quot;</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        balance = account.get_balance()&quot;</span>     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(balance, 1000)&quot;</span>     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Pasamos los tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span> <span class="o">-</span><span class="n">s</span> <span class="n">tests</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

----------------------------------------------------------------------
Ran 7 tests in 0.000s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Vemos que han pasado satisfactoriamente. Ahora veamos una cosa, en todos los tests hemos hecho <code>account = BankAccount(balance=1000)</code> y luego hemos llamado a los métodos, esto es porque cada test se ejecuta en un nuevo objeto, es decir, no se comparten los objetos entre tests.</p>
<p>De modo que podemos usar el método <code>setUp</code> para crear un objeto que se comparta entre todos los test</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from src.bank_account import BankAccount&quot;</span>            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class TestBankAccount(unittest.TestCase):&quot;</span>           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def setUp(self):&quot;</span>                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account = BankAccount(balance=1000)&quot;</span>    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_deposit(self):&quot;</span>                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.deposit(500)&quot;</span>      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 1500)&quot;</span>          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_withdraw(self):&quot;</span>                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.withdraw(200)&quot;</span>     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 800)&quot;</span>           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_get_balance(self):&quot;</span>                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        balance = self.account.get_balance()&quot;</span>        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(balance, 1000)&quot;</span>             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Como vemos, hemos creado la cuenta en el método <code>setUp</code> y hemos eliminado la creación de la cuenta en los tests. Vamos a pasar los test</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span> <span class="o">-</span><span class="n">s</span> <span class="n">tests</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

----------------------------------------------------------------------
Ran 7 tests in 0.000s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h3><code>tearDown</code></h3>
</section>
<section class="section-block-markdown-cell">
<p>Igual que con el método <code>setUp</code> configuramos el entorno antes de ejecutar los tests, con el método <code>tearDown</code> podemos limpiar el entorno después de ejecutar los tests. Para probarlo vamos a añadir al código de <code>bank_account.py</code> que las operaciones se escriban en un archivo de log</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class BankAccount:&quot;</span>                                                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def __init__(self, balance=0, log_file=None):&quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.balance = balance&quot;</span>                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.log_file = log_file&quot;</span>                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self._log_transaction(&#39;Account created&#39;)&quot;</span>                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def _log_transaction(self, message):&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        if self.log_file:&quot;</span>                                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            with open(self.log_file, &#39;a&#39;) as file:&quot;</span>                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;                file.write(f&#39;</span><span class="si">{message}</span><span class="se">\\\\</span><span class="s2">n&#39;)&quot;</span>                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def deposit(self, amount):&quot;</span>                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        if amount &amp;gt; 0:&quot;</span>                                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            self.balance += amount&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            self._log_transaction(f&#39;Deposit </span><span class="si">{amount}</span><span class="s2">, new balance </span><span class="si">{self.balance}</span><span class="s2">&#39;)&quot;</span>  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        return self.balance&quot;</span>                                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def withdraw(self, amount):&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        if amount &amp;gt; 0:&quot;</span>                                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            self.balance -= amount&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            self._log_transaction(f&#39;Withdraw </span><span class="si">{amount}</span><span class="s2">, new balance </span><span class="si">{self.balance}</span><span class="s2">&#39;)&quot;</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        return self.balance&quot;</span>                                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def get_balance(self):&quot;</span>                                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self._log_transaction(f&#39;Balance check, balance </span><span class="si">{self.balance}</span><span class="s2">&#39;)&quot;</span>             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        return self.balance&quot;</span>                                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Ahora añadimos un test al nuevo método <code>_log_transaction</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import os&quot;</span>                                                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from src.bank_account import BankAccount&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class TestBankAccount(unittest.TestCase):&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def setUp(self):&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account = BankAccount(balance=1000, log_file=&#39;test_log.txt&#39;)&quot;</span>           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_deposit(self):&quot;</span>                                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.deposit(500)&quot;</span>                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 1500)&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_withdraw(self):&quot;</span>                                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.withdraw(200)&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 800)&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_get_balance(self):&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        balance = self.account.get_balance()&quot;</span>                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(balance, 1000)&quot;</span>                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_transaction_log(self):&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.deposit(500)&quot;</span>                                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.withdraw(200)&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.get_balance()&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        assert os.path.exists(&#39;test_log.txt&#39;)&quot;</span>                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        with open(&#39;test_log.txt&#39;, &#39;r&#39;) as file:&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            content = file.readlines()&quot;</span>                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(content, [&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Account created</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Deposit 500, new balance 1500</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Account created</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Balance check, balance 1000</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Account created</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Deposit 500, new balance 1500</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Withdraw 200, new balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Balance check, balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;])&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Pasamos los tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span> <span class="o">-</span><span class="n">s</span> <span class="n">tests</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_transaction_log (test_bank_account.TestBankAccount) ... FAIL
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

======================================================================
FAIL: test_transaction_log (test_bank_account.TestBankAccount)
----------------------------------------------------------------------
Traceback (most recent call last):
&#x20;&#x20;File &quot;/home/wallabot/Documentos/web/portafolio/posts/testing_python/tests/test_bank_account.py&quot;, line 28, in test_transaction_log
&#x20;&#x20;&#x20;&#x20;self.assertEqual(content, [
AssertionError: Lists differ: [&#x27;Acc[224 chars]00\n&#x27;, &#x27;Account created\n&#x27;, &#x27;Withdraw 200, new[246 chars]0\n&#x27;] != [&#x27;Acc[224 chars]00\n&#x27;]

First list contains 10 additional elements.
First extra element 8:
&#x27;Account created\n&#x27;

&#x20;&#x20;[&#x27;Account created\n&#x27;,
&#x20;&#x20;&#x20;&#x27;Deposit 500, new balance 1500\n&#x27;,
&#x20;&#x20;&#x20;&#x27;Account created\n&#x27;,
&#x20;&#x20;&#x20;&#x27;Balance check, balance 1000\n&#x27;,
&#x20;&#x20;&#x20;&#x27;Account created\n&#x27;,
&#x20;&#x20;&#x20;&#x27;Deposit 500, new balance 1500\n&#x27;,
&#x20;&#x20;&#x20;&#x27;Withdraw 200, new balance 1300\n&#x27;,
-  &#x27;Balance check, balance 1300\n&#x27;,
-  &#x27;Account created\n&#x27;,
-  &#x27;Withdraw 200, new balance 800\n&#x27;,
-  &#x27;Account created\n&#x27;,
-  &#x27;Deposit 500, new balance 1500\n&#x27;,
-  &#x27;Account created\n&#x27;,
-  &#x27;Balance check, balance 1000\n&#x27;,
-  &#x27;Account created\n&#x27;,
-  &#x27;Deposit 500, new balance 1500\n&#x27;,
-  &#x27;Withdraw 200, new balance 1300\n&#x27;,
&#x20;&#x20;&#x20;&#x27;Balance check, balance 1300\n&#x27;]

----------------------------------------------------------------------
Ran 8 tests in 0.001s

FAILED (failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Los test han salido bien, pero vemos que en el archivo de log hay muchas líneas con el texto <code>Account created</code>, esto es porque al principio de cada test se ejecuta el método <code>setUp</code> que crea una cuenta, por lo que tenemos que crear el método <code>tearDown</code> para eliminar el archivo de log después de cada test</p>
</section>
<section class="section-block-markdown-cell">
<p>Como es un archivo generado para el test, no debería existir después de ejecutar los tests, así que vamos a añadir el método <code>tearDown</code> para borrar el archivo</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import os&quot;</span>                                                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from src.bank_account import BankAccount&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class TestBankAccount(unittest.TestCase):&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def setUp(self):&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account = BankAccount(balance=1000, log_file=&#39;test_log.txt&#39;)&quot;</span>           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def tearDown(self):&quot;</span>                                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        if os.path.exists(&#39;test_log.txt&#39;):&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            os.remove(&#39;test_log.txt&#39;)&quot;</span>                                               <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_deposit(self):&quot;</span>                                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.deposit(500)&quot;</span>                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 1500)&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_withdraw(self):&quot;</span>                                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.withdraw(200)&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 800)&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_get_balance(self):&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        balance = self.account.get_balance()&quot;</span>                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(balance, 1000)&quot;</span>                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_transaction_log(self):&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.deposit(500)&quot;</span>                                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.withdraw(200)&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.get_balance()&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        assert os.path.exists(&#39;test_log.txt&#39;)&quot;</span>                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        with open(&#39;test_log.txt&#39;, &#39;r&#39;) as file:&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            content = file.readlines()&quot;</span>                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(content, [&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Account created</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Deposit 500, new balance 1500</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Account created</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Balance check, balance 1000</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Account created</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Deposit 500, new balance 1500</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Withdraw 200, new balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Balance check, balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;&quot;</span>                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            ])&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Volvemos a pasar los tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span> <span class="o">-</span><span class="n">s</span> <span class="n">tests</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_transaction_log (test_bank_account.TestBankAccount) ... FAIL
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

======================================================================
FAIL: test_transaction_log (test_bank_account.TestBankAccount)
----------------------------------------------------------------------
Traceback (most recent call last):
&#x20;&#x20;File &quot;/home/wallabot/Documentos/web/portafolio/posts/testing_python/tests/test_bank_account.py&quot;, line 32, in test_transaction_log
&#x20;&#x20;&#x20;&#x20;self.assertEqual(content, [
AssertionError: Lists differ: [&#x27;Acc[48 chars]n&#x27;, &#x27;Withdraw 200, new balance 1300\n&#x27;, &#x27;Balan[21 chars]0\n&#x27;] != [&#x27;Acc[48 chars]n&#x27;, &#x27;Account created\n&#x27;, &#x27;Balance check, balan[131 chars]0\n&#x27;]

First differing element 2:
&#x27;Withdraw 200, new balance 1300\n&#x27;
&#x27;Account created\n&#x27;

Second list contains 4 additional elements.
First extra element 4:
&#x27;Account created\n&#x27;

&#x20;&#x20;[&#x27;Account created\n&#x27;,
+  &#x27;Deposit 500, new balance 1500\n&#x27;,
+  &#x27;Account created\n&#x27;,
+  &#x27;Balance check, balance 1000\n&#x27;,
+  &#x27;Account created\n&#x27;,
&#x20;&#x20;&#x20;&#x27;Deposit 500, new balance 1500\n&#x27;,
&#x20;&#x20;&#x20;&#x27;Withdraw 200, new balance 1300\n&#x27;,
&#x20;&#x20;&#x20;&#x27;Balance check, balance 1300\n&#x27;]

----------------------------------------------------------------------
Ran 8 tests in 0.001s

FAILED (failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Pero ahora nos da error, porque como al final de cada prueba hemos eliminado el archivo de log, ya no hay que comprobar que se haya escrito tanto texto, sino solo el del test que estamos haciendo. Así que vamos a modificar el test para que solo compruebe que se ha escrito el texto del test</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import os&quot;</span>                                                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from src.bank_account import BankAccount&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class TestBankAccount(unittest.TestCase):&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def setUp(self):&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account = BankAccount(balance=1000, log_file=&#39;test_log.txt&#39;)&quot;</span>           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def tearDown(self):&quot;</span>                                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        if os.path.exists(&#39;test_log.txt&#39;):&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            os.remove(&#39;test_log.txt&#39;)&quot;</span>                                               <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_deposit(self):&quot;</span>                                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.deposit(500)&quot;</span>                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 1500)&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_withdraw(self):&quot;</span>                                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.withdraw(200)&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 800)&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_get_balance(self):&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        balance = self.account.get_balance()&quot;</span>                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(balance, 1000)&quot;</span>                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_transaction_log(self):&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.deposit(500)&quot;</span>                                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.withdraw(200)&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.get_balance()&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        assert os.path.exists(&#39;test_log.txt&#39;)&quot;</span>                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        with open(&#39;test_log.txt&#39;, &#39;r&#39;) as file:&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            content = file.readlines()&quot;</span>                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(content, [&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Account created</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Deposit 500, new balance 1500</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Withdraw 200, new balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Balance check, balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;&quot;</span>                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            ])&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Y pasamos los test</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span> <span class="o">-</span><span class="n">s</span> <span class="n">tests</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_transaction_log (test_bank_account.TestBankAccount) ... ok
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

----------------------------------------------------------------------
Ran 8 tests in 0.001s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h3 id="Documentacion de errores">Documentación de errores<a class="anchor-link" href="#Documentacion de errores">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>Si te has fijado, hasta ahora en los tests usábamos <code>assertEqual</code>. Este método nos da la opción de escribir un mensaje de error cuando no se cumple la condición. Vamos a modificar un test para que falle y ver el mensaje de error</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import os&quot;</span>                                                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from src.bank_account import BankAccount&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class TestBankAccount(unittest.TestCase):&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def setUp(self):&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account = BankAccount(balance=1000, log_file=&#39;test_log.txt&#39;)&quot;</span>           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def tearDown(self):&quot;</span>                                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        if os.path.exists(&#39;test_log.txt&#39;):&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            os.remove(&#39;test_log.txt&#39;)&quot;</span>                                               <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_deposit(self):&quot;</span>                                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.deposit(500)&quot;</span>                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 1500)&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_withdraw(self):&quot;</span>                                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.withdraw(200)&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 500, &#39;Balance is not correct&#39;)&quot;</span>                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_get_balance(self):&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        balance = self.account.get_balance()&quot;</span>                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(balance, 1000)&quot;</span>                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_transaction_log(self):&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.deposit(500)&quot;</span>                                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.withdraw(200)&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.get_balance()&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        assert os.path.exists(&#39;test_log.txt&#39;)&quot;</span>                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        with open(&#39;test_log.txt&#39;, &#39;r&#39;) as file:&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            content = file.readlines()&quot;</span>                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(content, [&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Account created</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Deposit 500, new balance 1500</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Withdraw 200, new balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Balance check, balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;&quot;</span>                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            ])&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Pasamos los tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span> <span class="o">-</span><span class="n">s</span> <span class="n">tests</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_transaction_log (test_bank_account.TestBankAccount) ... ok
test_withdraw (test_bank_account.TestBankAccount) ... FAIL
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

======================================================================
FAIL: test_withdraw (test_bank_account.TestBankAccount)
----------------------------------------------------------------------
Traceback (most recent call last):
&#x20;&#x20;File &quot;/home/wallabot/Documentos/web/portafolio/posts/testing_python/tests/test_bank_account.py&quot;, line 19, in test_withdraw
&#x20;&#x20;&#x20;&#x20;self.assertEqual(new_balace, 500, &#x27;Balance is not correct&#x27;)
AssertionError: 800 != 500 : Balance is not correct

----------------------------------------------------------------------
Ran 8 tests in 0.001s

FAILED (failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Como podemos ver, tenemos el mensaje que hemos escrito en el test <code>AssertionError: 800 != 500 : Balance is not correct</code></p>
</section>
<section class="section-block-markdown-cell">
<h3><code>assert</code>s</h3>
</section>
<section class="section-block-markdown-cell">
<p>Hasta ahora hemos usado los <code>assertEqual</code>, pero hay más, como por ejemplo el <code>assertTrue</code>. Vamos a modificar la línea <code>assert os.path.exists(&#x27;test_log.txt&#x27;)</code> por <code>self.assertTrue(os.path.exists(&#x27;test_log.txt&#x27;))</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import os&quot;</span>                                                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from src.bank_account import BankAccount&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class TestBankAccount(unittest.TestCase):&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def setUp(self):&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account = BankAccount(balance=1000, log_file=&#39;test_log.txt&#39;)&quot;</span>           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def tearDown(self):&quot;</span>                                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        if os.path.exists(&#39;test_log.txt&#39;):&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            os.remove(&#39;test_log.txt&#39;)&quot;</span>                                               <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_deposit(self):&quot;</span>                                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.deposit(500)&quot;</span>                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 1500)&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_withdraw(self):&quot;</span>                                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.withdraw(200)&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 800, &#39;Balance is not correct&#39;)&quot;</span>                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_get_balance(self):&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        balance = self.account.get_balance()&quot;</span>                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(balance, 1000)&quot;</span>                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_transaction_log(self):&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.deposit(500)&quot;</span>                                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.withdraw(200)&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.get_balance()&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertTrue(os.path.exists(&#39;test_log.txt&#39;))&quot;</span>                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        with open(&#39;test_log.txt&#39;, &#39;r&#39;) as file:&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            content = file.readlines()&quot;</span>                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(content, [&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Account created</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Deposit 500, new balance 1500</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Withdraw 200, new balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Balance check, balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;&quot;</span>                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            ])&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Y pasamos los test</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span> <span class="o">-</span><span class="n">s</span> <span class="n">tests</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_transaction_log (test_bank_account.TestBankAccount) ... ok
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

----------------------------------------------------------------------
Ran 8 tests in 0.001s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Algunos otros <code>assert</code>s que podemos usar son:</p>
<ul>
  <li><code>assertEqual</code></li>
  <li><code>assertNotEqual</code></li>
  <li><code>assertTrue</code></li>
  <li><code>assertFalse</code></li>
  <li><code>assertRaises</code></li>
</ul>
</section>
<section class="section-block-markdown-cell">
<h3><code>skip</code></h3>
</section>
<section class="section-block-markdown-cell">
<p>Al igual que en Python podemos usar <code>pass</code> para no hacer nada, en los tests podemos usar <code>skip</code> para saltar un test. Esto puede ser útil cuando sabemos que queremos pasar unas pruebas, pero aún no está el código para pasarlas.</p>
</section>
<section class="section-block-markdown-cell">
<p>Voy a añadir un test que compruebe si el usuario tiene un préstamo, pero como aún no hay código referente a los préstamos, voy a saltar el test</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import os&quot;</span>                                                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from src.bank_account import BankAccount&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class TestBankAccount(unittest.TestCase):&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def setUp(self):&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account = BankAccount(balance=1000, log_file=&#39;test_log.txt&#39;)&quot;</span>           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def tearDown(self):&quot;</span>                                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        if os.path.exists(&#39;test_log.txt&#39;):&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            os.remove(&#39;test_log.txt&#39;)&quot;</span>                                               <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_deposit(self):&quot;</span>                                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.deposit(500)&quot;</span>                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 1500)&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_withdraw(self):&quot;</span>                                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.withdraw(200)&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 800, &#39;Balance is not correct&#39;)&quot;</span>                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_get_balance(self):&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        balance = self.account.get_balance()&quot;</span>                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(balance, 1000)&quot;</span>                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_transaction_log(self):&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.deposit(500)&quot;</span>                                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.withdraw(200)&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.get_balance()&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertTrue(os.path.exists(&#39;test_log.txt&#39;))&quot;</span>                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        with open(&#39;test_log.txt&#39;, &#39;r&#39;) as file:&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            content = file.readlines()&quot;</span>                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(content, [&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Account created</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Deposit 500, new balance 1500</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Withdraw 200, new balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Balance check, balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;&quot;</span>                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            ])&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @unittest.skip(&#39;Not implemented yet&#39;)&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_has_loan(self):&quot;</span>                                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertFalse(self.account.has_loan())&quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Vamos a ver qué pasa al ejecutarlo</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span> <span class="o">-</span><span class="n">s</span> <span class="n">tests</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_has_loan (test_bank_account.TestBankAccount) ... skipped &#x27;Not implemented yet&#x27;
test_transaction_log (test_bank_account.TestBankAccount) ... ok
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

----------------------------------------------------------------------
Ran 9 tests in 0.001s

OK (skipped=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Podemos ver <code>test_has_loan (test_bank_account.TestBankAccount) ... skipped &#x27;Not implemented yet&#x27;</code> se ha saltado ese test como queríamos</p>
</section>
<section class="section-block-markdown-cell">
<h3><code>skipIf</code></h3>
</section>
<section class="section-block-markdown-cell">
<p>Otra opción es usar <code>skipIf</code> para saltar un test si se cumple una condición. Voy a añadir una variable al principio llamada <code>server</code> para saber si estamos en un entorno local o en el servidor, y el test comprobará esa variable, de modo que si estamos en el servidor, se saltará el test</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import os&quot;</span>                                                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from src.bank_account import BankAccount&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;SERVER = True&quot;</span>                                                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class TestBankAccount(unittest.TestCase):&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def setUp(self):&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account = BankAccount(balance=1000, log_file=&#39;test_log.txt&#39;)&quot;</span>           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def tearDown(self):&quot;</span>                                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        if os.path.exists(&#39;test_log.txt&#39;):&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            os.remove(&#39;test_log.txt&#39;)&quot;</span>                                               <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_deposit(self):&quot;</span>                                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.deposit(500)&quot;</span>                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 1500)&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_withdraw(self):&quot;</span>                                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.withdraw(200)&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 800, &#39;Balance is not correct&#39;)&quot;</span>                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_get_balance(self):&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        balance = self.account.get_balance()&quot;</span>                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(balance, 1000)&quot;</span>                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_transaction_log(self):&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.deposit(500)&quot;</span>                                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.withdraw(200)&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.get_balance()&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertTrue(os.path.exists(&#39;test_log.txt&#39;))&quot;</span>                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        with open(&#39;test_log.txt&#39;, &#39;r&#39;) as file:&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            content = file.readlines()&quot;</span>                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(content, [&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Account created</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Deposit 500, new balance 1500</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Withdraw 200, new balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Balance check, balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;&quot;</span>                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            ])&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @unittest.skip(&#39;Not implemented yet&#39;)&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_has_loan(self):&quot;</span>                                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertFalse(self.account.has_loan())&quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @unittest.skipIf(SERVER, &#39;Only for local testing&#39;)&quot;</span>                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_server(self):&quot;</span>                                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertTrue(SERVER)&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Si pasamos los tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span> <span class="o">-</span><span class="n">s</span> <span class="n">tests</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_has_loan (test_bank_account.TestBankAccount) ... skipped &#x27;Not implemented yet&#x27;
test_server (test_bank_account.TestBankAccount) ... skipped &#x27;Only for local testing&#x27;
test_transaction_log (test_bank_account.TestBankAccount) ... ok
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

----------------------------------------------------------------------
Ran 10 tests in 0.001s

OK (skipped=2)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Vemos <code>test_server (test_bank_account.TestBankAccount) ... skipped &#x27;Only for local testing&#x27;</code> ya que, como <code>SERVER = True</code>, se ha saltado el test</p>
</section>
<section class="section-block-markdown-cell">
<h3><code>expectedFailure</code></h3>
</section>
<section class="section-block-markdown-cell">
<p>Se tiene que producir un error cuando un usuario quiere sacar más dinero del que tiene, de modo que con el método <code>expectedFailure</code> podemos decir que esperamos que falle el test</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import os&quot;</span>                                                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from src.bank_account import BankAccount&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;SERVER = True&quot;</span>                                                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class TestBankAccount(unittest.TestCase):&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def setUp(self):&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account = BankAccount(balance=1000, log_file=&#39;test_log.txt&#39;)&quot;</span>           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def tearDown(self):&quot;</span>                                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        if os.path.exists(&#39;test_log.txt&#39;):&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            os.remove(&#39;test_log.txt&#39;)&quot;</span>                                               <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_deposit(self):&quot;</span>                                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.deposit(500)&quot;</span>                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 1500)&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_withdraw(self):&quot;</span>                                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.withdraw(200)&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 800, &#39;Balance is not correct&#39;)&quot;</span>                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_get_balance(self):&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        balance = self.account.get_balance()&quot;</span>                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(balance, 1000)&quot;</span>                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_transaction_log(self):&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.deposit(500)&quot;</span>                                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.withdraw(200)&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.get_balance()&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertTrue(os.path.exists(&#39;test_log.txt&#39;))&quot;</span>                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        with open(&#39;test_log.txt&#39;, &#39;r&#39;) as file:&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            content = file.readlines()&quot;</span>                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(content, [&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Account created</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Deposit 500, new balance 1500</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Withdraw 200, new balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Balance check, balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;&quot;</span>                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            ])&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @unittest.skip(&#39;Not implemented yet&#39;)&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_has_loan(self):&quot;</span>                                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertFalse(self.account.has_loan())&quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @unittest.skipIf(SERVER, &#39;Only for local testing&#39;)&quot;</span>                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_server(self):&quot;</span>                                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertTrue(SERVER)&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @unittest.expectedFailure&quot;</span>                                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_fail(self):&quot;</span>                                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.withdraw(1200)&quot;</span>                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 800, &#39;Not enough money&#39;)&quot;</span>                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Pasamos los tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span> <span class="o">-</span><span class="n">s</span> <span class="n">tests</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_fail (test_bank_account.TestBankAccount) ... expected failure
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_has_loan (test_bank_account.TestBankAccount) ... skipped &#x27;Not implemented yet&#x27;
test_server (test_bank_account.TestBankAccount) ... skipped &#x27;Only for local testing&#x27;
test_transaction_log (test_bank_account.TestBankAccount) ... ok
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

----------------------------------------------------------------------
Ran 11 tests in 0.001s

OK (skipped=2, expected failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Como vemos, obtenemos <code>test_fail (test_bank_account.TestBankAccount) ... expected failure</code> porque es un error que esperábamos</p>
</section>
<section class="section-block-markdown-cell">
<h3><code>skipUnless</code></h3>
</section>
<section class="section-block-markdown-cell">
<p>Al igual que antes, puede que haya pruebas que solo queramos hacer en el entorno de desarrollo, pero nunca en el servidor, o en staging, o en producción. Para eso podemos usar <code>skipUnless</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import os&quot;</span>                                                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from src.bank_account import BankAccount&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;SERVER = True&quot;</span>                                                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;ENVIRONMENT = &#39;server&#39;&quot;</span>                                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class TestBankAccount(unittest.TestCase):&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def setUp(self):&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account = BankAccount(balance=1000, log_file=&#39;test_log.txt&#39;)&quot;</span>           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def tearDown(self):&quot;</span>                                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        if os.path.exists(&#39;test_log.txt&#39;):&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            os.remove(&#39;test_log.txt&#39;)&quot;</span>                                               <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_deposit(self):&quot;</span>                                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.deposit(500)&quot;</span>                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 1500)&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_withdraw(self):&quot;</span>                                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.withdraw(200)&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 800, &#39;Balance is not correct&#39;)&quot;</span>                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_get_balance(self):&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        balance = self.account.get_balance()&quot;</span>                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(balance, 1000)&quot;</span>                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_transaction_log(self):&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.deposit(500)&quot;</span>                                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.withdraw(200)&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.get_balance()&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertTrue(os.path.exists(&#39;test_log.txt&#39;))&quot;</span>                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        with open(&#39;test_log.txt&#39;, &#39;r&#39;) as file:&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            content = file.readlines()&quot;</span>                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(content, [&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Account created</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Deposit 500, new balance 1500</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Withdraw 200, new balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Balance check, balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;&quot;</span>                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            ])&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @unittest.skip(&#39;Not implemented yet&#39;)&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_has_loan(self):&quot;</span>                                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertFalse(self.account.has_loan())&quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @unittest.skipIf(SERVER, &#39;Only for local testing&#39;)&quot;</span>                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_server(self):&quot;</span>                                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertTrue(SERVER)&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @unittest.expectedFailure&quot;</span>                                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_fail(self):&quot;</span>                                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.withdraw(1200)&quot;</span>                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 800, &#39;Not enough money&#39;)&quot;</span>                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @unittest.skipUnless(ENVIRONMENT == &#39;dev&#39;, &#39;Only for dev environment&#39;)&quot;</span>          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_environment(self):&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(ENVIRONMENT, &#39;dev&#39;)&quot;</span>                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Pasamos los tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span> <span class="o">-</span><span class="n">s</span> <span class="n">tests</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_environment (test_bank_account.TestBankAccount) ... skipped &#x27;Only for dev environment&#x27;
test_fail (test_bank_account.TestBankAccount) ... expected failure
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_has_loan (test_bank_account.TestBankAccount) ... skipped &#x27;Not implemented yet&#x27;
test_server (test_bank_account.TestBankAccount) ... skipped &#x27;Only for local testing&#x27;
test_transaction_log (test_bank_account.TestBankAccount) ... ok
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

----------------------------------------------------------------------
Ran 12 tests in 0.001s

OK (skipped=3, expected failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Obtenemos <code>test_environment (test_bank_account.TestBankAccount) ... skipped &#x27;Only for dev environment&#x27;</code> porque ese test solo se va a pasar en el entorno de desarrollo y se supone que estamos en el servidor</p>
</section>
<section class="section-block-markdown-cell">
<h2 id="Organizar los tests">Organizar los tests<a class="anchor-link" href="#Organizar los tests">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<p>Podemos organizar los test organizando lo que se llaman <code>test suites</code>. Para ello vamos a crear un archivo llamado <code>test_suites.py</code> en la carpeta <code>tests</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">cd</span> <span class="n">tests</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">touch</span> <span class="n">test_suites</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Y ahora generamos dos test suite con los tests de <code>test_calculator</code> y <code>test_bank_account</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from test_calculator import TestCalculator&quot;</span>                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;def calculator_suite():&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    suite = unittest.TestSuite()&quot;</span>                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    suite.addTest(TestCalculator(&#39;test_sum&#39;))&quot;</span>               <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    suite.addTest(TestCalculator(&#39;test_substract&#39;))&quot;</span>          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    suite.addTest(TestCalculator(&#39;test_multiply&#39;))&quot;</span>          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    suite.addTest(TestCalculator(&#39;test_divide&#39;))&quot;</span>          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    return suite&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;if __name__ == &#39;__main__&#39;:&quot;</span>                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    runner = unittest.TextTestRunner()&quot;</span>                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_calculator</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    runner.run(calculator_suite())&quot;</span>                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_calculator</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Ahora el de <code>test_bank_account</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from test_bank_account import TestBankAccount&quot;</span>               <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;def bank_account_suite():&quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    suite = unittest.TestSuite()&quot;</span>                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    suite.addTest(TestBankAccount(&#39;test_deposit&#39;))&quot;</span>          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    suite.addTest(TestBankAccount(&#39;test_withdraw&#39;))&quot;</span>         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    suite.addTest(TestBankAccount(&#39;test_get_balance&#39;))&quot;</span>      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    suite.addTest(TestBankAccount(&#39;test_transaction_log&#39;))&quot;</span>  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    suite.addTest(TestBankAccount(&#39;test_has_loan&#39;))&quot;</span>         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    suite.addTest(TestBankAccount(&#39;test_server&#39;))&quot;</span>           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    suite.addTest(TestBankAccount(&#39;test_fail&#39;))&quot;</span>             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    suite.addTest(TestBankAccount(&#39;test_environment&#39;))&quot;</span>      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    return suite&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;if __name__ == &#39;__main__&#39;:&quot;</span>                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    runner = unittest.TextTestRunner()&quot;</span>                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    runner.run(bank_account_suite())&quot;</span>                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Podemos ejecutar solo los tests de <code>test_calculator</code> con el comando <code>python tests/test_suite_calculator.py</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="n">tests</span><span class="o">/</span><span class="n">test_suite_calculator</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>Traceback (most recent call last):
&#x20;&#x20;File &quot;/home/wallabot/Documentos/web/portafolio/posts/testing_python/tests/test_suite_calculator.py&quot;, line 3, in &amp;lt;module&amp;gt;
&#x20;&#x20;&#x20;&#x20;from test_calculator import TestCalculator
&#x20;&#x20;File &quot;/home/wallabot/Documentos/web/portafolio/posts/testing_python/tests/test_calculator.py&quot;, line 2, in &amp;lt;module&amp;gt;
&#x20;&#x20;&#x20;&#x20;from src.calculator import sum, substract, multiply, divide
ModuleNotFoundError: No module named &#x27;src&#x27;
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Vemos que no encuentra el módulo <code>src</code> de <code>test_calculator.py</code>, eso es porque no está en la ruta, así que vamos a añadirlo</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">PYTHONPATH</span><span class="o">=.</span> <span class="n">python</span> <span class="n">tests</span><span class="o">/</span><span class="n">test_suite_calculator</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>....
----------------------------------------------------------------------
Ran 4 tests in 0.000s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Vemos que solo ha pasado los test de <code>test_calculator</code></p>
</section>
<section class="section-block-markdown-cell">
<p>Vamos a pasar ahora los de <code>test_bank_account.py</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">PYTHONPATH</span><span class="o">=.</span> <span class="n">python</span> <span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>....ssxs
----------------------------------------------------------------------
Ran 8 tests in 0.001s

OK (skipped=3, expected failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Y aquí vemos que pasa los tests de <code>test_bank_account</code></p>
</section>
<section class="section-block-markdown-cell">
<p>Hay que diferenciar con lo que hacíamos al principio, antes de usar <code>discover</code>, cuando hacíamos <code>!cd testing_python &amp;&amp; python -m unittest tests/test_calculator.py</code>. Porque en <code>test_calculator.py</code> podemos escribir todos los posibles test para <code>calculator.py</code>, pero con las <code>suite</code>s ejecutamos los test que queramos. Podríamos tener varias <code>suite</code>s para ejecutar los test que queramos de <code>test_calculator.py</code> y <code>test_bank_account.py</code></p>
</section>
<section class="section-block-markdown-cell">
<h2 id="Mejores practicas a la hora de nombrar los test">Mejores prácticas a la hora de nombrar los test<a class="anchor-link" href="#Mejores practicas a la hora de nombrar los test">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<p>A la hora de nombrar los test viene bien seguir las siguientes pautas:</p>
<ul>
  <li>Una clase de test por cada clase de código</li>
  <li>Todos los test deben empezar por <code>test_</code> para saber que es un código</li>
  <li>A continuación debe ir el nombre de la función o método que se está probando</li>
  <li>A continuación debe ir el escenario de la prueba, ya que un método o función puede tener varios escenarios de prueba. Por ejemplo con todos los posibles valores de entrada, con valores límite, con valores incorrectos, etc.</li>
  <li>Por último, se debe añadir el resultado esperado</li>
</ul>
<p>Por lo que un test debería tener el siguiente formato <code>test_&#x3C;nombre_funcion&#x3E;_&#x3C;escenario&#x3E;_&#x3C;resultado_esperado&#x3E;</code></p>
</section>
<section class="section-block-markdown-cell">
<h2 id="Mocking de APIs">Mocking de APIs<a class="anchor-link" href="#Mocking de APIs">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<p>Supongamos que nuestro código llama a una API externa y queremos hacer tests de nuestro código sin depender de la API externa. Para ello podemos usar <code>unittest.mock</code> que viene por defecto en Python</p>
</section>
<section class="section-block-markdown-cell">
<p>Primero vamos a crear un archivo llamado <code>api.py</code> en la carpeta <code>src</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import requests&quot;</span>                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;def get_api():&quot;</span>                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    url = &#39;https://jsonplaceholder.typicode.com/posts/1&#39;&quot;</span>    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    try:&quot;</span>                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        response = requests.get(url)&quot;</span>                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        response.raise_for_status()&quot;</span>                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        data = response.json()&quot;</span>                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        print(data)&quot;</span>                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        return data&quot;</span>                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    except requests.exceptions.RequestException as e:&quot;</span>       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        print(f&#39;error: </span><span class="si">{e}</span><span class="s2">&#39;)&quot;</span>                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        return None&quot;</span>                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;if __name__ == &#39;__main__&#39;:&quot;</span>                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    get_api()&quot;</span>                                               <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">api</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Vamos a ejecutar el archivo para ver qué devuelve</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="n">api</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>&#x7B;&#x27;userId&#x27;: 1, &#x27;id&#x27;: 1, &#x27;title&#x27;: &#x27;sunt aut facere repellat provident occaecati excepturi optio reprehenderit&#x27;, &#x27;body&#x27;: &#x27;quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto&#x27;&#x7D;
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Ahora creamos el test</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from src.api import get_api&quot;</span>                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class TestApi(unittest.TestCase):&quot;</span>                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_get_api(self):&quot;</span>                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        data = get_api()&quot;</span>                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertIsNotNone(data)&quot;</span>                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertIsInstance(data, dict)&quot;</span>                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertIn(&#39;userId&#39;, data)&quot;</span>                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertIn(&#39;id&#39;, data)&quot;</span>                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertIn(&#39;title&#39;, data)&quot;</span>                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertIn(&#39;body&#39;, data)&quot;</span>                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(data[&#39;userId&#39;], 1)&quot;</span>                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(data[&#39;id&#39;], 1)&quot;</span>                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Pasamos los tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>&#x7B;&#x27;userId&#x27;: 1, &#x27;id&#x27;: 1, &#x27;title&#x27;: &#x27;sunt aut facere repellat provident occaecati excepturi optio reprehenderit&#x27;, &#x27;body&#x27;: &#x27;quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto&#x27;&#x7D;
.
----------------------------------------------------------------------
Ran 1 test in 0.074s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Vamos a pasar los test de <code>bank_account</code> para ver cuánto tardaba</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">PYTHONPATH</span><span class="o">=.</span> <span class="n">python</span> <span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>....ssxs
----------------------------------------------------------------------
Ran 8 tests in 0.001s

OK (skipped=3, expected failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Como vemos 8 tests han tardado 0.001 segundos, mientras que 1 solo test de la API ha tardado 0.074 segundos. Esto puede hacer que un código con muchas llamadas a una API tarde mucho en ejecutar los tests. Además, corremos el riesgo de que si cambia la API y no nos devuelve lo que esperamos, los tests fallarán, aunque nuestro código esté bien. Así que para eso se mockean las APIs</p>
</section>
<section class="section-block-markdown-cell">
<p>Vamos a ver cómo hacerlo</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from src.api import get_api&quot;</span>                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from unittest.mock import patch&quot;</span>                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class TestApi(unittest.TestCase):&quot;</span>                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @patch(&#39;src.api.requests.get&#39;)&quot;</span>                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_get_api(self, mock_get):&quot;</span>                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        mock_get.return_value.status_code = 200&quot;</span>             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        mock_get.return_value.json.return_value = {&quot;</span>         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;userId&#39;: 1,&quot;</span>                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;id&#39;: 1,&quot;</span>                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;title&#39;: &#39;title&#39;,&quot;</span>                               <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;body&#39;: &#39;body&#39;&quot;</span>                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        }&quot;</span>                                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        data = get_api()&quot;</span>                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertIsNotNone(data)&quot;</span>                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertIsInstance(data, dict)&quot;</span>                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertIn(&#39;userId&#39;, data)&quot;</span>                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertIn(&#39;id&#39;, data)&quot;</span>                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertIn(&#39;title&#39;, data)&quot;</span>                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertIn(&#39;body&#39;, data)&quot;</span>                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(data[&#39;userId&#39;], 1)&quot;</span>                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(data[&#39;id&#39;], 1)&quot;</span>                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        &quot;</span>                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        mock_get.assert_called_once_with(&#39;https://jsonplaceholder.typicode.com/posts/1&#39;)&quot;</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Lo que hemos hecho ha sido</p>
<ul>
  <li>Importar <code>patch</code> de <code>unittest.mock</code>.</li>
  <li>Hemos puesto un decorador a la función <code>test_get_data</code> y hemos pasado como parámetro al decorador la función que queremos mockear.</li>
  <li>Hemos creado un objeto <code>mock_get</code> que es el que va a sustituir a la función original con el método <code>return_value</code> que es el valor que va a devolver la función mockeada.</li>
  <li>Cuando se llame a <code>get_api()</code> en vez de ejecutarse la función original, se obtendrá en <code>data</code> el valor que hemos mockeado en <code>return_value</code></li>
  <li>Por último hemos añadido la comprobación de que se puede llamar a la <code>URL</code> de la API</li>
</ul>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">tests</span><span class="o">/</span><span class="n">test_api</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>&#x7B;&#x27;userId&#x27;: 1, &#x27;id&#x27;: 1, &#x27;title&#x27;: &#x27;title&#x27;, &#x27;body&#x27;: &#x27;body&#x27;&#x7D;
.
----------------------------------------------------------------------
Ran 1 test in 0.001s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Como vemos, ahora solo tarda 0.002 segundos.</p>
</section>
<section class="section-block-markdown-cell">
<h2>Modificar el resultado de objetos mediante <code>patch</code></h2>
</section>
<section class="section-block-markdown-cell">
<p>Supongamos que queremos modificar el método de sacar dinero para que solo se pueda hacer en un rango de horas</p>
<p>Primero modificamos la función de retirar dinero</p>
<section class="section-block-markdown-cell">
      <div class='highlight'><pre><code class="language-python">&#x20;&#x20;def withdraw(self, amount):<br>&#x20;&#x20;&#x20;&#x20;now = datetime.now()<br>&#x20;&#x20;&#x20;&#x20;if now.hour &lt; 7 or now.hour &gt; 18:<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;print(&#39;Out of hours&#39;)<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;return None<br>&#x20;&#x20;&#x20;&#x20;if amount &gt; 0:<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;self.balance -= amount<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;self._log_transaction(f&#39;Withdraw &#123;amount&#125;, new balance &#123;self.balance&#125;&#39;)<br>&#x20;&#x20;&#x20;&#x20;return self.balance</code></pre></div>
      </section>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from datetime import datetime&quot;</span>                                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class BankAccount:&quot;</span>                                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def __init__(self, balance=0, log_file=None):&quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.balance = balance&quot;</span>                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.log_file = log_file&quot;</span>                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self._log_transaction(&#39;Account created&#39;)&quot;</span>                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def _log_transaction(self, message):&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        if self.log_file:&quot;</span>                                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            with open(self.log_file, &#39;a&#39;) as file:&quot;</span>                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;                file.write(f&#39;</span><span class="si">{message}</span><span class="se">\\\\</span><span class="s2">n&#39;)&quot;</span>                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def deposit(self, amount):&quot;</span>                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        if amount &amp;gt; 0:&quot;</span>                                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            self.balance += amount&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            self._log_transaction(f&#39;Deposit </span><span class="si">{amount}</span><span class="s2">, new balance </span><span class="si">{self.balance}</span><span class="s2">&#39;)&quot;</span>  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        return self.balance&quot;</span>                                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def withdraw(self, amount):&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        now = datetime.now()&quot;</span>                                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        if now.hour &amp;lt; 7 or now.hour &amp;gt; 18:&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            print(&#39;Out of hours&#39;)&quot;</span>                                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            return None&quot;</span>                                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        if amount &amp;gt; 0:&quot;</span>                                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            self.balance -= amount&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            self._log_transaction(f&#39;Withdraw </span><span class="si">{amount}</span><span class="s2">, new balance </span><span class="si">{self.balance}</span><span class="s2">&#39;)&quot;</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        return self.balance&quot;</span>                                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def get_balance(self):&quot;</span>                                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self._log_transaction(f&#39;Balance check, balance </span><span class="si">{self.balance}</span><span class="s2">&#39;)&quot;</span>             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        return self.balance&quot;</span>                                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Ahora tenemos que poder probar la retirada de dinero a distintas horas, pero no podemos estar cambiando la hora del sistema, ni podemos esperar a que sea una hora determinada para hacer la prueba. Para eso podemos usar <code>patch</code> para modificar el resultado de <code>datetime.now()</code></p>
<section class="section-block-markdown-cell">
      <div class='highlight'><pre><code class="language-python">&#x20;&#x20;@patch(&#39;src.bank_account.datetime.now&#39;)<br>&#x20;&#x20;def test_withdraw_during_working_hours(self, mock_now):<br>&#x20;&#x20;&#x20;&#x20;mock_now.return_value.hour = 10<br>new_balance = self.account.withdraw(200)<br>self.assertEqual(new_balance, 800, &#39;Balance is not correct&#39;)<br><br>&#x20;&#x20;@patch(&#39;src.bank_account.datetime.now&#39;)<br>&#x20;&#x20;def test_withdraw_during_non_working_hours(self, mock_now):<br>mock_now.return_value.hour = 20<br>new_balance = self.account.withdraw(200)<br>self.assertIsNone(new_balance, &#39;Balance is not correct&#39;)</code></pre></div>
      </section>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from unittest.mock import patch&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import os&quot;</span>                                                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from src.bank_account import BankAccount&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;SERVER = True&quot;</span>                                                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;ENVIRONMENT = &#39;server&#39;&quot;</span>                                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class TestBankAccount(unittest.TestCase):&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def setUp(self):&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account = BankAccount(balance=1000, log_file=&#39;test_log.txt&#39;)&quot;</span>           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def tearDown(self):&quot;</span>                                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        if os.path.exists(&#39;test_log.txt&#39;):&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            os.remove(&#39;test_log.txt&#39;)&quot;</span>                                               <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_deposit(self):&quot;</span>                                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.deposit(500)&quot;</span>                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 1500)&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_withdraw(self):&quot;</span>                                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.withdraw(200)&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 800, &#39;Balance is not correct&#39;)&quot;</span>                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @patch(&#39;src.bank_account.datetime.now&#39;)&quot;</span>                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_withdraw_during_working_hours(self, mock_now):&quot;</span>                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        mock_now.return_value.hour = 10&quot;</span>                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.withdraw(200)&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 800, &#39;Balance is not correct&#39;)&quot;</span>                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @patch(&#39;src.bank_account.datetime.now&#39;)&quot;</span>                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_withdraw_during_non_working_hours(self, mock_now):&quot;</span>                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        mock_now.return_value.hour = 20&quot;</span>                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.withdraw(200)&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertIsNone(new_balace, &#39;Balance is not correct&#39;)&quot;</span>                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_get_balance(self):&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        balance = self.account.get_balance()&quot;</span>                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(balance, 1000)&quot;</span>                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_transaction_log(self):&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.deposit(500)&quot;</span>                                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.withdraw(200)&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.get_balance()&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertTrue(os.path.exists(&#39;test_log.txt&#39;))&quot;</span>                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        with open(&#39;test_log.txt&#39;, &#39;r&#39;) as file:&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            content = file.readlines()&quot;</span>                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(content, [&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Account created</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Deposit 500, new balance 1500</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Withdraw 200, new balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Balance check, balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;&quot;</span>                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            ])&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @unittest.skip(&#39;Not implemented yet&#39;)&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_has_loan(self):&quot;</span>                                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertFalse(self.account.has_loan())&quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @unittest.skipIf(SERVER, &#39;Only for local testing&#39;)&quot;</span>                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_server(self):&quot;</span>                                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertTrue(SERVER)&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @unittest.expectedFailure&quot;</span>                                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_fail(self):&quot;</span>                                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.withdraw(1200)&quot;</span>                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 800, &#39;Not enough money&#39;)&quot;</span>                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @unittest.skipUnless(ENVIRONMENT == &#39;dev&#39;, &#39;Only for dev environment&#39;)&quot;</span>          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_environment(self):&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(ENVIRONMENT, &#39;dev&#39;)&quot;</span>                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Pasamos los tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">PYTHONPATH</span><span class="o">=.</span> <span class="n">python</span> <span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>....ssxs
----------------------------------------------------------------------
Ran 8 tests in 0.001s

OK (skipped=3, expected failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h2>Parametrizar pruebas con <code>subTest</code></h2>
</section>
<section class="section-block-markdown-cell">
<p>Supongamos que queremos hacer varias pruebas de sacar dinero para diferentes valores, podríamos escribir una prueba para cada valor de dinero que queremos probar, pero sería repetir código. Para eso podemos usar <code>subTest</code> que nos permite hacer varias pruebas con un solo test</p>
<p>Lo que hacemos es crear un diccionario con los diferentes valores que queremos probar y el resultado esperado, y luego con un bucle <code>for</code> y <code>subTest</code> hacemos las pruebas. Así quedaría el test del método <code>withdraw</code></p>
<section class="section-block-markdown-cell">
      <div class='highlight'><pre><code class="language-python">&#x20;&#x20;def test_withdraw(self):<br>&#x20;&#x20;&#x20;&#x20;test_cases = &#123;<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;test_200: &#123;<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#39;amount&#39;: 200,<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#39;expected&#39;: 800<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#125;,<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;test_400: &#123;<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#39;amount&#39;: 400,<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#39;expected&#39;: 600<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#125;,<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;test_600: &#123;<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#39;amount&#39;: 600,<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#39;expected&#39;: 400<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#125;,<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;test_800: &#123;<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#39;amount&#39;: 800,<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#39;expected&#39;: 200<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#125;,<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;test_1000: &#123;<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#39;amount&#39;: 1000,<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#39;expected&#39;: 0<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#125;<br>&#x20;&#x20;&#x20;&#x20;&#125;<br><br>&#x20;&#x20;&#x20;&#x20;for test_name, test_case in test_cases.items():<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;with self.subTest(test_name):<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;self.account = BankAccount(balance=1000, log_file=&#39;test_log.txt&#39;)<br>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;new_balance = self.account.withdraw(test_case[&#39;amount&#39;])<br>self.assertEqual(new_balance, test_case[&#39;expected&#39;], &#39;Balance is not correct&#39;)</code></pre></div>
      </section>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import unittest&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from unittest.mock import patch&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;import os&quot;</span>                                                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;from src.bank_account import BankAccount&quot;</span>                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;SERVER = True&quot;</span>                                                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;ENVIRONMENT = &#39;server&#39;&quot;</span>                                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;class TestBankAccount(unittest.TestCase):&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def setUp(self):&quot;</span>                                                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account = BankAccount(balance=1000, log_file=&#39;test_log.txt&#39;)&quot;</span>           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def tearDown(self):&quot;</span>                                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        if os.path.exists(&#39;test_log.txt&#39;):&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            os.remove(&#39;test_log.txt&#39;)&quot;</span>                                               <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_deposit(self):&quot;</span>                                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.deposit(500)&quot;</span>                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 1500)&quot;</span>                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_withdraw(self):&quot;</span>                                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        test_cases = {&quot;</span>                                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;test_200&#39;: {&quot;</span>                                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;                &#39;amount&#39;: 200,&quot;</span>                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;                &#39;expected&#39;: 800&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            },&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;test_400&#39;: {&quot;</span>                                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;                &#39;amount&#39;: 400,&quot;</span>                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;                &#39;expected&#39;: 600&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            },&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;test_600&#39;: {&quot;</span>                                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;                &#39;amount&#39;: 600,&quot;</span>                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;                &#39;expected&#39;: 400&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            },&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;test_800&#39;: {&quot;</span>                                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;                &#39;amount&#39;: 800,&quot;</span>                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;                &#39;expected&#39;: 200&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            },&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;test_1000&#39;: {&quot;</span>                                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;                &#39;amount&#39;: 1000,&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;                &#39;expected&#39;: 0&quot;</span>                                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            }&quot;</span>                                                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        }&quot;</span>                                                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        for test_case, values in test_cases.items():&quot;</span>                                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            with self.subTest(test_case=test_case):&quot;</span>                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;                self.account = BankAccount(balance=1000, log_file=&#39;test_log.txt&#39;)&quot;</span>   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;                new_balace = self.account.withdraw(values[&#39;amount&#39;])&quot;</span>                <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;                self.assertEqual(new_balace, values[&#39;expected&#39;], &#39;Balance is not correct&#39;)&quot;</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @patch(&#39;src.bank_account.datetime.now&#39;)&quot;</span>                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_withdraw_during_working_hours(self, mock_now):&quot;</span>                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        mock_now.return_value.hour = 10&quot;</span>                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.withdraw(200)&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 800, &#39;Balance is not correct&#39;)&quot;</span>                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @patch(&#39;src.bank_account.datetime.now&#39;)&quot;</span>                                         <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_withdraw_during_non_working_hours(self, mock_now):&quot;</span>                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        mock_now.return_value.hour = 20&quot;</span>                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.withdraw(200)&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertIsNone(new_balace, &#39;Balance is not correct&#39;)&quot;</span>                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_get_balance(self):&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        balance = self.account.get_balance()&quot;</span>                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(balance, 1000)&quot;</span>                                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_transaction_log(self):&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.deposit(500)&quot;</span>                                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.withdraw(200)&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.account.get_balance()&quot;</span>                                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertTrue(os.path.exists(&#39;test_log.txt&#39;))&quot;</span>                             <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        with open(&#39;test_log.txt&#39;, &#39;r&#39;) as file:&quot;</span>                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            content = file.readlines()&quot;</span>                                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(content, [&quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Account created</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                                 <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Deposit 500, new balance 1500</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Withdraw 200, new balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;, &quot;</span>                                  <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            &#39;Balance check, balance 1300</span><span class="se">\\\n</span><span class="s2">&#39;&quot;</span>                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;            ])&quot;</span>                                                                      <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @unittest.skip(&#39;Not implemented yet&#39;)&quot;</span>                                           <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_has_loan(self):&quot;</span>                                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertFalse(self.account.has_loan())&quot;</span>                                   <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @unittest.skipIf(SERVER, &#39;Only for local testing&#39;)&quot;</span>                              <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_server(self):&quot;</span>                                                          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertTrue(SERVER)&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @unittest.expectedFailure&quot;</span>                                                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_fail(self):&quot;</span>                                                            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        new_balace = self.account.withdraw(1200)&quot;</span>                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(new_balace, 800, &#39;Not enough money&#39;)&quot;</span>                       <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;&quot;</span>                                                                                    <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    @unittest.skipUnless(ENVIRONMENT == &#39;dev&#39;, &#39;Only for dev environment&#39;)&quot;</span>          <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;    def test_environment(self):&quot;</span>                                                     <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
<span class="err">!</span><span class="n">echo</span> <span class="s2">&quot;        self.assertEqual(ENVIRONMENT, &#39;dev&#39;)&quot;</span>                                        <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">testing_python</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">test_bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Pasamos los tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">PYTHONPATH</span><span class="o">=.</span> <span class="n">python</span> <span class="n">tests</span><span class="o">/</span><span class="n">test_suite_bank_account</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>....ssxs
----------------------------------------------------------------------
Ran 8 tests in 0.001s

OK (skipped=3, expected failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h2 id="Cobertura de test">Cobertura de test<a class="anchor-link" href="#Cobertura de test">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<p>Podemos ver la cobertura de tests que tenemos, ya que aunque pensemos que hemos probado todo, puede que haya partes del código que no hemos probado. Para ello vamos a usar la librería <code>coverage</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">coverage</span> <span class="n">run</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">tests</span><span class="o">/</span><span class="n">test_calculator</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>....
----------------------------------------------------------------------
Ran 4 tests in 0.000s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Como vemos, solo hemos pasado los test de <code>test_calculator</code>, pero aún no sabemos la cobertura</p>
</section>
<section class="section-block-markdown-cell">
<h3 id="Reporte de cobertura">Reporte de cobertura<a class="anchor-link" href="#Reporte de cobertura">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>Después de haber ejecutado <code>coverage</code> podemos pedirle un reporte de la cobertura de test con el comando <code>coverage report</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">coverage</span> <span class="n">report</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>Name                       Stmts   Miss  Cover
----------------------------------------------
src/calculator.py              8      0   100%
tests/test_calculator.py      11      0   100%
----------------------------------------------
TOTAL                         19      0   100%
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>O pedírselo mediante un archivo HTML con el comando <code>coverage html</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="err">!</span><span class="n">cd</span> <span class="n">testing_python</span> <span class="o">&amp;</span></span><span class="o">&amp;</span> <span class="n">coverage</span> <span class="n">html</span>
</pre></div>
</div>
</section>
<section class="section-block-code-cell-">
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>Wrote HTML report to ]8;;file:///home/wallabot/Documentos/web/portafolio/posts/testing_python/htmlcov/index.htmlhtmlcov/index.html]8;;
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Se nos crea un archivo <code>index.html</code> en la carpeta <code>htmlcov</code> que podemos abrir en el navegador y ver la cobertura de los test</p>
</section>