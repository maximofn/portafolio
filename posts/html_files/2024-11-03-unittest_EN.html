<section class="section-block-markdown-cell">
<h1 id="unittest-Python">unittest Python<a class="anchor-link" href="#unittest-Python">¶</a></h1>
</section>
<section class="section-block-markdown-cell">
<blockquote>
<p>Disclaimer: This post has been translated to English using a machine translation model. Please, let me know if you find any mistakes.</p>
</blockquote>
</section>
<section class="section-block-markdown-cell">
<p>To create this post, we are going to create a folder called <code>testing_python</code> where we will create all the code.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span>mkdir<span class="w"> </span>testing_python
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Inside that folder we are going to create the <code>src</code> and <code>tests</code> folders where we will put the source code and the respective tests.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span>mkdir<span class="w"> </span>testing_python/src
<span class="o">!</span>mkdir<span class="w"> </span>testing_python/tests
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<h2 id="Necessary-Libraries">Necessary Libraries<a class="anchor-link" href="#Necessary-Libraries">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<p>To run the tests we are going to use the <code>unittest</code> library that comes by default with Python, but we will also install <code>coverage</code> to see the test coverage. We install it with Conda</p>
<div class="highlight"><pre><span></span>conda<span class="w"> </span>install<span class="w"> </span>conda-forge::coverage<span class="sb">```</span>

Or<span class="w"> </span>with<span class="w"> </span>pip
<span class="sb">```</span>bash
pip<span class="w"> </span>install<span class="w"> </span>coverage<span class="sb">```</span>
</pre></div>
</section>
<section class="section-block-markdown-cell">
<h2 id="First-tests">First tests<a class="anchor-link" href="#First-tests">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<p>Let's create a first file called <code>calculator.py</code> in the <code>src</code> folder</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"def sum(a, b):"</span><span class="w">           </span>&gt;<span class="w"> </span>testing_python/src/calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    return a + b"</span><span class="w">        </span>&gt;&gt;<span class="w"> </span>testing_python/src/calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                        </span>&gt;&gt;<span class="w"> </span>testing_python/src/calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"def substract(a, b):"</span><span class="w">    </span>&gt;&gt;<span class="w"> </span>testing_python/src/calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    return a - b"</span><span class="w">        </span>&gt;&gt;<span class="w"> </span>testing_python/src/calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                        </span>&gt;&gt;<span class="w"> </span>testing_python/src/calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"def multiply(a, b):"</span><span class="w">     </span>&gt;&gt;<span class="w"> </span>testing_python/src/calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    return a * b"</span><span class="w">        </span>&gt;&gt;<span class="w"> </span>testing_python/src/calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                        </span>&gt;&gt;<span class="w"> </span>testing_python/src/calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"def divide(a, b):"</span><span class="w">       </span>&gt;&gt;<span class="w"> </span>testing_python/src/calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    return a / b"</span><span class="w">        </span>&gt;&gt;<span class="w"> </span>testing_python/src/calculator.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Now we create a file called <code>test_calculator.py</code> in the <code>tests</code> folder</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                                                  </span>&gt;<span class="w">  </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from src.calculator import sum, substract, multiply, divide"</span><span class="w">     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class TestCalculator(unittest.TestCase):"</span><span class="w">                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_sum(self):"</span><span class="w">                                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(sum(2, 2), 4)"</span><span class="w">                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_substract(self):"</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(substract(2, 1), 1)"</span><span class="w">                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_multiply(self):"</span><span class="w">                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(multiply(2, 3), 6)"</span><span class="w">                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_divide(self):"</span><span class="w">                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(divide(6, 3), 2)"</span><span class="w">                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Now to run it we do <code>python -m unittest tests/test_calculator.py discover -s tests</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>tests/test_calculator.py
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>....
----------------------------------------------------------------------
Ran 4 tests in 0.000s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>As we can see, four dots appear for the two tests that have been passed and were correct.</p>
</section>
<section class="section-block-markdown-cell">
<p>Let's modify the test file to cause an error, we're going to make it so that adding 2 and 2 gives us 5.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                                                  </span>&gt;<span class="w">  </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from src.calculator import sum, substract, multiply, divide"</span><span class="w">     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class TestCalculator(unittest.TestCase):"</span><span class="w">                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_sum(self):"</span><span class="w">                                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(sum(2, 2), 5)"</span><span class="w">                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_substract(self):"</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(substract(2, 1), 1)"</span><span class="w">                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_multiply(self):"</span><span class="w">                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(multiply(2, 3), 6)"</span><span class="w">                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_divide(self):"</span><span class="w">                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(divide(6, 3), 2)"</span><span class="w">                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Now we run the tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>tests/test_calculator.py
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>...F
======================================================================
FAIL: test_sum (tests.test_calculator.TestCalculator)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/wallabot/Documentos/web/portafolio/posts/testing_python/tests/test_calculator.py", line 6, in test_sum
    self.assertEqual(sum(2, 2), 5)
AssertionError: 4 != 5

----------------------------------------------------------------------
Ran 4 tests in 0.000s

FAILED (failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>As we can see, now we get an <code>F</code> which means that a test has failed, in addition, it provides us with the following information</p>
<pre><code>FAIL: test_sum (tests.test_calculator.TestCalculator)----------------------------------------------------------------------Traceback (most recent call last):File "/home/wallabot/Documents/web/portfolio/posts/testing_python/tests/test_calculator.py", line 6, in test_sumself.assertEqual(sum(2, 2), 5)AssertionError: 4 != 5```

It's telling us that the test `test_sum` has failed on line 6, which is the one we modified, and that the expected result was 5 but the obtained result was 4.
</code></pre>
</section>
<section class="section-block-markdown-cell">
<p>One thing we haven't mentioned and is important is that we didn't call the methods <code>test_sum</code> and <code>test_subtract</code> directly; they were executed automatically. This is because methods that start with <code>test_</code> are the ones that get executed automatically.</p>
</section>
<section class="section-block-markdown-cell">
<p>A simpler way to run the tests is to use the <code>discover</code> command, which looks for all files starting with <code>test_</code> in the folder passed through the <code>-s</code> parameter.</p>
</section>
<section class="section-block-markdown-cell">
<p>First, we rewrite the tests properly.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                                                  </span>&gt;<span class="w">  </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from src.calculator import sum, substract, multiply, divide"</span><span class="w">     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class TestCalculator(unittest.TestCase):"</span><span class="w">                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_sum(self):"</span><span class="w">                                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(sum(2, 2), 4)"</span><span class="w">                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_substract(self):"</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(substract(2, 1), 1)"</span><span class="w">                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_multiply(self):"</span><span class="w">                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(multiply(2, 3), 6)"</span><span class="w">                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_divide(self):"</span><span class="w">                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(divide(6, 3), 2)"</span><span class="w">                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_calculator.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>And now we run the tests using <code>discover</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>discover<span class="w"> </span>-s<span class="w"> </span>tests
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>....
----------------------------------------------------------------------
Ran 4 tests in 0.000s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>He found the tests and passed them successfully</p>
</section>
<section class="section-block-markdown-cell">
<h2 id="Setting-up-the-tests">Setting up the tests<a class="anchor-link" href="#Setting-up-the-tests">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<h3 id="setUp"><code>setUp</code><a class="anchor-link" href="#setUp">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>With the <code>unittest</code> library we can configure the tests, but to see it, first we are going to create a new code file called <code>bank_account.py</code> in the <code>src</code> folder.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class BankAccount:"</span><span class="w">                           </span>&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def __init__(self, balance=0):"</span><span class="w">          </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.balance = balance"</span><span class="w">              </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def deposit(self, amount):"</span><span class="w">              </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        if amount &gt; 0:"</span><span class="w">                      </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            self.balance += amount"</span><span class="w">          </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        return self.balance"</span><span class="w">                 </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def withdraw(self, amount):"</span><span class="w">             </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        if amount &gt; 0:"</span><span class="w">                      </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            self.balance -= amount"</span><span class="w">          </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        return self.balance"</span><span class="w">                 </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def get_balance(self):"</span><span class="w">                  </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        return self.balance"</span><span class="w">                 </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Now we add tests to the new code, creating a file called <code>test_bank_account.py</code> in the <code>tests</code> folder.</p>
</section>
<section class="section-block-markdown-cell">
<p>Let's create the test for adding a deposit first, that is, the <code>deposit</code> method.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                              </span>&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from src.bank_account import BankAccount"</span><span class="w">    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class TestBankAccount(unittest.TestCase):"</span><span class="w">   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_deposit(self):"</span><span class="w">                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        account = BankAccount()"</span><span class="w">             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = account.deposit(1500)"</span><span class="w">  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 1500)"</span><span class="w">  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We pass the tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>discover<span class="w"> </span>-s<span class="w"> </span>tests
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>.....
----------------------------------------------------------------------
Ran 5 tests in 0.000s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We see that there are five points, but we have only written one test, so we use the flag <code>-v</code> to get more information.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>discover<span class="w"> </span>-s<span class="w"> </span>tests<span class="w"> </span>-v
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

----------------------------------------------------------------------
Ran 5 tests in 0.000s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We see that <code>discover</code> has found the tests <code>test_calculator</code> and <code>test_bank_account</code> and both have passed.</p>
</section>
<section class="section-block-markdown-cell">
<p>Let's create the tests for the rest of the methods</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                              </span>&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from src.bank_account import BankAccount"</span><span class="w">    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class TestBankAccount(unittest.TestCase):"</span><span class="w">   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_deposit(self):"</span><span class="w">                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        account = BankAccount(balance=1000)"</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = account.deposit(500)"</span><span class="w">   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 1500)"</span><span class="w">  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_withdraw(self):"</span><span class="w">                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        account = BankAccount(balance=1000)"</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = account.withdraw(200)"</span><span class="w">  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 800)"</span><span class="w">   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_get_balance(self):"</span><span class="w">             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        account = BankAccount(balance=1000)"</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        balance = account.get_balance()"</span><span class="w">     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(balance, 1000)"</span><span class="w">     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We pass the tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>discover<span class="w"> </span>-s<span class="w"> </span>tests<span class="w"> </span>-v
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

----------------------------------------------------------------------
Ran 7 tests in 0.000s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We see that they have passed successfully. Now let's look at one thing: in all the tests we did <code>account = BankAccount(balance=1000)</code> and then called the methods. This is because each test runs on a new object, meaning objects are not shared between tests.
So we can use the <code>setUp</code> method to create an object that is shared among all tests.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                                      </span>&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from src.bank_account import BankAccount"</span><span class="w">            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class TestBankAccount(unittest.TestCase):"</span><span class="w">           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def setUp(self):"</span><span class="w">                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account = BankAccount(balance=1000)"</span><span class="w">    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_deposit(self):"</span><span class="w">                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.deposit(500)"</span><span class="w">      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 1500)"</span><span class="w">          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_withdraw(self):"</span><span class="w">                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.withdraw(200)"</span><span class="w">     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 800)"</span><span class="w">           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_get_balance(self):"</span><span class="w">                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        balance = self.account.get_balance()"</span><span class="w">        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(balance, 1000)"</span><span class="w">             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>As we can see, we have created the account in the <code>setUp</code> method and removed the account creation in the tests. Let's run the tests.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>discover<span class="w"> </span>-s<span class="w"> </span>tests<span class="w"> </span>-v
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

----------------------------------------------------------------------
Ran 7 tests in 0.000s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h3 id="tearDown"><code>tearDown</code><a class="anchor-link" href="#tearDown">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>Just like with the <code>setUp</code> method we configure the environment before running the tests, with the <code>tearDown</code> method we can clean up the environment after running the tests. To test this, let's add to the code of <code>bank_account.py</code> that operations are written to a log file.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class BankAccount:"</span><span class="w">                                                                   </span>&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def __init__(self, balance=0, log_file=None):"</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.balance = balance"</span><span class="w">                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.log_file = log_file"</span><span class="w">                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self._log_transaction('Account created')"</span><span class="w">                                    </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def _log_transaction(self, message):"</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        if self.log_file:"</span><span class="w">                                                           </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            with open(self.log_file, 'a') as file:"</span><span class="w">                                  </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"                file.write(f'{message}\\\\n')"</span><span class="w">                                       </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def deposit(self, amount):"</span><span class="w">                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        if amount &gt; 0:"</span><span class="w">                                                              </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            self.balance += amount"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            self._log_transaction(f'Deposit {amount}, new balance {self.balance}')"</span><span class="w">  </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        return self.balance"</span><span class="w">                                                         </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def withdraw(self, amount):"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        if amount &gt; 0:"</span><span class="w">                                                              </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            self.balance -= amount"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            self._log_transaction(f'Withdraw {amount}, new balance {self.balance}')"</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        return self.balance"</span><span class="w">                                                         </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def get_balance(self):"</span><span class="w">                                                          </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self._log_transaction(f'Balance check, balance {self.balance}')"</span><span class="w">             </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        return self.balance"</span><span class="w">                                                         </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Now we add a test to the new method <code>_log_transaction</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                                                                      </span>&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import os"</span><span class="w">                                                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from src.bank_account import BankAccount"</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class TestBankAccount(unittest.TestCase):"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def setUp(self):"</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account = BankAccount(balance=1000, log_file='test_log.txt')"</span><span class="w">           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_deposit(self):"</span><span class="w">                                                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.deposit(500)"</span><span class="w">                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 1500)"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_withdraw(self):"</span><span class="w">                                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.withdraw(200)"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 800)"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_get_balance(self):"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        balance = self.account.get_balance()"</span><span class="w">                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(balance, 1000)"</span><span class="w">                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_transaction_log(self):"</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.deposit(500)"</span><span class="w">                                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.withdraw(200)"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.get_balance()"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        assert os.path.exists('test_log.txt')"</span><span class="w">                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        with open('test_log.txt', 'r') as file:"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            content = file.readlines()"</span><span class="w">                                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(content, ["</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Account created\\\n', "</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Deposit 500, new balance 1500\\\n', "</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Account created\\\n', "</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Balance check, balance 1000\\\n', "</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Account created\\\n', "</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Deposit 500, new balance 1500\\\n', "</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Withdraw 200, new balance 1300\\\n', "</span><span class="w">                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Balance check, balance 1300\\\n'])"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We pass the tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>discover<span class="w"> </span>-s<span class="w"> </span>tests<span class="w"> </span>-v
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_transaction_log (test_bank_account.TestBankAccount) ... FAIL
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

======================================================================
FAIL: test_transaction_log (test_bank_account.TestBankAccount)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/wallabot/Documentos/web/portafolio/posts/testing_python/tests/test_bank_account.py", line 28, in test_transaction_log
    self.assertEqual(content, [
AssertionError: Lists differ: ['Acc[224 chars]00\n', 'Account created\n', 'Withdraw 200, new[246 chars]0\n'] != ['Acc[224 chars]00\n']

First list contains 10 additional elements.
First extra element 8:
'Account created\n'

  ['Account created\n',
   'Deposit 500, new balance 1500\n',
   'Account created\n',
   'Balance check, balance 1000\n',
   'Account created\n',
   'Deposit 500, new balance 1500\n',
   'Withdraw 200, new balance 1300\n',
-  'Balance check, balance 1300\n',
-  'Account created\n',
-  'Withdraw 200, new balance 800\n',
-  'Account created\n',
-  'Deposit 500, new balance 1500\n',
-  'Account created\n',
-  'Balance check, balance 1000\n',
-  'Account created\n',
-  'Deposit 500, new balance 1500\n',
-  'Withdraw 200, new balance 1300\n',
   'Balance check, balance 1300\n']

----------------------------------------------------------------------
Ran 8 tests in 0.001s

FAILED (failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>The tests have gone well, but we see that in the log file there are many lines with the text <code>Account created</code>, this is because at the beginning of each test the <code>setUp</code> method is executed which creates an account, so we need to create the <code>tearDown</code> method to delete the log file after each test.</p>
</section>
<section class="section-block-markdown-cell">
<p>Since this is a file generated for the test, it should not exist after running the tests, so let's add the <code>tearDown</code> method to delete the file.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                                                                      </span>&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import os"</span><span class="w">                                                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from src.bank_account import BankAccount"</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class TestBankAccount(unittest.TestCase):"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def setUp(self):"</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account = BankAccount(balance=1000, log_file='test_log.txt')"</span><span class="w">           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def tearDown(self):"</span><span class="w">                                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        if os.path.exists('test_log.txt'):"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            os.remove('test_log.txt')"</span><span class="w">                                               </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_deposit(self):"</span><span class="w">                                                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.deposit(500)"</span><span class="w">                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 1500)"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_withdraw(self):"</span><span class="w">                                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.withdraw(200)"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 800)"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_get_balance(self):"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        balance = self.account.get_balance()"</span><span class="w">                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(balance, 1000)"</span><span class="w">                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_transaction_log(self):"</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.deposit(500)"</span><span class="w">                                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.withdraw(200)"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.get_balance()"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        assert os.path.exists('test_log.txt')"</span><span class="w">                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        with open('test_log.txt', 'r') as file:"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            content = file.readlines()"</span><span class="w">                                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(content, ["</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Account created\\\n', "</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Deposit 500, new balance 1500\\\n', "</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Account created\\\n', "</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Balance check, balance 1000\\\n', "</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Account created\\\n', "</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Deposit 500, new balance 1500\\\n', "</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Withdraw 200, new balance 1300\\\n', "</span><span class="w">                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Balance check, balance 1300\\\n'"</span><span class="w">                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            ])"</span><span class="w">                                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We run the tests again</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>discover<span class="w"> </span>-s<span class="w"> </span>tests<span class="w"> </span>-v
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_transaction_log (test_bank_account.TestBankAccount) ... FAIL
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

======================================================================
FAIL: test_transaction_log (test_bank_account.TestBankAccount)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/wallabot/Documentos/web/portafolio/posts/testing_python/tests/test_bank_account.py", line 32, in test_transaction_log
    self.assertEqual(content, [
AssertionError: Lists differ: ['Acc[48 chars]n', 'Withdraw 200, new balance 1300\n', 'Balan[21 chars]0\n'] != ['Acc[48 chars]n', 'Account created\n', 'Balance check, balan[131 chars]0\n']

First differing element 2:
'Withdraw 200, new balance 1300\n'
'Account created\n'

Second list contains 4 additional elements.
First extra element 4:
'Account created\n'

  ['Account created\n',
+  'Deposit 500, new balance 1500\n',
+  'Account created\n',
+  'Balance check, balance 1000\n',
+  'Account created\n',
   'Deposit 500, new balance 1500\n',
   'Withdraw 200, new balance 1300\n',
   'Balance check, balance 1300\n']

----------------------------------------------------------------------
Ran 8 tests in 0.001s

FAILED (failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>But now we get an error, because since at the end of each test we have deleted the log file, we don't need to check that so much text has been written, but only the text from the test we are running. So let's modify the test to only check that the text from the test has been written.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                                                                      </span>&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import os"</span><span class="w">                                                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from src.bank_account import BankAccount"</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class TestBankAccount(unittest.TestCase):"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def setUp(self):"</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account = BankAccount(balance=1000, log_file='test_log.txt')"</span><span class="w">           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def tearDown(self):"</span><span class="w">                                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        if os.path.exists('test_log.txt'):"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            os.remove('test_log.txt')"</span><span class="w">                                               </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_deposit(self):"</span><span class="w">                                                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.deposit(500)"</span><span class="w">                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 1500)"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_withdraw(self):"</span><span class="w">                                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.withdraw(200)"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 800)"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_get_balance(self):"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        balance = self.account.get_balance()"</span><span class="w">                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(balance, 1000)"</span><span class="w">                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_transaction_log(self):"</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.deposit(500)"</span><span class="w">                                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.withdraw(200)"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.get_balance()"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        assert os.path.exists('test_log.txt')"</span><span class="w">                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        with open('test_log.txt', 'r') as file:"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            content = file.readlines()"</span><span class="w">                                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(content, ["</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Account created\\\n', "</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Deposit 500, new balance 1500\\\n', "</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Withdraw 200, new balance 1300\\\n', "</span><span class="w">                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Balance check, balance 1300\\\n'"</span><span class="w">                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            ])"</span><span class="w">                                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>And we pass the tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>discover<span class="w"> </span>-s<span class="w"> </span>tests<span class="w"> </span>-v
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_transaction_log (test_bank_account.TestBankAccount) ... ok
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

----------------------------------------------------------------------
Ran 8 tests in 0.001s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h3 id="Error-Documentation">Error Documentation<a class="anchor-link" href="#Error-Documentation">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>If you've noticed, so far in the tests we have been using <code>assertEqual</code>. This method gives us the option to write an error message when the condition is not met. Let's modify a test to make it fail and see the error message.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                                                                      </span>&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import os"</span><span class="w">                                                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from src.bank_account import BankAccount"</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class TestBankAccount(unittest.TestCase):"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def setUp(self):"</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account = BankAccount(balance=1000, log_file='test_log.txt')"</span><span class="w">           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def tearDown(self):"</span><span class="w">                                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        if os.path.exists('test_log.txt'):"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            os.remove('test_log.txt')"</span><span class="w">                                               </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_deposit(self):"</span><span class="w">                                                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.deposit(500)"</span><span class="w">                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 1500)"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_withdraw(self):"</span><span class="w">                                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.withdraw(200)"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 500, 'Balance is not correct')"</span><span class="w">                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_get_balance(self):"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        balance = self.account.get_balance()"</span><span class="w">                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(balance, 1000)"</span><span class="w">                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_transaction_log(self):"</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.deposit(500)"</span><span class="w">                                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.withdraw(200)"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.get_balance()"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        assert os.path.exists('test_log.txt')"</span><span class="w">                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        with open('test_log.txt', 'r') as file:"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            content = file.readlines()"</span><span class="w">                                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(content, ["</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Account created\\\n', "</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Deposit 500, new balance 1500\\\n', "</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Withdraw 200, new balance 1300\\\n', "</span><span class="w">                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Balance check, balance 1300\\\n'"</span><span class="w">                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            ])"</span><span class="w">                                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We pass the tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>discover<span class="w"> </span>-s<span class="w"> </span>tests<span class="w"> </span>-v
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_transaction_log (test_bank_account.TestBankAccount) ... ok
test_withdraw (test_bank_account.TestBankAccount) ... FAIL
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

======================================================================
FAIL: test_withdraw (test_bank_account.TestBankAccount)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/wallabot/Documentos/web/portafolio/posts/testing_python/tests/test_bank_account.py", line 19, in test_withdraw
    self.assertEqual(new_balace, 500, 'Balance is not correct')
AssertionError: 800 != 500 : Balance is not correct

----------------------------------------------------------------------
Ran 8 tests in 0.001s

FAILED (failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>As we can see, we have the message we wrote in the test <code>AssertionError: 800 != 500 : Balance is not correct</code></p>
</section>
<section class="section-block-markdown-cell">
<h3 id="asserts"><code>assert</code>s<a class="anchor-link" href="#asserts">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>So far we have used <code>assertEqual</code>, but there are more, such as <code>assertTrue</code>. Let's modify the line <code>assert os.path.exists('test_log.txt')</code> to <code>self.assertTrue(os.path.exists('test_log.txt'))</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                                                                     </span>&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import os"</span><span class="w">                                                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from src.bank_account import BankAccount"</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class TestBankAccount(unittest.TestCase):"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def setUp(self):"</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account = BankAccount(balance=1000, log_file='test_log.txt')"</span><span class="w">           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def tearDown(self):"</span><span class="w">                                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        if os.path.exists('test_log.txt'):"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            os.remove('test_log.txt')"</span><span class="w">                                               </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_deposit(self):"</span><span class="w">                                                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.deposit(500)"</span><span class="w">                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 1500)"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_withdraw(self):"</span><span class="w">                                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.withdraw(200)"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 800, 'Balance is not correct')"</span><span class="w">                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_get_balance(self):"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        balance = self.account.get_balance()"</span><span class="w">                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(balance, 1000)"</span><span class="w">                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_transaction_log(self):"</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.deposit(500)"</span><span class="w">                                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.withdraw(200)"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.get_balance()"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertTrue(os.path.exists('test_log.txt'))"</span><span class="w">                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        with open('test_log.txt', 'r') as file:"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            content = file.readlines()"</span><span class="w">                                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(content, ["</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Account created\\\n', "</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Deposit 500, new balance 1500\\\n', "</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Withdraw 200, new balance 1300\\\n', "</span><span class="w">                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Balance check, balance 1300\\\n'"</span><span class="w">                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            ])"</span><span class="w">                                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>And we pass the tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>discover<span class="w"> </span>-s<span class="w"> </span>tests<span class="w"> </span>-v
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_transaction_log (test_bank_account.TestBankAccount) ... ok
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

----------------------------------------------------------------------
Ran 8 tests in 0.001s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Some other <code>assert</code>s we can use are:* <code>assertEqual</code>* <code>assertNotEqual</code>* <code>assertTrue</code>* <code>assertFalse</code>* <code>assertRaises</code></p>
</section>
<section class="section-block-markdown-cell">
<h3 id="skip"><code>skip</code><a class="anchor-link" href="#skip">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>Just like in Python we can use <code>pass</code> to do nothing, in tests we can use <code>skip</code> to skip a test. This can be useful when we know we want to pass some tests, but the code to pass them is not yet ready.</p>
</section>
<section class="section-block-markdown-cell">
<p>I'm going to add a test that checks if the user has a loan, but since there is no code related to loans yet, I will skip the test.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                                                                      </span>&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import os"</span><span class="w">                                                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from src.bank_account import BankAccount"</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class TestBankAccount(unittest.TestCase):"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def setUp(self):"</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account = BankAccount(balance=1000, log_file='test_log.txt')"</span><span class="w">           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def tearDown(self):"</span><span class="w">                                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        if os.path.exists('test_log.txt'):"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            os.remove('test_log.txt')"</span><span class="w">                                               </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_deposit(self):"</span><span class="w">                                                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.deposit(500)"</span><span class="w">                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 1500)"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_withdraw(self):"</span><span class="w">                                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.withdraw(200)"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 800, 'Balance is not correct')"</span><span class="w">                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_get_balance(self):"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        balance = self.account.get_balance()"</span><span class="w">                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(balance, 1000)"</span><span class="w">                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_transaction_log(self):"</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.deposit(500)"</span><span class="w">                                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.withdraw(200)"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.get_balance()"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertTrue(os.path.exists('test_log.txt'))"</span><span class="w">                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        with open('test_log.txt', 'r') as file:"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            content = file.readlines()"</span><span class="w">                                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(content, ["</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Account created\\\n', "</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Deposit 500, new balance 1500\\\n', "</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Withdraw 200, new balance 1300\\\n', "</span><span class="w">                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Balance check, balance 1300\\\n'"</span><span class="w">                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            ])"</span><span class="w">                                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @unittest.skip('Not implemented yet')"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_has_loan(self):"</span><span class="w">                                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertFalse(self.account.has_loan())"</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Let's see what happens when we run it</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>discover<span class="w"> </span>-s<span class="w"> </span>tests<span class="w"> </span>-v
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_has_loan (test_bank_account.TestBankAccount) ... skipped 'Not implemented yet'
test_transaction_log (test_bank_account.TestBankAccount) ... ok
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

----------------------------------------------------------------------
Ran 9 tests in 0.001s

OK (skipped=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We can see <code>test_has_loan (test_bank_account.TestBankAccount) ... skipped 'Not implemented yet'</code> that test has been skipped as we wanted.</p>
</section>
<section class="section-block-markdown-cell">
<h3 id="skipIf"><code>skipIf</code><a class="anchor-link" href="#skipIf">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>Another option is to use <code>skipIf</code> to skip a test if a condition is met. I'm going to add a variable at the beginning called <code>server</code> to know whether we are in a local environment or on the server, and the test will check this variable so that if we are on the server, it will skip the test.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                                                                      </span>&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import os"</span><span class="w">                                                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from src.bank_account import BankAccount"</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"SERVER = True"</span><span class="w">                                                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class TestBankAccount(unittest.TestCase):"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def setUp(self):"</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account = BankAccount(balance=1000, log_file='test_log.txt')"</span><span class="w">           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def tearDown(self):"</span><span class="w">                                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        if os.path.exists('test_log.txt'):"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            os.remove('test_log.txt')"</span><span class="w">                                               </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_deposit(self):"</span><span class="w">                                                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.deposit(500)"</span><span class="w">                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 1500)"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_withdraw(self):"</span><span class="w">                                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.withdraw(200)"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 800, 'Balance is not correct')"</span><span class="w">                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_get_balance(self):"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        balance = self.account.get_balance()"</span><span class="w">                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(balance, 1000)"</span><span class="w">                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_transaction_log(self):"</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.deposit(500)"</span><span class="w">                                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.withdraw(200)"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.get_balance()"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertTrue(os.path.exists('test_log.txt'))"</span><span class="w">                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        with open('test_log.txt', 'r') as file:"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            content = file.readlines()"</span><span class="w">                                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(content, ["</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Account created\\\n', "</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Deposit 500, new balance 1500\\\n', "</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Withdraw 200, new balance 1300\\\n', "</span><span class="w">                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Balance check, balance 1300\\\n'"</span><span class="w">                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            ])"</span><span class="w">                                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @unittest.skip('Not implemented yet')"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_has_loan(self):"</span><span class="w">                                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertFalse(self.account.has_loan())"</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @unittest.skipIf(SERVER, 'Only for local testing')"</span><span class="w">                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_server(self):"</span><span class="w">                                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertTrue(SERVER)"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>If we pass the tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>discover<span class="w"> </span>-s<span class="w"> </span>tests<span class="w"> </span>-v
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_has_loan (test_bank_account.TestBankAccount) ... skipped 'Not implemented yet'
test_server (test_bank_account.TestBankAccount) ... skipped 'Only for local testing'
test_transaction_log (test_bank_account.TestBankAccount) ... ok
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

----------------------------------------------------------------------
Ran 10 tests in 0.001s

OK (skipped=2)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We see <code>test_server (test_bank_account.TestBankAccount) ... skipped 'Only for local testing'</code> since, as <code>SERVER = True</code>, the test has been skipped.</p>
</section>
<section class="section-block-markdown-cell">
<h3 id="expectedFailure"><code>expectedFailure</code><a class="anchor-link" href="#expectedFailure">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>An error should be produced when a user tries to withdraw more money than they have, so with the <code>expectedFailure</code> method we can state that we expect the test to fail.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                                                                      </span>&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import os"</span><span class="w">                                                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from src.bank_account import BankAccount"</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"SERVER = True"</span><span class="w">                                                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class TestBankAccount(unittest.TestCase):"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def setUp(self):"</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account = BankAccount(balance=1000, log_file='test_log.txt')"</span><span class="w">           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def tearDown(self):"</span><span class="w">                                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        if os.path.exists('test_log.txt'):"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            os.remove('test_log.txt')"</span><span class="w">                                               </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_deposit(self):"</span><span class="w">                                                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.deposit(500)"</span><span class="w">                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 1500)"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_withdraw(self):"</span><span class="w">                                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.withdraw(200)"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 800, 'Balance is not correct')"</span><span class="w">                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_get_balance(self):"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        balance = self.account.get_balance()"</span><span class="w">                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(balance, 1000)"</span><span class="w">                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_transaction_log(self):"</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.deposit(500)"</span><span class="w">                                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.withdraw(200)"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.get_balance()"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertTrue(os.path.exists('test_log.txt'))"</span><span class="w">                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        with open('test_log.txt', 'r') as file:"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            content = file.readlines()"</span><span class="w">                                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(content, ["</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Account created\\\n', "</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Deposit 500, new balance 1500\\\n', "</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Withdraw 200, new balance 1300\\\n', "</span><span class="w">                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Balance check, balance 1300\\\n'"</span><span class="w">                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            ])"</span><span class="w">                                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @unittest.skip('Not implemented yet')"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_has_loan(self):"</span><span class="w">                                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertFalse(self.account.has_loan())"</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @unittest.skipIf(SERVER, 'Only for local testing')"</span><span class="w">                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_server(self):"</span><span class="w">                                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertTrue(SERVER)"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @unittest.expectedFailure"</span><span class="w">                                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_fail(self):"</span><span class="w">                                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.withdraw(1200)"</span><span class="w">                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 800, 'Not enough money')"</span><span class="w">                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We pass the tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>discover<span class="w"> </span>-s<span class="w"> </span>tests<span class="w"> </span>-v
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_fail (test_bank_account.TestBankAccount) ... expected failure
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_has_loan (test_bank_account.TestBankAccount) ... skipped 'Not implemented yet'
test_server (test_bank_account.TestBankAccount) ... skipped 'Only for local testing'
test_transaction_log (test_bank_account.TestBankAccount) ... ok
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

----------------------------------------------------------------------
Ran 11 tests in 0.001s

OK (skipped=2, expected failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>As we can see, we get <code>test_fail (test_bank_account.TestBankAccount) ... expected failure</code> because it is an error we expected.</p>
</section>
<section class="section-block-markdown-cell">
<h3 id="skipUnless"><code>skipUnless</code><a class="anchor-link" href="#skipUnless">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>Just like before, there may be tests that we only want to run in the development environment, but never on the server, or in staging, or in production. For this, we can use <code>skipUnless</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                                                                      </span>&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import os"</span><span class="w">                                                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from src.bank_account import BankAccount"</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"SERVER = True"</span><span class="w">                                                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"ENVIRONMENT = 'server'"</span><span class="w">                                                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class TestBankAccount(unittest.TestCase):"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def setUp(self):"</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account = BankAccount(balance=1000, log_file='test_log.txt')"</span><span class="w">           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def tearDown(self):"</span><span class="w">                                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        if os.path.exists('test_log.txt'):"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            os.remove('test_log.txt')"</span><span class="w">                                               </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_deposit(self):"</span><span class="w">                                                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.deposit(500)"</span><span class="w">                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 1500)"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_withdraw(self):"</span><span class="w">                                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.withdraw(200)"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 800, 'Balance is not correct')"</span><span class="w">                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_get_balance(self):"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        balance = self.account.get_balance()"</span><span class="w">                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(balance, 1000)"</span><span class="w">                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_transaction_log(self):"</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.deposit(500)"</span><span class="w">                                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.withdraw(200)"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.get_balance()"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertTrue(os.path.exists('test_log.txt'))"</span><span class="w">                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        with open('test_log.txt', 'r') as file:"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            content = file.readlines()"</span><span class="w">                                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(content, ["</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Account created\\\n', "</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Deposit 500, new balance 1500\\\n', "</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Withdraw 200, new balance 1300\\\n', "</span><span class="w">                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Balance check, balance 1300\\\n'"</span><span class="w">                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            ])"</span><span class="w">                                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @unittest.skip('Not implemented yet')"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_has_loan(self):"</span><span class="w">                                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertFalse(self.account.has_loan())"</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @unittest.skipIf(SERVER, 'Only for local testing')"</span><span class="w">                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_server(self):"</span><span class="w">                                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertTrue(SERVER)"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @unittest.expectedFailure"</span><span class="w">                                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_fail(self):"</span><span class="w">                                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.withdraw(1200)"</span><span class="w">                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 800, 'Not enough money')"</span><span class="w">                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @unittest.skipUnless(ENVIRONMENT == 'dev', 'Only for dev environment')"</span><span class="w">          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_environment(self):"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(ENVIRONMENT, 'dev')"</span><span class="w">                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We pass the tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>discover<span class="w"> </span>-s<span class="w"> </span>tests<span class="w"> </span>-v
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>test_deposit (test_bank_account.TestBankAccount) ... ok
test_environment (test_bank_account.TestBankAccount) ... skipped 'Only for dev environment'
test_fail (test_bank_account.TestBankAccount) ... expected failure
test_get_balance (test_bank_account.TestBankAccount) ... ok
test_has_loan (test_bank_account.TestBankAccount) ... skipped 'Not implemented yet'
test_server (test_bank_account.TestBankAccount) ... skipped 'Only for local testing'
test_transaction_log (test_bank_account.TestBankAccount) ... ok
test_withdraw (test_bank_account.TestBankAccount) ... ok
test_divide (test_calculator.TestCalculator) ... ok
test_multiply (test_calculator.TestCalculator) ... ok
test_substract (test_calculator.TestCalculator) ... ok
test_sum (test_calculator.TestCalculator) ... ok

----------------------------------------------------------------------
Ran 12 tests in 0.001s

OK (skipped=3, expected failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We get <code>test_environment (test_bank_account.TestBankAccount) ... skipped 'Only for dev environment'</code> because that test is only going to pass in the development environment and we are supposed to be on the server.</p>
</section>
<section class="section-block-markdown-cell">
<h2 id="Organize-the-tests">Organize the tests<a class="anchor-link" href="#Organize-the-tests">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<p>We can organize the tests by creating what are called <code>test suites</code>. To do this, we will create a file called <code>test_suites.py</code> in the <code>tests</code> folder.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>tests<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>touch<span class="w"> </span>test_suites.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>And now we generate two test suites with the tests from <code>test_calculator</code> and <code>test_bank_account</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                                              </span>&gt;<span class="w"> </span>testing_python/tests/test_suite_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from test_calculator import TestCalculator"</span><span class="w">                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"def calculator_suite():"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    suite = unittest.TestSuite()"</span><span class="w">                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    suite.addTest(TestCalculator('test_sum'))"</span><span class="w">               </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    suite.addTest(TestCalculator('test_substract'))"</span><span class="w">          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    suite.addTest(TestCalculator('test_multiply'))"</span><span class="w">          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    suite.addTest(TestCalculator('test_divide'))"</span><span class="w">          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    return suite"</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"if __name__ == '__main__':"</span><span class="w">                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    runner = unittest.TextTestRunner()"</span><span class="w">                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_calculator.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    runner.run(calculator_suite())"</span><span class="w">                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_calculator.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Now the one for <code>test_bank_account</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                                              </span>&gt;<span class="w"> </span>testing_python/tests/test_suite_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from test_bank_account import TestBankAccount"</span><span class="w">               </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"def bank_account_suite():"</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    suite = unittest.TestSuite()"</span><span class="w">                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    suite.addTest(TestBankAccount('test_deposit'))"</span><span class="w">          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    suite.addTest(TestBankAccount('test_withdraw'))"</span><span class="w">         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    suite.addTest(TestBankAccount('test_get_balance'))"</span><span class="w">      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    suite.addTest(TestBankAccount('test_transaction_log'))"</span><span class="w">  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    suite.addTest(TestBankAccount('test_has_loan'))"</span><span class="w">         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    suite.addTest(TestBankAccount('test_server'))"</span><span class="w">           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    suite.addTest(TestBankAccount('test_fail'))"</span><span class="w">             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    suite.addTest(TestBankAccount('test_environment'))"</span><span class="w">      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    return suite"</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"if __name__ == '__main__':"</span><span class="w">                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    runner = unittest.TextTestRunner()"</span><span class="w">                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    runner.run(bank_account_suite())"</span><span class="w">                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_suite_bank_account.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We can run only the <code>test_calculator</code> tests with the command <code>python tests/test_suite_calculator.py</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>tests/test_suite_calculator.py
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>Traceback (most recent call last):
  File "/home/wallabot/Documentos/web/portafolio/posts/testing_python/tests/test_suite_calculator.py", line 3, in &lt;module&gt;
    from test_calculator import TestCalculator
  File "/home/wallabot/Documentos/web/portafolio/posts/testing_python/tests/test_calculator.py", line 2, in &lt;module&gt;
    from src.calculator import sum, substract, multiply, divide
ModuleNotFoundError: No module named 'src'
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We see that it cannot find the <code>src</code> module from <code>test_calculator.py</code>, this is because it is not in the path, so let's add it.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">PYTHONPATH</span><span class="o">=</span>.<span class="w"> </span>python<span class="w"> </span>tests/test_suite_calculator.py
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>....
----------------------------------------------------------------------
Ran 4 tests in 0.000s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We see that only the <code>test_calculator</code> tests have passed.</p>
</section>
<section class="section-block-markdown-cell">
<p>Let's move on to the ones in <code>test_bank_account.py</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">PYTHONPATH</span><span class="o">=</span>.<span class="w"> </span>python<span class="w"> </span>tests/test_suite_bank_account.py
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>....ssxs
----------------------------------------------------------------------
Ran 8 tests in 0.001s

OK (skipped=3, expected failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>And here we see that it passes the <code>test_bank_account</code> tests.</p>
</section>
<section class="section-block-markdown-cell">
<p>We need to differentiate from what we did at the beginning, before using <code>discover</code>, when we did <code>!cd testing_python &amp;&amp; python -m unittest tests/test_calculator.py</code>. Because in <code>test_calculator.py</code> we can write all possible tests for <code>calculator.py</code>, but with <code>suite</code>s we run the tests we want. We could have several <code>suite</code>s to run the tests we want from <code>test_calculator.py</code> and <code>test_bank_account.py</code>.</p>
</section>
<section class="section-block-markdown-cell">
<h2 id="Best-practices-when-naming-tests">Best practices when naming tests<a class="anchor-link" href="#Best-practices-when-naming-tests">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<p>When naming tests, it's a good idea to follow these guidelines:* One test class for each code class* All tests must start with <code>test_</code> to know that it is a code* The name of the function or method being tested should follow below* The test scenario should follow, as a method or function can have several test scenarios. For example, with all possible input values, with boundary values, with incorrect values, etc.* Finally, the expected result should be added
So a test should have the following format <code>test_&lt;function_name&gt;_&lt;scenario&gt;_&lt;expected_result&gt;</code></p>
</section>
<section class="section-block-markdown-cell">
<h2 id="API-Mocking">API Mocking<a class="anchor-link" href="#API-Mocking">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<p>Let's assume our code calls an external API and we want to test our code without depending on the external API. For this, we can use <code>unittest.mock</code>, which comes by default in Python.</p>
</section>
<section class="section-block-markdown-cell">
<p>First, let's create a file called <code>api.py</code> in the <code>src</code> folder</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import requests"</span><span class="w">                                              </span>&gt;<span class="w"> </span>testing_python/src/api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                            </span>&gt;&gt;<span class="w"> </span>testing_python/src/api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"def get_api():"</span><span class="w">                                              </span>&gt;&gt;<span class="w"> </span>testing_python/src/api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    url = 'https://jsonplaceholder.typicode.com/posts/1'"</span><span class="w">    </span>&gt;&gt;<span class="w"> </span>testing_python/src/api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    try:"</span><span class="w">                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/src/api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        response = requests.get(url)"</span><span class="w">                        </span>&gt;&gt;<span class="w"> </span>testing_python/src/api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        response.raise_for_status()"</span><span class="w">                         </span>&gt;&gt;<span class="w"> </span>testing_python/src/api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        data = response.json()"</span><span class="w">                              </span>&gt;&gt;<span class="w"> </span>testing_python/src/api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        print(data)"</span><span class="w">                                         </span>&gt;&gt;<span class="w"> </span>testing_python/src/api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        return data"</span><span class="w">                                         </span>&gt;&gt;<span class="w"> </span>testing_python/src/api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    except requests.exceptions.RequestException as e:"</span><span class="w">       </span>&gt;&gt;<span class="w"> </span>testing_python/src/api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        print(f'error: {e}')"</span><span class="w">                                </span>&gt;&gt;<span class="w"> </span>testing_python/src/api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        return None"</span><span class="w">                                         </span>&gt;&gt;<span class="w"> </span>testing_python/src/api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                            </span>&gt;&gt;<span class="w"> </span>testing_python/src/api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"if __name__ == '__main__':"</span><span class="w">                                  </span>&gt;&gt;<span class="w"> </span>testing_python/src/api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    get_api()"</span><span class="w">                                               </span>&gt;&gt;<span class="w"> </span>testing_python/src/api.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Let's run the file to see what it returns</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python/src<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>api.py
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>{'userId': 1, 'id': 1, 'title': 'sunt aut facere repellat provident occaecati excepturi optio reprehenderit', 'body': 'quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto'}
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Now we create the test</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                                              </span>&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from src.api import get_api"</span><span class="w">                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class TestApi(unittest.TestCase):"</span><span class="w">                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_get_api(self):"</span><span class="w">                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        data = get_api()"</span><span class="w">                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertIsNotNone(data)"</span><span class="w">                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertIsInstance(data, dict)"</span><span class="w">                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertIn('userId', data)"</span><span class="w">                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertIn('id', data)"</span><span class="w">                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertIn('title', data)"</span><span class="w">                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertIn('body', data)"</span><span class="w">                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(data['userId'], 1)"</span><span class="w">                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(data['id'], 1)"</span><span class="w">                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We pass the tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>tests/test_api.py
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>{'userId': 1, 'id': 1, 'title': 'sunt aut facere repellat provident occaecati excepturi optio reprehenderit', 'body': 'quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto'}
.
----------------------------------------------------------------------
Ran 1 test in 0.074s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Let's run the tests for <code>bank_account</code> to see how long it takes</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">PYTHONPATH</span><span class="o">=</span>.<span class="w"> </span>python<span class="w"> </span>tests/test_suite_bank_account.py
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>....ssxs
----------------------------------------------------------------------
Ran 8 tests in 0.001s

OK (skipped=3, expected failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>As we can see, 8 tests took 0.001 seconds, while a single API test took 0.074 seconds. This can make a code with many calls to an API take a long time to run the tests. Additionally, there's a risk that if the API changes and doesn't return what we expect, the tests will fail even though our code is correct. That's why APIs are mocked.</p>
</section>
<section class="section-block-markdown-cell">
<p>Let's see how to do it</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                                              </span>&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from src.api import get_api"</span><span class="w">                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from unittest.mock import patch"</span><span class="w">                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class TestApi(unittest.TestCase):"</span><span class="w">                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @patch('src.api.requests.get')"</span><span class="w">                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_get_api(self, mock_get):"</span><span class="w">                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        mock_get.return_value.status_code = 200"</span><span class="w">             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        mock_get.return_value.json.return_value = {"</span><span class="w">         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'userId': 1,"</span><span class="w">                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'id': 1,"</span><span class="w">                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'title': 'title',"</span><span class="w">                               </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'body': 'body'"</span><span class="w">                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        }"</span><span class="w">                                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        data = get_api()"</span><span class="w">                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertIsNotNone(data)"</span><span class="w">                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertIsInstance(data, dict)"</span><span class="w">                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertIn('userId', data)"</span><span class="w">                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertIn('id', data)"</span><span class="w">                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertIn('title', data)"</span><span class="w">                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertIn('body', data)"</span><span class="w">                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(data['userId'], 1)"</span><span class="w">                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(data['id'], 1)"</span><span class="w">                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        "</span><span class="w">                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        mock_get.assert_called_once_with('https://jsonplaceholder.typicode.com/posts/1')"</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_api.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>What we have done is* Import <code>patch</code> from <code>unittest.mock</code>.* We have added a decorator to the function <code>test_get_data</code> and passed as a parameter to the decorator the function we want to mock.* We have created a <code>mock_get</code> object that will replace the original function with the <code>return_value</code> method, which is the value that the mocked function will return.* When <code>get_api()</code> is called, instead of executing the original function, <code>data</code> will contain the value we have mocked in <code>return_value</code>* Finally, we added the check that the <code>URL</code> of the API can be called.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>tests/test_api.py
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>{'userId': 1, 'id': 1, 'title': 'title', 'body': 'body'}
.
----------------------------------------------------------------------
Ran 1 test in 0.001s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>As we can see, it now only takes 0.002 seconds.</p>
</section>
<section class="section-block-markdown-cell">
<h2 id="Modify-the-result-of-objects-using-patch">Modify the result of objects using <code>patch</code><a class="anchor-link" href="#Modify-the-result-of-objects-using-patch">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<p>Suppose we want to modify the method of withdrawing money so that it can only be done within a specific range of hours.
First we modify the withdraw function</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">withdraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span><span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="k">if</span> <span class="n">now</span><span class="o">.</span><span class="n">hour</span> <span class="o">&lt;</span> <span class="mi">7</span> <span class="ow">or</span> <span class="n">now</span><span class="o">.</span><span class="n">hour</span> <span class="o">&gt;</span> <span class="mi">18</span><span class="p">:</span><span class="nb">print</span><span class="p">(</span><span class="s1">'Out of hours'</span><span class="p">)</span><span class="k">return</span> <span class="n">Noneif</span> <span class="n">amount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">-=</span> <span class="n">amountself</span><span class="o">.</span><span class="n">_log_transaction</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Withdraw </span><span class="si">{</span><span class="n">amount</span><span class="si">}</span><span class="s1">, new balance </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">balance</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span><span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">balance</span><span class="err">```</span>
</pre></div>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from datetime import datetime"</span><span class="w">                                                        </span>&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class BankAccount:"</span><span class="w">                                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def __init__(self, balance=0, log_file=None):"</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.balance = balance"</span><span class="w">                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.log_file = log_file"</span><span class="w">                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self._log_transaction('Account created')"</span><span class="w">                                    </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def _log_transaction(self, message):"</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        if self.log_file:"</span><span class="w">                                                           </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            with open(self.log_file, 'a') as file:"</span><span class="w">                                  </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"                file.write(f'{message}\\\\n')"</span><span class="w">                                       </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def deposit(self, amount):"</span><span class="w">                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        if amount &gt; 0:"</span><span class="w">                                                              </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            self.balance += amount"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            self._log_transaction(f'Deposit {amount}, new balance {self.balance}')"</span><span class="w">  </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        return self.balance"</span><span class="w">                                                         </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def withdraw(self, amount):"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        now = datetime.now()"</span><span class="w">                                                        </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        if now.hour &lt; 7 or now.hour &gt; 18:"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            print('Out of hours')"</span><span class="w">                                                   </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            return None"</span><span class="w">                                                             </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        if amount &gt; 0:"</span><span class="w">                                                              </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            self.balance -= amount"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            self._log_transaction(f'Withdraw {amount}, new balance {self.balance}')"</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        return self.balance"</span><span class="w">                                                         </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def get_balance(self):"</span><span class="w">                                                          </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self._log_transaction(f'Balance check, balance {self.balance}')"</span><span class="w">             </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        return self.balance"</span><span class="w">                                                         </span>&gt;&gt;<span class="w"> </span>testing_python/src/bank_account.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Now we need to be able to test the withdrawal of money at different times, but we can't keep changing the system time, nor can we wait for it to be a specific time to run the test. For this, we can use <code>patch</code> to modify the result of <code>datetime.now()</code></p>
<div class="highlight"><pre><span></span><span class="nd">@patch</span><span class="p">(</span><span class="s1">'src.bank_account.datetime.now'</span><span class="p">)</span><span class="k">def</span> <span class="nf">test_withdraw_during_working_hours</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_now</span><span class="p">):</span><span class="n">mock_now</span><span class="o">.</span><span class="n">return_value</span><span class="o">.</span><span class="n">hour</span> <span class="o">=</span> <span class="mi">10</span><span class="n">new_balance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">withdraw</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span><span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">new_balance</span><span class="p">,</span> <span class="mi">800</span><span class="p">,</span> <span class="s1">'Balance is not correct'</span><span class="p">)</span>
<span class="nd">@patch</span><span class="p">(</span><span class="s1">'src.bank_account.datetime.now'</span><span class="p">)</span><span class="k">def</span> <span class="nf">test_withdraw_during_non_working_hours</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_now</span><span class="p">):</span><span class="n">mock_now</span><span class="o">.</span><span class="n">return_value</span><span class="o">.</span><span class="n">hour</span> <span class="o">=</span> <span class="mi">20</span><span class="n">new_balance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">withdraw</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span><span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">new_balance</span><span class="p">,</span> <span class="s1">'Balance is not correct'</span><span class="p">)</span><span class="err">```</span>
</pre></div>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                                                                      </span>&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from unittest.mock import patch"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import os"</span><span class="w">                                                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from src.bank_account import BankAccount"</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"SERVER = True"</span><span class="w">                                                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"ENVIRONMENT = 'server'"</span><span class="w">                                                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class TestBankAccount(unittest.TestCase):"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def setUp(self):"</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account = BankAccount(balance=1000, log_file='test_log.txt')"</span><span class="w">           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def tearDown(self):"</span><span class="w">                                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        if os.path.exists('test_log.txt'):"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            os.remove('test_log.txt')"</span><span class="w">                                               </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_deposit(self):"</span><span class="w">                                                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.deposit(500)"</span><span class="w">                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 1500)"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_withdraw(self):"</span><span class="w">                                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.withdraw(200)"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 800, 'Balance is not correct')"</span><span class="w">                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @patch('src.bank_account.datetime.now')"</span><span class="w">                                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_withdraw_during_working_hours(self, mock_now):"</span><span class="w">                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        mock_now.return_value.hour = 10"</span><span class="w">                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.withdraw(200)"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 800, 'Balance is not correct')"</span><span class="w">                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @patch('src.bank_account.datetime.now')"</span><span class="w">                                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_withdraw_during_non_working_hours(self, mock_now):"</span><span class="w">                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        mock_now.return_value.hour = 20"</span><span class="w">                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.withdraw(200)"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertIsNone(new_balace, 'Balance is not correct')"</span><span class="w">                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_get_balance(self):"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        balance = self.account.get_balance()"</span><span class="w">                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(balance, 1000)"</span><span class="w">                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_transaction_log(self):"</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.deposit(500)"</span><span class="w">                                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.withdraw(200)"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.get_balance()"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertTrue(os.path.exists('test_log.txt'))"</span><span class="w">                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        with open('test_log.txt', 'r') as file:"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            content = file.readlines()"</span><span class="w">                                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(content, ["</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Account created\\\n', "</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Deposit 500, new balance 1500\\\n', "</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Withdraw 200, new balance 1300\\\n', "</span><span class="w">                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Balance check, balance 1300\\\n'"</span><span class="w">                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            ])"</span><span class="w">                                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @unittest.skip('Not implemented yet')"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_has_loan(self):"</span><span class="w">                                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertFalse(self.account.has_loan())"</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @unittest.skipIf(SERVER, 'Only for local testing')"</span><span class="w">                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_server(self):"</span><span class="w">                                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertTrue(SERVER)"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @unittest.expectedFailure"</span><span class="w">                                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_fail(self):"</span><span class="w">                                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.withdraw(1200)"</span><span class="w">                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 800, 'Not enough money')"</span><span class="w">                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @unittest.skipUnless(ENVIRONMENT == 'dev', 'Only for dev environment')"</span><span class="w">          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_environment(self):"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(ENVIRONMENT, 'dev')"</span><span class="w">                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We pass the tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">PYTHONPATH</span><span class="o">=</span>.<span class="w"> </span>python<span class="w"> </span>tests/test_suite_bank_account.py
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>....ssxs
----------------------------------------------------------------------
Ran 8 tests in 0.001s

OK (skipped=3, expected failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h2 id="Parameterizing-tests-with-subTest">Parameterizing tests with <code>subTest</code><a class="anchor-link" href="#Parameterizing-tests-with-subTest">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<p>Suppose we want to run several tests for withdrawing money with different values. We could write a test for each value of money we want to test, but that would be repetitive code. For this, we can use <code>subTest</code>, which allows us to perform multiple tests with a single test case.
What we do is create a dictionary with the different values we want to test and the expected result, and then with a <code>for</code> loop and <code>subTest</code> we perform the tests. This is how the test for the <code>withdraw</code> method would look:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_withdraw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span><span class="n">test_cases</span> <span class="o">=</span> <span class="p">{</span><span class="n">test_200</span><span class="p">:</span> <span class="p">{</span><span class="s1">'amount'</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span><span class="s1">'expected'</span><span class="p">:</span> <span class="mi">800</span><span class="p">},</span><span class="n">test_400</span><span class="p">:</span> <span class="p">{</span><span class="s1">'amount'</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span><span class="s1">'expected'</span><span class="p">:</span> <span class="mi">600</span><span class="p">},</span><span class="n">test_600</span><span class="p">:</span> <span class="p">{</span><span class="s1">'amount'</span><span class="p">:</span> <span class="mi">600</span><span class="p">,</span><span class="s1">'expected'</span><span class="p">:</span> <span class="mi">400</span><span class="p">},</span><span class="n">test_800</span><span class="p">:</span> <span class="p">{</span><span class="s1">'amount'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span><span class="s1">'expected'</span><span class="p">:</span> <span class="mi">200</span><span class="p">},</span><span class="n">test_1000</span><span class="p">:</span> <span class="p">{</span><span class="s1">'amount'</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span><span class="s1">'expected'</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span><span class="n">It</span> <span class="n">seems</span> <span class="n">like</span> <span class="n">you</span> <span class="n">might</span> <span class="n">have</span> <span class="n">accidentally</span> <span class="n">sent</span> <span class="n">an</span> <span class="n">incomplete</span> <span class="n">request</span><span class="o">.</span> <span class="n">If</span> <span class="n">you</span> <span class="n">have</span> <span class="n">a</span> <span class="n">Markdown</span> <span class="n">text</span> <span class="n">to</span> <span class="n">translate</span><span class="p">,</span> <span class="n">please</span> <span class="n">provide</span> <span class="n">it</span> <span class="ow">and</span> <span class="n">I</span><span class="s1">'ll be happy to help!</span>
<span class="k">for</span> <span class="n">test_name</span><span class="p">,</span> <span class="n">test_case</span> <span class="ow">in</span> <span class="n">test_cases</span><span class="o">.</span><span class="n">items</span><span class="p">():</span><span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">subTest</span><span class="p">(</span><span class="n">test_name</span><span class="p">):</span><span class="bp">self</span><span class="o">.</span><span class="n">account</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="p">(</span><span class="n">balance</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">log_file</span><span class="o">=</span><span class="s1">'test_log.txt'</span><span class="p">)</span><span class="n">new_balance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">withdraw</span><span class="p">(</span><span class="n">test_case</span><span class="p">[</span><span class="s1">'amount'</span><span class="p">])</span><span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">new_balance</span><span class="p">,</span> <span class="n">test_case</span><span class="p">[</span><span class="s1">'expected'</span><span class="p">],</span> <span class="s1">'Balance is not correct'</span><span class="p">)</span><span class="err">```</span>
</pre></div>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import unittest"</span><span class="w">                                                                      </span>&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from unittest.mock import patch"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"import os"</span><span class="w">                                                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"from src.bank_account import BankAccount"</span><span class="w">                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"SERVER = True"</span><span class="w">                                                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"ENVIRONMENT = 'server'"</span><span class="w">                                                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"class TestBankAccount(unittest.TestCase):"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def setUp(self):"</span><span class="w">                                                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account = BankAccount(balance=1000, log_file='test_log.txt')"</span><span class="w">           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def tearDown(self):"</span><span class="w">                                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        if os.path.exists('test_log.txt'):"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            os.remove('test_log.txt')"</span><span class="w">                                               </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_deposit(self):"</span><span class="w">                                                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.deposit(500)"</span><span class="w">                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 1500)"</span><span class="w">                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_withdraw(self):"</span><span class="w">                                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        test_cases = {"</span><span class="w">                                                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'test_200': {"</span><span class="w">                                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"                'amount': 200,"</span><span class="w">                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"                'expected': 800"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            },"</span><span class="w">                                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'test_400': {"</span><span class="w">                                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"                'amount': 400,"</span><span class="w">                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"                'expected': 600"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            },"</span><span class="w">                                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'test_600': {"</span><span class="w">                                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"                'amount': 600,"</span><span class="w">                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"                'expected': 400"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            },"</span><span class="w">                                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'test_800': {"</span><span class="w">                                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"                'amount': 800,"</span><span class="w">                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"                'expected': 200"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            },"</span><span class="w">                                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'test_1000': {"</span><span class="w">                                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"                'amount': 1000,"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"                'expected': 0"</span><span class="w">                                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            }"</span><span class="w">                                                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        }"</span><span class="w">                                                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        for test_case, values in test_cases.items():"</span><span class="w">                                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            with self.subTest(test_case=test_case):"</span><span class="w">                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"                self.account = BankAccount(balance=1000, log_file='test_log.txt')"</span><span class="w">   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"                new_balace = self.account.withdraw(values['amount'])"</span><span class="w">                </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"                self.assertEqual(new_balace, values['expected'], 'Balance is not correct')"</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @patch('src.bank_account.datetime.now')"</span><span class="w">                                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_withdraw_during_working_hours(self, mock_now):"</span><span class="w">                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        mock_now.return_value.hour = 10"</span><span class="w">                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.withdraw(200)"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 800, 'Balance is not correct')"</span><span class="w">                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @patch('src.bank_account.datetime.now')"</span><span class="w">                                         </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_withdraw_during_non_working_hours(self, mock_now):"</span><span class="w">                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        mock_now.return_value.hour = 20"</span><span class="w">                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.withdraw(200)"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertIsNone(new_balace, 'Balance is not correct')"</span><span class="w">                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_get_balance(self):"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        balance = self.account.get_balance()"</span><span class="w">                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(balance, 1000)"</span><span class="w">                                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_transaction_log(self):"</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.deposit(500)"</span><span class="w">                                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.withdraw(200)"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.account.get_balance()"</span><span class="w">                                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertTrue(os.path.exists('test_log.txt'))"</span><span class="w">                             </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        with open('test_log.txt', 'r') as file:"</span><span class="w">                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            content = file.readlines()"</span><span class="w">                                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(content, ["</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Account created\\\n', "</span><span class="w">                                                 </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Deposit 500, new balance 1500\\\n', "</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Withdraw 200, new balance 1300\\\n', "</span><span class="w">                                  </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            'Balance check, balance 1300\\\n'"</span><span class="w">                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"            ])"</span><span class="w">                                                                      </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @unittest.skip('Not implemented yet')"</span><span class="w">                                           </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_has_loan(self):"</span><span class="w">                                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertFalse(self.account.has_loan())"</span><span class="w">                                   </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @unittest.skipIf(SERVER, 'Only for local testing')"</span><span class="w">                              </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_server(self):"</span><span class="w">                                                          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertTrue(SERVER)"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @unittest.expectedFailure"</span><span class="w">                                                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_fail(self):"</span><span class="w">                                                            </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        new_balace = self.account.withdraw(1200)"</span><span class="w">                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(new_balace, 800, 'Not enough money')"</span><span class="w">                       </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span><span class="w">                                                                                    </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    @unittest.skipUnless(ENVIRONMENT == 'dev', 'Only for dev environment')"</span><span class="w">          </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"    def test_environment(self):"</span><span class="w">                                                     </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"        self.assertEqual(ENVIRONMENT, 'dev')"</span><span class="w">                                        </span>&gt;&gt;<span class="w"> </span>testing_python/tests/test_bank_account.py
</pre></div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>We pass the tests</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">PYTHONPATH</span><span class="o">=</span>.<span class="w"> </span>python<span class="w"> </span>tests/test_suite_bank_account.py
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>....ssxs
----------------------------------------------------------------------
Ran 8 tests in 0.001s

OK (skipped=3, expected failures=1)
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<h2 id="Test-Coverage">Test Coverage<a class="anchor-link" href="#Test-Coverage">¶</a></h2>
</section>
<section class="section-block-markdown-cell">
<p>We can see the test coverage we have, as even though we may think we have tested everything, there might be parts of the code that we haven't tested. For this, we are going to use the <code>coverage</code> library.</p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>coverage<span class="w"> </span>run<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>tests/test_calculator.py
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>....
----------------------------------------------------------------------
Ran 4 tests in 0.000s

OK
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>As we can see, we have only passed the <code>test_calculator</code> tests, but we still don't know the coverage.</p>
</section>
<section class="section-block-markdown-cell">
<h3 id="Coverage-Report">Coverage Report<a class="anchor-link" href="#Coverage-Report">¶</a></h3>
</section>
<section class="section-block-markdown-cell">
<p>After running <code>coverage</code>, we can request a test coverage report with the command <code>coverage report</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>coverage<span class="w"> </span>report
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>Name                       Stmts   Miss  Cover
----------------------------------------------
src/calculator.py              8      0   100%
tests/test_calculator.py      11      0   100%
----------------------------------------------
TOTAL                         19      0   100% 
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>Or request it through an HTML file with the command <code>coverage html</code></p>
</section>
<section class="section-block-code-cell-">
<div class="input-code">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">!</span><span class="nb">cd</span><span class="w"> </span>testing_python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>coverage<span class="w"> </span>html
</pre></div>
</div>
<div class="output-wrapper">
<div class="output-area">
<div class="prompt"></div>
<div class="output-subarea-output-stream-output-stdout-output-text">
<pre>Wrote HTML report to ]8;;file:///home/wallabot/Documentos/web/portafolio/posts/testing_python/htmlcov/index.htmlhtmlcov/index.html]8;;
</pre>
</div>
</div>
</div>
</section>
<section class="section-block-markdown-cell">
<p>An <code>index.html</code> file is created in the <code>htmlcov</code> folder that we can open in the browser to view the test coverage.</p>
</section>
